{"ast":null,"code":"import questionServices from '../../../api/questionServices';\nimport UserInfo from '../../../services/userInfo.service';\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\nexport default {\n  name: 'question',\n  created: function created() {\n    this.role = UserInfo.getRole()[0];\n  },\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  props: {\n    question: {\n      type: [Object],\n      required: true\n    },\n    userBook: {\n      type: [Object],\n      required: true\n    },\n    index: {\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      role: '',\n      reviweNote: '',\n      mark: 0,\n      degree: '',\n      markCondition: true,\n      retard: false,\n      retardNote: '',\n      isAcceptable: false,\n      rule1: false,\n      rule2: false,\n      loader: false\n    };\n  },\n  validations: function validations() {\n    return {\n      retardNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.retard == true;\n        })\n      },\n      reviweNote: {\n        required: required\n      },\n      degree: {\n        required: required\n      }\n    };\n  },\n  methods: {\n    setRule1: function setRule1() {\n      this.rule1 = !this.rule1;\n      this.checkAcceptable();\n    },\n    setRule2: function setRule2() {\n      this.rule2 = !this.rule2;\n      this.checkAcceptable();\n    },\n    checkAcceptable: function checkAcceptable() {\n      if (this.rule1 && this.rule2) this.isAcceptable = true;else this.isAcceptable = false;\n    },\n    changeTab: function changeTab(value) {\n      this.$emit('onNext', value);\n    },\n    setRetard: function setRetard() {\n      this.retard = true;\n    },\n    retardQuestion: function retardQuestion(id) {\n      var _this = this;\n\n      this.v$.$touch();\n\n      if (!this.v$.retardNote.$invalid) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني اعادة هذا السؤال  \",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'نعم قم بالاعادة',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            _this.loader = true;\n            questionServices.rejectRetardThesis(id, _this.retardNote, 'retard').then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تمت الاعادة',\n                text: 'تم اعادة السؤال',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n              _this.loader = false;\n              _this.retard = false; //location.reload()\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    },\n    accept: function accept(id) {\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني قبول هذا السؤال\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بالقبول',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          questionServices.acceptQuestion(id, 'accept').then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم القبول',\n              text: 'تم قبول السؤال',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    },\n    setDegree: function setDegree(e) {\n      this.mark = e.target.value;\n    },\n    addDegree: function addDegree(id) {\n      var _this2 = this;\n\n      this.v$.$touch();\n\n      if (!this.v$.reviweNote.$invalid && !this.v$.degree.$invalid) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني أن هذاالسؤال  تمت مراجعتها\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'تمت المراجعة  ',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            questionServices.addDegree(id, _this2.reviweNote, _this2.mark).then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تمت المراجعة',\n                text: 'تم مراجعة السؤال',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n              location.reload();\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["questionServices","UserInfo","useVuelidate","required","requiredIf","name","created","role","getRole","setup","v$","props","question","type","Object","userBook","index","data","reviweNote","mark","degree","markCondition","retard","retardNote","isAcceptable","rule1","rule2","loader","validations","nestedModel","methods","setRule1","checkAcceptable","setRule2","changeTab","value","$emit","setRetard","retardQuestion","id","$touch","$invalid","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","rejectRetardThesis","console","log","error","accept","acceptQuestion","location","reload","setDegree","e","target","addDegree"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\Questions\\question.vue"],"sourcesContent":["<template>\n    <div class=\"form-card text-start\">\n        <form>\n            <div class=\"row setup-content\" id=\"user-detail\">\n                <div class=\"col-sm-12\" v-if=\"question.status\">\n                    <div class=\"col-md-12 p-0\">\n                        <h3 class=\"mb-0 d-inline-block\"> السؤال {{index + 1}} </h3>\n                        <div class=\"row\">\n                            <div class=\"col-6 form-group\">\n                                <label for=\"uname\" class=\"form-label\">صفحة البداية</label>\n                                <label class=\"form-control-plaintext\">{{ question.starting_page }}</label>\n                            </div>\n                            <div class=\"col-6 form-group\">\n                                <label for=\"emailid\" class=\"form-label\">صفحة النهاية</label>\n                                <label class=\"form-control-plaintext\">{{ question.ending_page }}</label>\n                            </div>\n                            <hr>\n\n                            <div class=\"col-md-12 form-group\">\n                                <div class=\"col-md-12 form-group\">\n                                    <label for=\"emailid\" class=\"form-label\"> السؤال</label>\n                                    <p class=\"form-control-plaintext\">{{ question.question }}</p>\n                                </div>\n                                <div class=\"user-post\">\n                                    <div class=\"col-md-12 form-group\">\n                                        <label for=\"emailid\" class=\"form-label\"> الاقتباسات</label>\n                                        <ul v-if=\"question.quotation.length>0\">\n                                            <li v-for=\"qoute in question.quotation\" :key=\"qoute.id\" class=\"mt-3\">\n                                                <p>\n                                                    {{ qoute.text }}\n                                                </p>\n                                            </li>\n                                        </ul>\n                                        <p v-else> لا يوجد اقتباسات</p>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-12 form-group\">\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mb-3 form-group\"\n                                v-if=\"( question.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                <label for=\"address\" class=\"form-label\">ملاحظات المراجع *</label>\n                                <textarea name=\"address\" class=\"form-control\" id=\"address\" rows=\"5\" required=\"required\"\n                                    v-model=\"reviweNote\"></textarea>\n                                <small style=\"color: red\" v-if=\"v$.reviweNote.$error\">\n                                    {{'ملاحظاتك مطلوبة'}}\n                                </small>\n\n                            </div>\n\n                            <div\n                                v-if=\"( question.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                <div class=\"row form-group\">\n                                    <label for=\"address\" class=\"form-label\"> * التقييم المناسب </label>\n                                    <select class=\"form-select\" data-trigger name=\"degree\" id=\"degree\" v-model=\"degree\" @change=\"setDegree($event)\" >\n                                        <option value=\"\">اختر التقييم المناسب</option>\n                                        <option value=\"96\">امتياز</option>\n                                        <option value=\"91\">ممتاز</option>\n                                        <option value=\"86\">جيد جدًا</option>\n                                        <option value=\"81\">جيد </option>\n                                        <option value=\"71\">مقبول</option>\n                                    </select>\n                                    <small style=\"color: red\" v-if=\"v$.degree.$error\">\n                                        {{'اختر التقييم المناسب'}}\n                                    </small>\n                                    <div class=\"col-md-3 mt-3 form-group\">\n                                        <a href=\"javascript:void(0);\" @click=\"addDegree( question.id)\"\n                                            class=\"btn btn-primary d-block\">إضافة</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <iq-card\n                                v-if=\"(question.status == 'review' && (role == 'reviewer' || role == 'admin'))\">\n                                <template v-slot:headerTitle>\n                                    <h4 class=\"card-title\">عنوان</h4>\n                                </template>\n                                <template v-slot:body>\n                                    <div>\n                                        <div\n                                            class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                            <input type=\"checkbox\" class=\"form-check-input\" id=\"rule1\" ref=\"rule1\"\n                                                :checked=\"rule1\" @change=\"setRule1()\">\n                                                <label class=\"form-check-label\" for=\"rule1\">تم التحقق أن السؤال حصريي لكاتبه.</label>\n                                        </div>\n                                        <div\n                                            class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                            <input type=\"checkbox\" class=\"form-check-input\" id=\"rule2\" ref=\"rule2\"\n                                                :checked=\"rule2\" @change=\"setRule2()\">\n                                                <label class=\"form-check-label\" for=\"rule2\">تم التأكد من وجود الأطروحة في مجموعة سفراء أصبوحة.</label>\n                                        </div>\n\n                                        <!-- ACCEPT -->\n                                        <input type=\"button\" value=\"قبول\" class=\"btn btn-primary d-block w-100 mt-3 \"\n                                            @click=\"accept(question.id)\" v-if=\"(role == 'reviewer' || role == 'admin')\"\n                                            :disabled='!isAcceptable' />\n                                        <!-- END ACCEPT -->\n\n                                        <!-- RETARD -->\n                                        <input type=\"button\" value=\"اعادة\" class=\"btn btn-warning d-block mt-3 w-100\"\n                                            v-if=\"!retard\" @click=\"setRetard()\" :disabled='isAcceptable' />\n                                        <div class=\"col-md-12 mb-3 form-group mt-2\" v-if=\"retard\">\n                                            <label for=\"retardNote\" class=\"form-label\">سبب الاعادة *</label>\n                                            <textarea name=\"retardNote\" class=\"form-control\" id=\"retardNote\" rows=\"5\"\n                                                v-model=retardNote></textarea>\n                                            <small style=\"color: red\" v-if=\"v$.retardNote.$error\">\n                                                {{'سبب الاعادة مطلوب'}}\n                                            </small>\n                                            <div class=\"d-inline-block w-100 text-center\">\n                                                <div class=\"col-sm-12 text-center\" v-if=\"loader\">\n                                                    <img src=\"../../../assets/images/page-img/page-load-loader.gif\"\n                                                        alt=\"loader\" style=\"height: 100px;\">\n                                                </div>\n                                            </div>\n                                            <input type=\"button\" value=\"اعادة\" class=\"btn btn-warning d-block mt-3 w-100\"\n                                                @click=\"retardQuestion(question.id)\" :disabled='isAcceptable' />\n                                        </div>\n                                        <!-- END RETARD -->\n                                    </div>\n                                </template>\n                            </iq-card>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"col-lg-12\" v-if=\"question.status == 'retard'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تم الاعادة </h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: 'بحاجة لتعديل',\n                                    description: question.reviewer.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                            \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"question.status == 'accept'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تم القبول </h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: 'مقبول',\n                                    description: question.reviewer.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                            \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"question.status == 'audite'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تم الاعتماد </h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: 'معتمد - قابل للتقييم',\n                                    description: question.reviewer.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                            \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"question.status == 'audited'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تمت المراجعة</h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: 'تمت المراجعة',\n                                    description: question.auditor.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                                                \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"question.status == 'rejected'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تم التدقيق </h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: ' مرفوض',\n                                    description: question.reviewer.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                                                \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n            </div>\n        </form>\n    </div>\n</template>\n<script>\nimport questionServices from '../../../api/questionServices'\nimport UserInfo from '../../../services/userInfo.service'\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\n\nexport default {\n    name: 'question',\n    created() {\n        this.role = UserInfo.getRole()[0]\n    },\n    setup() {\n        return { v$: useVuelidate() };\n    },\n    props: {\n        question: {\n            type: [Object],\n            required: true,\n        },\n        userBook: {\n            type: [Object],\n            required: true,\n        },\n        index: {\n            required: true\n        },\n    },\n    data() {\n        return {\n            role: '',\n            reviweNote: '',\n            mark: 0,\n            degree: '',\n            markCondition: true,\n            retard: false,\n            retardNote: '',\n            isAcceptable: false,\n            rule1: false,\n            rule2: false,\n            loader:false,\n\n        }\n    },\n    validations() {\n        return {\n            retardNote: {\n                required: requiredIf(function (nestedModel) {\n                    return this.retard == true;\n                }),\n            },\n            reviweNote: {\n                required\n            },            degree: {\n                required\n            },\n\n        };\n    },\n    methods: {\n        setRule1() {\n            this.rule1 = !this.rule1;\n            this.checkAcceptable()\n        },\n        setRule2() {\n            this.rule2 = !this.rule2;\n            this.checkAcceptable()\n        },\n        checkAcceptable() {\n            if (this.rule1 && this.rule2)\n                this.isAcceptable = true\n            else\n                this.isAcceptable = false\n        },\n        changeTab(value) {\n            this.$emit('onNext', value)\n        },\n        setRetard() {\n            this.retard = true;\n        },\n        retardQuestion(id) {\n            this.v$.$touch();\n            if (!this.v$.retardNote.$invalid) {\n                const swalWithBootstrapButtons = this.$swal.mixin({\n                    customClass: {\n                        confirmButton: 'btn btn-primary btn-lg',\n                        cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                    },\n                    buttonsStyling: false\n                })\n                swalWithBootstrapButtons.fire({\n                    title: 'هل أنت متأكد؟',\n                    text: \"موافقتك تعني اعادة هذا السؤال  \",\n                    icon: 'warning',\n                    showCancelButton: true,\n                    confirmButtonText: 'نعم قم بالاعادة',\n                    cancelButtonText: 'تراجع  ',\n                    showClass: {\n                        popup: 'animate__animated animate__zoomIn'\n                    },\n                    hideClass: {\n                        popup: 'animate__animated animate__zoomOut'\n                    }\n                })\n                    .then((willDelete) => {\n                        if (willDelete.isConfirmed) {\n                            this.loader=true\n                            questionServices.rejectRetardThesis(id, this.retardNote, 'retard')\n                                .then(response => {\n                                    swalWithBootstrapButtons.fire({\n                                        title: 'تمت الاعادة',\n                                        text: 'تم اعادة السؤال',\n                                        icon: 'success',\n                                        showClass: {\n                                            popup: 'animate__animated animate__zoomIn'\n                                        },\n                                        hideClass: {\n                                            popup: 'animate__animated animate__zoomOut'\n                                        }\n                                    })\n                                    this.loader=false\n                                    this.retard=false\n                                    //location.reload()\n                                })\n                                .catch(error => {\n                                    console.log(error)\n                                })\n\n                        }\n                    })\n            }\n        },\n        accept(id) {\n            const swalWithBootstrapButtons = this.$swal.mixin({\n                customClass: {\n                    confirmButton: 'btn btn-primary btn-lg',\n                    cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                },\n                buttonsStyling: false\n            })\n            swalWithBootstrapButtons.fire({\n                title: 'هل أنت متأكد؟',\n                text: \"موافقتك تعني قبول هذا السؤال\",\n                icon: 'warning',\n                showCancelButton: true,\n                confirmButtonText: 'نعم قم بالقبول',\n                cancelButtonText: 'تراجع  ',\n                showClass: {\n                    popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                    popup: 'animate__animated animate__zoomOut'\n                }\n            })\n                .then((willDelete) => {\n                    if (willDelete.isConfirmed) {\n                        questionServices.acceptQuestion(id,'accept')\n                            .then(response => {\n                                swalWithBootstrapButtons.fire({\n                                    title: 'تم القبول',\n                                    text: 'تم قبول السؤال',\n                                    icon: 'success',\n                                    showClass: {\n                                        popup: 'animate__animated animate__zoomIn'\n                                    },\n                                    hideClass: {\n                                        popup: 'animate__animated animate__zoomOut'\n                                    }\n                                });\n                                location.reload()\n                            })\n                            .catch(error => {\n                                console.log(error)\n                            })\n                    }\n                })\n        },\n        setDegree(e){\n            this.mark=e.target.value\n\n        },\n        addDegree(id) {\n            this.v$.$touch();\n            if (!this.v$.reviweNote.$invalid && !this.v$.degree.$invalid) {\n                const swalWithBootstrapButtons = this.$swal.mixin({\n                    customClass: {\n                        confirmButton: 'btn btn-primary btn-lg',\n                        cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                    },\n                    buttonsStyling: false\n                })\n                swalWithBootstrapButtons.fire({\n                    title: 'هل أنت متأكد؟',\n                    text: \"موافقتك تعني أن هذاالسؤال  تمت مراجعتها\",\n                    icon: 'warning',\n                    showCancelButton: true,\n                    confirmButtonText: 'تمت المراجعة  ',\n                    cancelButtonText: 'تراجع  ',\n                    showClass: {\n                        popup: 'animate__animated animate__zoomIn'\n                    },\n                    hideClass: {\n                        popup: 'animate__animated animate__zoomOut'\n                    }\n                })\n                    .then((willDelete) => {\n                        if (willDelete.isConfirmed) {\n                            questionServices.addDegree(id, this.reviweNote, this.mark)\n                                .then(response => {\n                                    swalWithBootstrapButtons.fire({\n                                        title: 'تمت المراجعة',\n                                        text: 'تم مراجعة السؤال',\n                                        icon: 'success',\n                                        showClass: {\n                                            popup: 'animate__animated animate__zoomIn'\n                                        },\n                                        hideClass: {\n                                            popup: 'animate__animated animate__zoomOut'\n                                        }\n                                    })\n                                    location.reload()\n                                })\n                                .catch(error => {\n                                    console.log(error)\n                                })\n                        }\n                    })\n            }\n        }\n    }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}