{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Stage2 from \"./ProfileElements/Stage2\";\nimport CreateThesis from \"../../../components/Thesis/CreateThesis.vue\";\nimport ThesisDisplay from \"../../../components/Thesis/ThesisDisplay\";\nimport bookServices from \"../../../api/bookServices\";\nimport thesisServices from \"../../../api/thesisServices\";\nimport certificateServices from \"../../../api/certificateServices\";\nexport default {\n  name: \"Profile\",\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.getBook();\n\n            case 2:\n              _context.next = 4;\n              return _this.getFinalStatistics();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  components: {\n    CreateThesis: CreateThesis,\n    ThesisDisplay: ThesisDisplay,\n    Stage2: Stage2\n  },\n  data: function data() {\n    return {\n      already_have_one: 0,\n      auditable: false,\n      book: null,\n      user_book: null,\n      user_book_info: [{\n        title: \"الأطروحات\",\n        value: 0\n      }, {\n        title: \"الأسئلة\",\n        value: 0\n      }, {\n        title: \"الاقتباسات\",\n        value: 0\n      }],\n      status: \"\",\n      thesises: [],\n      statistics: {\n        \"final\": 0,\n        general_informations: 0,\n        questions: 0,\n        thesises: 0\n      },\n      thesisLength: 0,\n      thesisTitle: \"الأطروحة رقم\",\n      error: \"\"\n    };\n  },\n  methods: {\n    addThesis: function addThesis(thesis) {\n      this.thesises.push(thesis);\n      this.thesisLength++;\n      this.user_book_info[0].value++;\n      this.auditable = true;\n    },\n    getBook: function getBook() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return bookServices.getUserBook(_this2.$route.params.id);\n\n              case 2:\n                response = _context2.sent;\n                _this2.already_have_one = response.already_have_one;\n\n                if (response.book != null) {\n                  _this2.book = response.book;\n\n                  if (response.user_book != null) {\n                    _this2.user_book = response.user_book;\n                    _this2.status = _this2.user_book.status;\n\n                    if (_this2.user_book.thesises != null) {\n                      _this2.thesises = _this2.user_book.thesises;\n                      _this2.auditable = _this2.thesises.some(function (element) {\n                        if (element.status === \"rejected\" || element.status === null) {\n                          return true;\n                        }\n\n                        return false;\n                      });\n                      _this2.user_book_info[0].value = _this2.user_book.thesises.length;\n                      _this2.thesisLength = _this2.user_book.thesises.length;\n                    }\n\n                    _this2.user_book_info[1].value = _this2.user_book.questions.length;\n\n                    if (_this2.user_book.questions.quotation) {\n                      _this2.user_book_info[2].value = _this2.user_book.questions.quotation.length;\n                    }\n                  }\n                } else {\n                  _this2.status = \"404\";\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    reviewThesisStatus: function reviewThesisStatus() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var swalWithBootstrapButtons;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                swalWithBootstrapButtons = _this3.$swal.mixin({\n                  customClass: {\n                    confirmButton: \"btn btn-primary btn-lg\",\n                    cancelButton: \"btn btn-outline-primary btn-lg ms-2\"\n                  },\n                  buttonsStyling: false\n                });\n                swalWithBootstrapButtons.fire({\n                  title: \"هل أنت متأكد؟\",\n                  text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n                  icon: \"warning\",\n                  showCancelButton: true,\n                  confirmButtonText: \"نعم قم بطلب تدقيق\",\n                  cancelButtonText: \"تراجع  \",\n                  showClass: {\n                    popup: \"animate__animated animate__zoomIn\"\n                  },\n                  hideClass: {\n                    popup: \"animate__animated animate__zoomOut\"\n                  }\n                }).then(function (willDelete) {\n                  if (willDelete.isConfirmed) {\n                    thesisServices.reviewThesis(_this3.user_book.id).then(function (response) {\n                      swalWithBootstrapButtons.fire({\n                        title: \"تم الارسال\",\n                        text: \"تم ارسال طلبك للتدقيق\",\n                        icon: \"success\",\n                        showClass: {\n                          popup: \"animate__animated animate__zoomIn\"\n                        },\n                        hideClass: {\n                          popup: \"animate__animated animate__zoomOut\"\n                        }\n                      });\n                    })[\"catch\"](function (error) {\n                      console.log(error);\n                    });\n                    location.reload();\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    getFinalStatistics: function getFinalStatistics() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var statistics;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!_this4.user_book) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                _context4.next = 3;\n                return bookServices.getStatistics(_this4.user_book.id);\n\n              case 3:\n                statistics = _context4.sent;\n                _this4.statistics = statistics;\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    requestCertificate: function requestCertificate() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return certificateServices.requestCertificateApi(_this5.book.id);\n\n              case 2:\n                res = _context5.sent;\n\n                if (!res) {\n                  _this5.already_have_one = 1;\n                } else {\n                  window.location.reload();\n                }\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        path: \"/book\"\n      });\n    },\n    exportCertificate: function exportCertificate() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this6.$router.push({\n                  path: \"/certificate/\".concat(_this6.user_book.id, \"}\")\n                });\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["Stage2","CreateThesis","ThesisDisplay","bookServices","thesisServices","certificateServices","name","created","getBook","getFinalStatistics","components","data","already_have_one","auditable","book","user_book","user_book_info","title","value","status","thesises","statistics","general_informations","questions","thesisLength","thesisTitle","error","methods","addThesis","thesis","push","getUserBook","$route","params","id","response","some","element","length","quotation","reviewThesisStatus","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","reviewThesis","console","log","location","reload","getStatistics","requestCertificate","requestCertificateApi","res","window","back","$router","path","exportCertificate"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\SocailMain\\Profile\\Profile.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-sm-12\">\n      <iq-card>\n        <div class=\"iq-card-body profile-page p-0\">\n          <div class=\"profile-header\">\n            <div class=\"cover-container\">\n              <img\n                src=\"../../../assets/images/book-banner.png\"\n                alt=\"profile-bg\"\n                class=\"rounded img-fluid\"\n              />\n            </div>\n            <div class=\"user-detail text-center mb-3\">\n              <div class=\"profile-img\">\n                <img\n                  src=\"../../../assets/images/reader.png\"\n                  alt=\"profile-img\"\n                  class=\"avatar-130 img-fluid\"\n                />\n              </div>\n              <div class=\"profile-detail mt-1\">\n                <br />\n                <h3 class=\"\" v-if=\"book\">{{ book.book_name }}</h3>\n              </div>\n            </div>\n            <div\n              class=\"profile-info p-4 d-flex align-items-center justify-content-between position-relative\"\n            >\n              <div class=\"social-links\">\n                <!-- RATING -->\n              </div>\n              <!-- USER BOOK INFO -->\n              <div class=\"social-info\" v-if=\"user_book\">\n                <ul\n                  class=\"social-data-block d-flex align-items-center justify-content-between list-inline p-0 m-0\"\n                >\n                  <li\n                    v-for=\"(info, index) in user_book_info\"\n                    :key=\"index\"\n                    class=\"text-center ps-3\"\n                  >\n                    <h6>{{ info.title }}</h6>\n                    <p class=\"mb-0\">{{ info.value }}</p>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </iq-card>\n      <iq-card class=\"iq-card\" v-if=\"status\">\n        <div class=\"iq-card-body p-0\">\n          <div class=\"user-tabing\">\n            <tab-nav\n              :pills=\"true\"\n              id=\"pills-tab\"\n              class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\"\n            >\n              <tab-nav-items\n                class=\"col-sm-3 p-0\"\n                :active=\"true\"\n                id=\"pills-feed-tab\"\n                href=\"#profile-feed\"\n                ariaControls=\"pills-home\"\n                role=\"tab\"\n                :ariaSelected=\"true\"\n                title=\"المرحلة الأولى - الأطروحات\"\n              />\n              <tab-nav-items\n                class=\"col-sm-3 p-0\"\n                :active=\"false\"\n                id=\"pills-activity-tab\"\n                href=\"#profile-activity\"\n                ariaControls=\"pills-profile\"\n                role=\"tab\"\n                :ariaSelected=\"false\"\n                title=\"المرحلة الثانية - الأسئلة العامة\"\n              />\n              <tab-nav-items\n                class=\"col-sm-3 p-0\"\n                :active=\"false\"\n                id=\"pills-friend-tab\"\n                href=\"#profile-friends\"\n                ariaControls=\"pills-contact\"\n                role=\"tab\"\n                :ariaSelected=\"false\"\n                title=\"احصائيات\"\n              />\n              <tab-nav-items\n                class=\"col-sm-3 p-0\"\n                :active=\"false\"\n                id=\"pills-profile-tab\"\n                href=\"#profile-profile\"\n                ariaControls=\"pills-contact\"\n                role=\"tab\"\n                :ariaSelected=\"false\"\n                title=\"اصدار الشهادة\"\n              />\n            </tab-nav>\n          </div>\n        </div>\n      </iq-card>\n    </div>\n    <div class=\"col-sm-12\" v-if=\"status\">\n      <div class=\"tab-content\">\n        <!-- START STAGE ONE -->\n        <tab-content-item\n          :active=\"true\"\n          id=\"profile-feed\"\n          aria-labelled-by=\"pills-feed-tab\"\n          v-if=\"\n            status &&\n            (status == 'stage_one' ||\n              status == 'stage_two' ||\n              status == 'finished')\n          \"\n        >\n          <div class=\"iq-card-body p-0\">\n            <div class=\"row\">\n              <div class=\"col-lg-4\">\n                <iq-card v-if=\"status == 'finished'\">\n                  <template v-slot:body>\n                    <a href=\"#\"\n                      ><span\n                        class=\"badge badge-pill bg-primary font-weight-normal ms-auto me-1 material-symbols-outlined md-14\"\n                        >grade</span\n                      >\n                      المعدل العام</a\n                    >\n                  </template>\n                </iq-card>\n                <iq-card>\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">المرحلة الحالية</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\" v-if=\"status == 'stage_one'\">\n                      المرحلة الأولى\n                    </p>\n                    <p class=\"m-0\" v-else-if=\"status == 'satge_two'\">\n                      المرحلة الثانية\n                    </p>\n                    <p class=\"m-0\" v-else>أتممت توثيق الانجاز</p>\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"book\">\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">مستوى الكتاب</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\">{{ book.type.name }}</p>\n                  </template>\n                </iq-card>\n\n                <iq-card\n                  v-if=\"thesisLength >= 8 && auditable && status == 'stage_one'\"\n                >\n                  <template v-slot:body>\n                    <button\n                      class=\"btn btn-primary d-block w-100\"\n                      @click=\"reviewThesisStatus\"\n                    >\n                      طلب تدقيق\n                    </button>\n                  </template>\n                </iq-card>\n              </div>\n              <div class=\"col-lg-8\">\n                <div id=\"post-modal-data\" class=\"iq-card\">\n                  <CreateThesis\n                    @add-thesis=\"addThesis\"\n                    :book=\"book\"\n                    :noOfthesis=\"thesisLength\"\n                    :user_book=\"user_book\"\n                    v-if=\"\n                      (thesisLength < 12 &&\n                        status === 'stage_one' &&\n                        auditable) ||\n                      thesisLength == 0\n                    \"\n                  />\n                </div>\n                <div v-for=\"(thesis, index) in thesises\" :key=\"index\">\n                  <ThesisDisplay\n                    :thesis=\"thesis\"\n                    :number=\"index\"\n                    :title=\"thesisTitle\"\n                    :book=\"book\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </tab-content-item>\n        <!-- END STAGE ONE -->\n\n        <!-- START STAGE TWO -->\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-activity\"\n          aria-labelled-by=\"pills-activity-tab\"\n          v-if=\"status && (status == 'stage_two' || status == 'finished')\"\n        >\n          <iq-card>\n            <template v-slot:body>\n              <Stage2 :book=\"book\" :status=\"status\" :user_book=\"user_book\" />\n            </template>\n          </iq-card>\n        </tab-content-item>\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-activity\"\n          aria-labelled-by=\"pills-activity-tab\"\n          v-else\n        >\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img\n                    src=\"@/assets/images/stage2.png\"\n                    class=\"img-fluid rounded w-50\"\n                    alt=\"blog-img\"\n                  />\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3\">\n                  التدرج في الصعود، سبيل الوصول إلى القمة. قم بالعودة لإتمام\n                  المرحلة الأولى قبل الشروع بتقديم المرحلة الثانية\n                </h4>\n              </div>\n            </iq-card>\n          </div>\n        </tab-content-item>\n        <!-- END STAGE TWO -->\n\n        <!-- START STATISTICS -->\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-friends\"\n          aria-labelled-by=\"pills-friend-tab\"\n          v-if=\"statistics && status && status == 'finished'\"\n        >\n          <iq-card>\n            <template v-slot:body>\n              <h2>احصائيات</h2>\n              <div class=\"col-12\">\n                <div class=\"card\">\n                  <div class=\"card-body\">\n                    <div class=\"mb-3\">\n                      <div\n                        class=\"d-flex justify-content-between mt-2 text-dark\"\n                      >\n                        <h6>المعدل العام</h6>\n                        <small\n                          >{{ statistics.final ? statistics.final : 0 }}%</small\n                        >\n                      </div>\n                      <b-progress\n                        class=\"shadow-none w-100 mt-2\"\n                        style=\"height: 6px\"\n                      >\n                        <b-progress-bar\n                          :value=\"statistics.final ? statistics.final : 0\"\n                          variant=\"danger\"\n                        >\n                        </b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div\n                        class=\"d-flex justify-content-between mt-2 text-dark\"\n                      >\n                        <h6>الأطروحات</h6>\n                        <small\n                          >{{\n                            statistics.thesises ? statistics.thesises : 0\n                          }}%</small\n                        >\n                      </div>\n                      <b-progress\n                        class=\"shadow-none w-100 mt-2\"\n                        style=\"height: 6px\"\n                      >\n                        <b-progress-bar\n                          :value=\"statistics.thesises ? statistics.thesises : 0\"\n                          variant=\"info\"\n                        >\n                        </b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div\n                        class=\"d-flex justify-content-between mt-2 text-dark\"\n                      >\n                        <h6>التلخيص العام</h6>\n                        <small\n                          >{{\n                            statistics.general_informations\n                              ? statistics.general_informations\n                              : 0\n                          }}%</small\n                        >\n                      </div>\n                      <b-progress\n                        class=\"shadow-none w-100 mt-2\"\n                        style=\"height: 6px\"\n                      >\n                        <b-progress-bar\n                          :value=\"\n                            statistics.general_informations\n                              ? statistics.general_informations\n                              : 0\n                          \"\n                          variant=\"primary\"\n                        ></b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div\n                        class=\"d-flex justify-content-between mt-2 text-dark\"\n                      >\n                        <h6>القراءة التفحصية</h6>\n                        <small\n                          >{{\n                            statistics.questions ? statistics.questions : 0\n                          }}%</small\n                        >\n                      </div>\n                      <b-progress\n                        class=\"shadow-none w-100 mt-2\"\n                        style=\"height: 6px\"\n                      >\n                        <b-progress-bar\n                          :value=\"\n                            statistics.questions ? statistics.questions : 0\n                          \"\n                          variant=\"success\"\n                        >\n                        </b-progress-bar>\n                      </b-progress>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </iq-card>\n          <div></div>\n        </tab-content-item>\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-friends\"\n          aria-labelled-by=\"pills-friend-tab\"\n          v-else\n        >\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img\n                    src=\"@/assets/images/statistics.png\"\n                    class=\"img-fluid rounded w-50\"\n                    alt=\"blog-img\"\n                  />\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3 mx-2\">\n                  وكما تشكل المكعبات قلعة شامخة، تشكل إجابتك في المرحلة الأولى\n                  والثانية علمًا راسخًا يتم تقييمه ويسهل عليك العودة له دائمًا\n                  للتدارس، أكمل تعبئة الأسئلة المطلوبة ضمن الكتاب لتظهر لك صفحة\n                  الاحصائيات الخاصة بطلبك\n                </h4>\n              </div>\n            </iq-card>\n          </div>\n        </tab-content-item>\n        <!-- END STATISTICS -->\n\n        <!-- START EXPOTR CERTIFICATE -->\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-profile\"\n          aria-labelled-by=\"pills-profile-tab\"\n          v-if=\"status && status == 'finished'\"\n        >\n          <iq-card>\n            <template v-slot:body>\n              <div class=\"tab-content\">\n                <tab-content-item\n                  :active=\"true\"\n                  id=\"photo-you\"\n                  aria-labelled-by=\"pills-photo-you-tab\"\n                >\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div\n                        class=\"card card-block card-stretch card-height blog-list\"\n                      >\n                        <div class=\"card-body\">\n                          <div class=\"row align-items-center\">\n                            <div class=\"col-md-6\">\n                              <div class=\"image-block\">\n                                <img\n                                  src=\"@/assets/images/export-congrats.png\"\n                                  class=\"img-fluid rounded w-100\"\n                                  alt=\"blog-img\"\n                                />\n                              </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                              <div class=\"blog-description p-2\">\n                                <div\n                                  class=\"blog-meta d-flex align-items-center justify-content-between mb-2\"\n                                >\n                                  <div class=\"title\">\n                                    <h2>تهانينا</h2>\n                                  </div>\n                                </div>\n                                <p>\n                                  في أمة جاءها الأمر السماوي بضرورة القراءة، لا\n                                  تسجل القراءة مكانًا لها في سلم الأولويات عند\n                                  شخوص الأمة. وللأسف فإن أولئك الذين يقرأون في\n                                  هذه الأمة لا يمارسون القراءة كأسلوب تعليمي كما\n                                  يجب. لذلك نوجه لك التهنئة لأن وصولك لهذه\n                                  المرحلة تعني أنك استخدم وسائل القراءة المتقدمة\n                                  بالشكل الصحيح خلال قراءتك لهذا الكتاب وهذه\n                                  خطوة مميزة لا يقوم بها سوى (10٪) فقط من\n                                  القراء، مبارك لك ما تعلمت، مبارك ما قدمت ودرست\n                                  وبذلت، تستحق هذه الشهادة ،نفع الله بك وعلمك\n                                </p>\n                              </div>\n                              <a\n                                href=\"javascript:void(0);\"\n                                class=\"btn btn-primary d-block mt-3\"\n                                style=\"color: white\"\n                                @click=\"exportCertificate()\"\n                              >\n                                اصدار الشهادة\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </tab-content-item>\n                <tab-content-item\n                  :active=\"false\"\n                  id=\"your-photo\"\n                  aria-labelled-by=\"pills-your-photo-tab\"\n                >\n                </tab-content-item>\n              </div>\n            </template>\n          </iq-card>\n          <div></div>\n        </tab-content-item>\n        <tab-content-item\n          :active=\"false\"\n          id=\"profile-profile\"\n          aria-labelled-by=\"pills-profile-tab\"\n          v-else\n        >\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img\n                    src=\"@/assets/images/finished.png\"\n                    class=\"img-fluid rounded w-50\"\n                    alt=\"blog-img\"\n                  />\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3\">\n                  انتظر تقييم المختصيين لقراءتك وليكن هذا حافزًا لك لتقرأ بشكل\n                  أفضل\n                </h4>\n              </div>\n            </iq-card>\n          </div>\n        </tab-content-item>\n        <!-- END EXPOTR CERTIFICATE -->\n      </div>\n    </div>\n    <div\n      class=\"col-sm-12 d-flex justify-content-center\"\n      v-else-if=\"already_have_one >= 1\"\n    >\n      <div class=\"col-sm-12\">\n        <iq-card class=\"iq-card\">\n          <div class=\"iq-card-body p-3\">\n            <div class=\"image-block text-center\">\n              <img\n                src=\"@/assets/images/start_new.png\"\n                class=\"img-fluid rounded w-25 mt-3\"\n                alt=\"blog-img\"\n              />\n            </div>\n\n            <h2 class=\"text-center mt-3 mb-3\">ملاحظة</h2>\n            <h4 class=\"text-center mt-3 mb-3\">\n              يقتضي حصولك على شهادة توثيق قراءتك جهد كبير من المختصين في التحقق\n              من قراءتك وتقييم النتاج المعرفي الذي قدمت في قراءتك، بالتالي نعتذر\n              عن إمكانية تقييم أكثر من كتاب لك دفعة واحدة. انتظر حصولك على\n              الشهادة لكتابك المقدم آنفًا قبل الشروع بتقديم طلب جديد للحصول على\n              توثيق القراءة الخاص بك\n            </h4>\n\n            <button\n              @click=\"back()\"\n              type=\"submit\"\n              class=\"btn btn-primary d-block w-75 mx-auto mb-3\"\n            >\n              عودة\n            </button>\n          </div>\n          <p style=\"color: red; margin-right: 5px\">{{ error }}</p>\n        </iq-card>\n      </div>\n    </div>\n    <div class=\"col-sm-12 d-flex justify-content-center\" v-else>\n      <div class=\"col-sm-12\">\n        <iq-card class=\"iq-card\">\n          <div class=\"iq-card-body p-0\">\n            <div class=\"image-block text-center\">\n              <img\n                src=\"@/assets/images/start_new.png\"\n                class=\"img-fluid rounded w-25 mt-3\"\n                alt=\"blog-img\"\n              />\n            </div>\n\n            <h2 class=\"text-center mt-3 mb-3\">ملاحظة</h2>\n            <h4 class=\"text-center mt-3 mb-3\">\n              سعداء بأنك تستعد لصعود أولى درجات سلم المجد، من خلال طلبك لفتح طلب\n              تقييم ل قراءتك لهذا الكتاب. لكن انتبه، في حال فتحك لطلب تقييم\n              قراءتك ضمن هذا الكتاب فلن تكون قادرًا على طلب تقييم كتب إضافية إلا\n              بعد انتهاء فريق التقييم من مراجعة طلبك الحالي\n            </h4>\n\n            <button\n              @click=\"requestCertificate\"\n              type=\"submit\"\n              class=\"btn btn-primary d-block w-75 mx-auto mb-3\"\n            >\n              طلب شهادة\n            </button>\n\n            <button\n              @click=\"$router.go(-1)\"\n              type=\"submit\"\n              class=\"btn btn-success d-block w-75 mx-auto mb-3\"\n            >\n              عودة\n            </button>\n\n            \n          </div>\n          <p style=\"color: red; margin-right: 5px\">{{ error }}</p>\n        </iq-card>\n      </div>\n    </div>\n  </div>\n</template >\n<script>\nimport Stage2 from \"./ProfileElements/Stage2\";\nimport CreateThesis from \"../../../components/Thesis/CreateThesis.vue\";\nimport ThesisDisplay from \"../../../components/Thesis/ThesisDisplay\";\nimport bookServices from \"../../../api/bookServices\";\nimport thesisServices from \"../../../api/thesisServices\";\nimport certificateServices from \"../../../api/certificateServices\";\n\nexport default {\n  name: \"Profile\",\n  async created() {\n    await this.getBook();\n    await this.getFinalStatistics();\n  },\n  components: {\n    CreateThesis,\n    ThesisDisplay,\n    Stage2,\n  },\n  data() {\n    return {\n      already_have_one: 0,\n      auditable: false,\n      book: null,\n      user_book: null,\n      user_book_info: [\n        {\n          title: \"الأطروحات\",\n          value: 0,\n        },\n        {\n          title: \"الأسئلة\",\n          value: 0,\n        },\n        {\n          title: \"الاقتباسات\",\n          value: 0,\n        },\n      ],\n      status: \"\",\n      thesises: [],\n      statistics: {\n        final: 0,\n        general_informations: 0,\n        questions: 0,\n        thesises: 0,\n      },\n      thesisLength: 0,\n      thesisTitle: \"الأطروحة رقم\",\n      error: \"\",\n    };\n  },\n  methods: {\n    addThesis(thesis) {\n      this.thesises.push(thesis);\n      this.thesisLength++;\n      this.user_book_info[0].value++;\n      this.auditable=true;\n      },\n\n    async getBook() {\n      const response = await bookServices.getUserBook(this.$route.params.id);\n      this.already_have_one = response.already_have_one;\n      if (response.book != null) {\n        this.book = response.book;\n        if (response.user_book != null) {\n          this.user_book = response.user_book;\n          this.status = this.user_book.status;\n          if (this.user_book.thesises != null) {\n            this.thesises = this.user_book.thesises;\n            this.auditable = this.thesises.some((element) => {\n              if (element.status === \"rejected\" || element.status === null) {\n                return true;\n              }\n              return false;\n            });\n\n            this.user_book_info[0].value = this.user_book.thesises.length;\n            this.thesisLength = this.user_book.thesises.length;\n          }\n          this.user_book_info[1].value = this.user_book.questions.length;\n          if (this.user_book.questions.quotation) {\n            this.user_book_info[2].value =\n              this.user_book.questions.quotation.length;\n          }\n        }\n      } else {\n        this.status = \"404\";\n      }\n    },\n\n    async reviewThesisStatus() {\n      const swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: \"btn btn-primary btn-lg\",\n          cancelButton: \"btn btn-outline-primary btn-lg ms-2\",\n        },\n        buttonsStyling: false,\n      });\n      swalWithBootstrapButtons\n        .fire({\n          title: \"هل أنت متأكد؟\",\n          text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonText: \"نعم قم بطلب تدقيق\",\n          cancelButtonText: \"تراجع  \",\n          showClass: {\n            popup: \"animate__animated animate__zoomIn\",\n          },\n          hideClass: {\n            popup: \"animate__animated animate__zoomOut\",\n          },\n        })\n        .then((willDelete) => {\n          if (willDelete.isConfirmed) {\n            thesisServices\n              .reviewThesis(this.user_book.id)\n              .then((response) => {\n                swalWithBootstrapButtons.fire({\n                  title: \"تم الارسال\",\n                  text: \"تم ارسال طلبك للتدقيق\",\n                  icon: \"success\",\n                  showClass: {\n                    popup: \"animate__animated animate__zoomIn\",\n                  },\n                  hideClass: {\n                    popup: \"animate__animated animate__zoomOut\",\n                  },\n                });\n              })\n              .catch((error) => {\n                console.log(error);\n              });\n              location.reload()\n          }\n        });\n    },\n    async getFinalStatistics() {\n      if (this.user_book) {\n        const statistics = await bookServices.getStatistics(this.user_book.id);\n        this.statistics = statistics;\n      }\n    },\n\n    async requestCertificate() {\n      const res = await certificateServices.requestCertificateApi(this.book.id);\n      if (!res) {\n        this.already_have_one = 1;\n      } else {\n        window.location.reload();\n      }\n    },\n    back() {\n      this.$router.push({ path: `/book` });\n    },\n    async exportCertificate() {\n      this.$router.push({path:`/certificate/${this.user_book.id}}`})\n    },\n  },\n};\n</script>\n"]},"metadata":{},"sourceType":"module"}