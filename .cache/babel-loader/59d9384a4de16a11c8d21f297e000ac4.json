{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport generalInformationsServices from '../../../api/generalInformationsServices';\nimport UserInfo from '../../../services/userInfo.service';\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\nexport default {\n  name: 'GeneralInformations',\n  components: {},\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.generalInformations();\n\n            case 2:\n              _this.role = UserInfo.getRole()[0];\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data: function data() {\n    return {\n      current: 1,\n      informations: [],\n      role: '',\n      reject: false,\n      rejectNote: '',\n      reviweNote: '',\n      retard: false,\n      retardNote: '',\n      mark: 0,\n      degree: '',\n      bookName: '',\n      userName: '',\n      markCondition: true,\n      isAcceptable: false,\n      rule1: false,\n      rule2: false,\n      loader: false\n    };\n  },\n  validations: function validations() {\n    return {\n      rejectNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.reject == true;\n        })\n      },\n      retardNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.retard == true;\n        })\n      },\n      reviweNote: {\n        required: required\n      },\n      degree: {\n        required: required\n      }\n    };\n  },\n  methods: {\n    setRule1: function setRule1() {\n      this.rule1 = !this.rule1;\n      this.checkAcceptable();\n    },\n    setRule2: function setRule2() {\n      this.rule2 = !this.rule2;\n      this.checkAcceptable();\n    },\n    checkAcceptable: function checkAcceptable() {\n      if (this.rule1 && this.rule2) this.isAcceptable = true;else this.isAcceptable = false;\n    },\n    generalInformations: function generalInformations() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var general_nformations;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return generalInformationsServices.getByUserBook(_this2.$route.params.user_book_id);\n\n              case 2:\n                general_nformations = _context2.sent;\n                _this2.informations = general_nformations;\n                _this2.bookName = _this2.informations.user_book.book.book_name;\n                _this2.userName = _this2.informations.user_book.user.name;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    checkMark: function checkMark() {\n      this.markCondition = parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100;\n    },\n    setDegree: function setDegree(e) {\n      this.mark = e.target.value;\n    },\n    addDegree: function addDegree(id) {\n      var _this3 = this;\n\n      this.v$.$touch();\n\n      if (!this.v$.reviweNote.$invalid && !this.v$.degree.$invalid) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني أن هذا التلخيص  تم مراجعته\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'تمت المراجعة  ',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            generalInformationsServices.addDegree(id, _this3.reviweNote, _this3.mark).then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تم الاضافة',\n                text: 'تم مراجعة التلخيص',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n              location.reload();\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    },\n    changeTab: function changeTab(tab) {\n      this.current = tab;\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    },\n    checkActive: function checkActive(item, active) {\n      var className = '';\n\n      if (this.current > item) {\n        className = 'active';\n      }\n\n      if (this.current > active) {\n        className = className + ' done';\n      }\n\n      return className;\n    },\n    setReject: function setReject() {\n      this.reject = true;\n      this.retard = false;\n    },\n    rejectInfo: function rejectInfo(id) {\n      var _this4 = this;\n\n      this.v$.$touch();\n\n      if (!this.v$.rejectNote.$invalid) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني رفض هذا التلخيص \",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'نعم قم بالرفض',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            _this4.loader = true;\n            generalInformationsServices.rejectRetardGeneralInformations(id, _this4.rejectNote, 'rejected').then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تم الرفض',\n                text: 'تم رفض التلخيص',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n\n              _this4.$router.push({\n                name: \"general.list\"\n              });\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    },\n    retardInfo: function retardInfo(id) {\n      var _this5 = this;\n\n      this.v$.$touch();\n\n      if (!this.v$.retardNote.$invalid) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني اعادة هذا التلخيص \",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'نعم قم بالاعادة',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            _this5.loader = true;\n            generalInformationsServices.rejectRetardGeneralInformations(id, _this5.retardNote, 'retard').then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تمت الاعادة',\n                text: 'تم اعادة التلخيص',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n\n              _this5.$router.push({\n                name: \"general.list\"\n              });\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    },\n    accept: function accept(id) {\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني قبول هذا السؤال\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بالقبول',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          generalInformationsServices.acceptGeneralInformations(id).then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم القبول',\n              text: 'تم قبول السؤال',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    },\n    setRetard: function setRetard() {\n      this.retard = true;\n      this.reject = false;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["generalInformationsServices","UserInfo","useVuelidate","required","requiredIf","name","components","created","generalInformations","role","getRole","setup","v$","data","current","informations","reject","rejectNote","reviweNote","retard","retardNote","mark","degree","bookName","userName","markCondition","isAcceptable","rule1","rule2","loader","validations","nestedModel","methods","setRule1","checkAcceptable","setRule2","getByUserBook","$route","params","user_book_id","general_nformations","user_book","book","book_name","user","checkMark","parseInt","setDegree","e","target","value","addDegree","id","$touch","$invalid","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","location","reload","console","log","error","changeTab","tab","window","scrollTo","top","behavior","checkActive","item","active","className","setReject","rejectInfo","rejectRetardGeneralInformations","$router","push","retardInfo","accept","acceptGeneralInformations","setRetard"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\General\\general_informations.vue"],"sourcesContent":["<template>\n   <div class=\"row\">\n      <div class=\"col-sm-12\">\n         <div class=\"card position-relative inner-page-bg bg-primary\" style=\"height: 150px;\">\n            <div class=\"inner-page-title\">\n               <h3 class=\"text-white\">عرض الأسئلة العامة للمراجعة</h3>\n            </div>\n         </div>\n      </div>\n      <div class=\"col-sm-12\" v-if=\"informations.status\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">الأسئلة العامة</h4>\n               <span class=\"px-2\" v-if=\"informations.status == 'review'\"> اسم السفير : {{ userName }}</span>\n               <span class=\"px-2\" v-else> اسم السفير : ***************</span>\n               <span class=\"px-2\"> || </span>\n               <span class=\"px-2\"> اسم الكتاب : {{ bookName }}</span>\n            </template>\n            <template v-slot:body>\n               <div class=\"form-card text-start\">\n                  <form>\n                     <div class=\"row setup-content\" id=\"user-detail\">\n                        <div class=\"col-sm-12\">\n                           <div class=\"col-md-12 p-0\">\n                              <h3 class=\"mb-4\">الانجاز</h3>\n                              <div class=\"row\">\n\n                                 <div class=\"col-md-12 form-group\">\n                                    <div class=\"col-md-12 form-group\">\n                                       <h4 class=\"form-label\"> التلخيص العام</h4>\n                                       <p class=\"form-control-plaintext\">{{ informations.summary }}</p>\n                                    </div>\n\n                                 </div>\n                                 <div class=\"col-md-12 form-group\">\n                                    <div class=\"col-md-12 form-group\">\n                                       <h4 class=\"form-label\"> السؤال العام العام</h4>\n                                       <p class=\"form-control-plaintext\">{{ informations.general_question }}</p>\n                                    </div>\n\n                                 </div>\n                                 <hr>\n                                 <div class=\"col-md-12 mb-3 form-group\"\n                                    v-if=\"(informations.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                    <label for=\"address\" class=\"form-label\">ملاحظات المراجع *</label>\n                                    <textarea name=\"address\" class=\"form-control\" id=\"address\" rows=\"5\"\n                                       required=\"required\" v-model=\"reviweNote\"></textarea>\n                                    <small style=\"color: red\" v-if=\"v$.reviweNote.$error\">\n                                       {{ 'ملاحظاتك مطلوبة' }}\n                                    </small>\n\n                                 </div>\n\n                                 <div v-if=\"(informations.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                    <div class=\"row form-group\">\n                                       <label for=\"address\" class=\"form-label\"> * التقييم المناسب </label>\n                                       <select class=\"form-select\" data-trigger name=\"degree\" id=\"degree\"\n                                          v-model=\"degree\" @change=\"setDegree($event)\">\n                                          <option value=\"\">اختر التقييم المناسب</option>\n                                          <option value=\"96\">امتياز</option>\n                                          <option value=\"91\">ممتاز</option>\n                                          <option value=\"86\">جيد جدًا</option>\n                                          <option value=\"81\">جيد </option>\n                                          <option value=\"71\">مقبول</option>\n                                       </select>\n                                       <small style=\"color: red\" v-if=\"v$.degree.$error\">\n                                          {{ 'اختر التقييم المناسب' }}\n                                       </small>\n                                       <div class=\"col-md-3 mt-3 form-group\">\n                                          <a href=\"javascript:void(0);\" @click=\"addDegree(informations.id)\"\n                                             class=\"btn btn-primary d-block\">إضافة</a>\n                                       </div>\n                                    </div>\n                                 </div>\n                                 <iq-card\n                                    v-if=\"(informations.status == 'review' && (role == 'reviewer' || role == 'admin'))\">\n                                    <template v-slot:headerTitle>\n                                       <h4 class=\"card-title\">عنوان</h4>\n                                    </template>\n                                    <template v-slot:body>\n                                       <div>\n                                          <div\n                                             class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                             <input type=\"checkbox\" class=\"form-check-input\" id=\"rule1\" ref=\"rule1\"\n                                                :checked=\"rule1\" @change=\"setRule1()\">\n                                             <label class=\"form-check-label\" for=\"rule1\">تم التحقق أن الأطروحة حصرية\n                                                لكاتبها.</label>\n                                          </div>\n\n                                          <div\n                                             class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                             <input type=\"checkbox\" class=\"form-check-input\" id=\"rule2\" ref=\"rule2\"\n                                                :checked=\"rule2\" @change=\"setRule2()\">\n                                             <label class=\"form-check-label\" for=\"rule2\">تم التأكد من وجود الأطروحة في\n                                                مجموعة سفراء أصبوحة.</label>\n                                          </div>\n\n                                       </div>\n                                    </template>\n                                 </iq-card>\n                                 <iq-card v-if=\"informations.status == 'review' || informations.status == 'audit'\">\n                                    <template v-slot:headerTitle>\n                                       <h4 class=\"card-title\">قبول - اعادة - رفض</h4>\n                                    </template>\n                                    <template v-slot:body>\n                                       <div class=\"row\">\n                                          <div class=\"col-lg-6 col-md-12 col-sm-12 form-group align-middle\">\n                                             <h3 class=\"text-center\"> !! الزر الحاسم\n                                             </h3>\n                                             <br />\n                                             <h5 class=\"text-center\">\n                                                نعم تمامًا فأمكانية الضغط على هذا الزر ستتاح لك حينما نقوم بإنهاء مهمتك\n                                                المكلف بها في طلب السفير\n                                                لتوثيق قراءته. اعتمادك الطلب وإرساله للمرحلة القادمة أو رفضه مسؤولية\n                                                حقيقية لأنها تؤثر على حماية\n                                                التعلم وجودة التعليم. كن حريصًا على إتمام مهمتك بكل دقة قبل الضغط على\n                                                هذا الزر أدناه. يتاح\n                                                القبول بعد اكتمال الشروط، ويكون الرفض في حال وجود مشكلة حقيقية في الطلب\n                                                كأن يكون مخالف لشروط\n                                                الحصرية أو مشاكل أخرى مخالفة للقانون\n                                             </h5>\n                                             <!-- ACCEPT -->\n                                             <input type=\"button\" value=\"انجاز صالح للتقيم\"\n                                                class=\"btn btn-primary d-block w-100 mt-3 \"\n                                                @click=\"accept(informations.id)\"\n                                                v-if=\"(role == 'reviewer' || role == 'admin')\"\n                                                :disabled='!isAcceptable' />\n                                             <!-- END ACCEPT -->\n\n                                             <!-- RETARD -->\n                                             <input type=\"button\" value=\"اعادة\"\n                                                class=\"btn btn-warning d-block mt-3 w-100\" v-if=\"!retard\"\n                                                @click=\"setRetard()\" :disabled='isAcceptable' />\n                                             <div class=\"col-md-12 mb-3 form-group mt-2\" v-if=\"retard\">\n                                                <label for=\"retardNote\" class=\"form-label\">سبب الاعادة *</label>\n                                                <textarea name=\"retardNote\" class=\"form-control\" id=\"retardNote\"\n                                                   rows=\"5\" required=\"required\" v-model=retardNote></textarea>\n                                                <small style=\"color: red\" v-if=\"v$.retardNote.$error\">\n                                                   {{ 'سبب الاعادة مطلوب' }}\n                                                </small>\n                                                <div class=\"d-inline-block w-100 text-center\">\n                                                   <div class=\"col-sm-12 text-center\" v-if=\"loader\">\n                                                      <img src=\"../../../assets/images/page-img/page-load-loader.gif\"\n                                                         alt=\"loader\" style=\"height: 100px;\">\n                                                   </div>\n                                                </div>\n\n                                                <input type=\"button\" value=\"اعادة\"\n                                                   class=\"btn btn-warning d-block mt-3 w-100\"\n                                                   @click=\"retardInfo(informations.id)\" :disabled='isAcceptable' />\n                                             </div>\n                                             <!-- END RETARD -->\n                                             <!-- REJECT -->\n                                             <input type=\"button\" value=\"انجاز مرفوض\"\n                                                class=\"btn btn-danger d-block mt-3 w-100\" @click=\"setReject()\"\n                                                v-if=\"!reject\" :disabled='isAcceptable' />\n                                             <div class=\"col-md-12 mb-3 form-group mt-2\" v-if=\"reject\">\n                                                <label for=\"rejectNote\" class=\"form-label\">سبب الرفض *</label>\n                                                <textarea name=\"rejectNote\" class=\"form-control\" id=\"rejectNote\"\n                                                   rows=\"5\" required=\"required\" v-model=rejectNote></textarea>\n                                                <small style=\"color: red\" v-if=\"v$.rejectNote.$error\">\n                                                   {{ 'سبب الرفض مطلوب' }}\n                                                </small>\n                                                <div class=\"d-inline-block w-100 text-center\">\n                                                   <div class=\"col-sm-12 text-center\" v-if=\"loader\">\n                                                      <img src=\"../../../assets/images/page-img/page-load-loader.gif\"\n                                                         alt=\"loader\" style=\"height: 100px;\">\n                                                   </div>\n                                                </div>\n\n                                                <input type=\"button\" value=\"انجاز مرفوض\"\n                                                   class=\"btn btn-danger d-block mt-3 w-100\"\n                                                   @click=\"rejectInfo(informations.id)\" :disabled='isAcceptable' />\n                                             </div>\n                                             <!-- END REJECT -->\n\n                                          </div>\n                                          <div class=\"col-lg-6 col-md-12 col-sm-12 form-group\">\n                                             <div class=\"image-block text-center\">\n                                                <img src=\"@/assets/images/accept-reject.png\"\n                                                   class=\"img-fluid rounded w-75\" alt=\"blog-img\" />\n                                             </div>\n                                          </div>\n                                       </div>\n\n                                    </template>\n                                 </iq-card>\n                              </div>\n                           </div>\n                        </div>\n                     </div>\n                  </form>\n               </div>\n            </template>\n         </iq-card>\n      </div>\n      <div class=\"col-lg-12\" v-if=\"informations.status == 'audited'\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">تمت المراجعة</h4>\n            </template>\n            <template v-slot:body>\n               <TimeLine :items=\"[\n                  {\n                     color: 'primary',\n                     title: 'تمت المراجعة',\n                     description: informations.auditor.name,\n                     child: {\n                        type: 'img',\n                        items: [\n                        ]\n                     }\n                  },\n               \n               ]\" />\n            </template>\n         </iq-card>\n      </div>\n      <div class=\"col-lg-12\" v-if=\"informations.status == 'rejected'\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">تم التدقيق </h4>\n            </template>\n            <template v-slot:body>\n               <TimeLine :items=\"[\n                  {\n                     color: 'primary',\n                     title: ' مرفوض',\n                     description: informations.reviewer.name,\n                     child: {\n                        type: 'img',\n                        items: [\n                        ]\n                     }\n                  },\n               \n               ]\" />\n            </template>\n         </iq-card>\n      </div>\n   </div>\n</template>\n<script>\nimport generalInformationsServices from '../../../api/generalInformationsServices'\nimport UserInfo from '../../../services/userInfo.service'\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\n\nexport default {\n   name: 'GeneralInformations',\n   components: {\n   },\n   async created() {\n      await this.generalInformations()\n      this.role = UserInfo.getRole()[0]\n\n   },\n   setup() {\n      return { v$: useVuelidate() };\n   },\n   data() {\n      return {\n         current: 1,\n         informations: [],\n         role: '',\n         reject: false,\n         rejectNote: '',\n         reviweNote: '',\n         retard: false,\n         retardNote: '',\n         mark: 0,\n         degree: '',\n         bookName: '',\n         userName: '',\n         markCondition: true,\n         isAcceptable: false,\n         rule1: false,\n         rule2: false,\n         loader: false,\n      }\n   },\n   validations() {\n      return {\n         rejectNote: {\n            required: requiredIf(function (nestedModel) {\n               return this.reject == true;\n            }),\n         },\n         retardNote: {\n            required: requiredIf(function (nestedModel) {\n               return this.retard == true;\n            }),\n         },\n         reviweNote: {\n            required\n         },\n\n         degree: {\n            required\n         },\n      };\n   },\n   methods: {\n      setRule1() {\n         this.rule1 = !this.rule1;\n         this.checkAcceptable()\n      },\n      setRule2() {\n         this.rule2 = !this.rule2;\n         this.checkAcceptable()\n      },\n      checkAcceptable() {\n         if (this.rule1 && this.rule2)\n            this.isAcceptable = true\n         else\n            this.isAcceptable = false\n      },\n\n      async generalInformations() {\n         const general_nformations = await generalInformationsServices.getByUserBook(this.$route.params.user_book_id);\n         this.informations = general_nformations;\n         this.bookName = this.informations.user_book.book.book_name\n         this.userName = this.informations.user_book.user.name\n      },\n      checkMark() {\n         this.markCondition = (parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100)\n      },\n      setDegree(e) {\n         this.mark = e.target.value\n\n      },\n      addDegree(id) {\n         this.v$.$touch();\n         if (!this.v$.reviweNote.$invalid && !this.v$.degree.$invalid) {\n\n            const swalWithBootstrapButtons = this.$swal.mixin({\n               customClass: {\n                  confirmButton: 'btn btn-primary btn-lg',\n                  cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n               },\n               buttonsStyling: false\n            })\n            swalWithBootstrapButtons.fire({\n               title: 'هل أنت متأكد؟',\n               text: \"موافقتك تعني أن هذا التلخيص  تم مراجعته\",\n               icon: 'warning',\n               showCancelButton: true,\n               confirmButtonText: 'تمت المراجعة  ',\n               cancelButtonText: 'تراجع  ',\n               showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n               },\n               hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n               }\n            })\n               .then((willDelete) => {\n                  if (willDelete.isConfirmed) {\n                     generalInformationsServices.addDegree(id, this.reviweNote, this.mark)\n                        .then(response => {\n                           swalWithBootstrapButtons.fire({\n                              title: 'تم الاضافة',\n                              text: 'تم مراجعة التلخيص',\n                              icon: 'success',\n                              showClass: {\n                                 popup: 'animate__animated animate__zoomIn'\n                              },\n                              hideClass: {\n                                 popup: 'animate__animated animate__zoomOut'\n                              }\n                           })\n                           location.reload()\n                        })\n                        .catch(error => {\n                           console.log(error)\n                        })\n                  }\n               })\n\n         }\n      },\n      changeTab(tab) {\n         this.current = tab\n         window.scrollTo({ top: 0, behavior: 'smooth' })\n      },\n      checkActive(item, active) {\n         let className = ''\n         if (this.current > item) {\n            className = 'active'\n         }\n         if (this.current > active) {\n            className = className + ' done'\n         }\n         return className\n      },\n\n      setReject() {\n         this.reject = true;\n         this.retard = false;\n\n      },\n      rejectInfo(id) {\n         this.v$.$touch();\n         if (!this.v$.rejectNote.$invalid) {\n\n            const swalWithBootstrapButtons = this.$swal.mixin({\n               customClass: {\n                  confirmButton: 'btn btn-primary btn-lg',\n                  cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n               },\n               buttonsStyling: false\n            })\n            swalWithBootstrapButtons.fire({\n               title: 'هل أنت متأكد؟',\n               text: \"موافقتك تعني رفض هذا التلخيص \",\n               icon: 'warning',\n               showCancelButton: true,\n               confirmButtonText: 'نعم قم بالرفض',\n               cancelButtonText: 'تراجع  ',\n               showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n               },\n               hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n               }\n            })\n               .then((willDelete) => {\n                  if (willDelete.isConfirmed) {\n                     this.loader = true\n                     generalInformationsServices.rejectRetardGeneralInformations(id, this.rejectNote, 'rejected')\n                        .then(response => {\n                           swalWithBootstrapButtons.fire({\n                              title: 'تم الرفض',\n                              text: 'تم رفض التلخيص',\n                              icon: 'success',\n                              showClass: {\n                                 popup: 'animate__animated animate__zoomIn'\n                              },\n                              hideClass: {\n                                 popup: 'animate__animated animate__zoomOut'\n                              }\n                           })\n                           this.$router.push({ name: `general.list` })\n                        })\n                        .catch(error => {\n                           console.log(error)\n                        })\n\n                  }\n               })\n         }\n      },\n\n      retardInfo(id) {\n         this.v$.$touch();\n         if (!this.v$.retardNote.$invalid) {\n\n            const swalWithBootstrapButtons = this.$swal.mixin({\n               customClass: {\n                  confirmButton: 'btn btn-primary btn-lg',\n                  cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n               },\n               buttonsStyling: false\n            })\n            swalWithBootstrapButtons.fire({\n               title: 'هل أنت متأكد؟',\n               text: \"موافقتك تعني اعادة هذا التلخيص \",\n               icon: 'warning',\n               showCancelButton: true,\n               confirmButtonText: 'نعم قم بالاعادة',\n               cancelButtonText: 'تراجع  ',\n               showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n               },\n               hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n               }\n            })\n               .then((willDelete) => {\n                  if (willDelete.isConfirmed) {\n                     this.loader = true\n                     generalInformationsServices.rejectRetardGeneralInformations(id, this.retardNote, 'retard')\n                        .then(response => {\n                           swalWithBootstrapButtons.fire({\n                              title: 'تمت الاعادة',\n                              text: 'تم اعادة التلخيص',\n                              icon: 'success',\n                              showClass: {\n                                 popup: 'animate__animated animate__zoomIn'\n                              },\n                              hideClass: {\n                                 popup: 'animate__animated animate__zoomOut'\n                              }\n                           })\n                           this.$router.push({ name: `general.list` })\n                        })\n                        .catch(error => {\n                           console.log(error)\n                        })\n\n                  }\n               })\n         }\n      },\n      accept(id) {\n         const swalWithBootstrapButtons = this.$swal.mixin({\n            customClass: {\n               confirmButton: 'btn btn-primary btn-lg',\n               cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n            },\n            buttonsStyling: false\n         })\n         swalWithBootstrapButtons.fire({\n            title: 'هل أنت متأكد؟',\n            text: \"موافقتك تعني قبول هذا السؤال\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonText: 'نعم قم بالقبول',\n            cancelButtonText: 'تراجع  ',\n            showClass: {\n               popup: 'animate__animated animate__zoomIn'\n            },\n            hideClass: {\n               popup: 'animate__animated animate__zoomOut'\n            }\n         })\n            .then((willDelete) => {\n               if (willDelete.isConfirmed) {\n                  generalInformationsServices.acceptGeneralInformations(id)\n                     .then(response => {\n                        swalWithBootstrapButtons.fire({\n                           title: 'تم القبول',\n                           text: 'تم قبول السؤال',\n                           icon: 'success',\n                           showClass: {\n                              popup: 'animate__animated animate__zoomIn'\n                           },\n                           hideClass: {\n                              popup: 'animate__animated animate__zoomOut'\n                           }\n                        });\n                        location.reload()\n                     })\n                     .catch(error => {\n                        console.log(error)\n                     })\n               }\n            })\n      },\n      setRetard() {\n         this.retard = true;\n         this.reject = false;\n      },\n\n\n   },\n}\n</script>\n<style scoped>\n#top-tab-list {\n   margin-bottom: 0;\n   ;\n}\n</style>"]},"metadata":{},"sourceType":"module"}