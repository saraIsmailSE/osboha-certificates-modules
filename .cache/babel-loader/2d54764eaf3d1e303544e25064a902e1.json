{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport CreateThesis from \"../../components/Thesis/CreateThesis.vue\";\nimport ListQuestion from \"../../components/Questions/ListQuestion.vue\";\nimport questionServices from '../../api/questionServices';\nexport default {\n  name: \"Theses\",\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.getTheses();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  components: {\n    ListQuestion: ListQuestion\n  },\n  data: function data() {\n    return {\n      auditable: false,\n      book: null,\n      user_book: null,\n      status: \"\",\n      questions: [],\n      thesisLength: 0,\n      thesisTitle: \"الأطروحة رقم\",\n      error: \"\"\n    };\n  },\n  methods: {\n    getTheses: function getTheses() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return questionServices.getByBook(_this2.$route.params.book_id);\n\n              case 2:\n                response = _context2.sent;\n                _this2.book = response.user_book.book;\n                _this2.questions = response.questions;\n                _this2.user_book = response.user_book;\n                _this2.status = _this2.user_book.status;\n                _this2.auditable = _this2.questions.some(function (element) {\n                  if (element.status === \"rejected\" || element.status === null) {\n                    return true;\n                  }\n\n                  return false;\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    addThesis: function addThesis(thesis) {\n      this.questions.push(thesis);\n      this.thesisLength++;\n      this.user_book_info[0].value++;\n      this.auditable = true;\n    },\n    reviewThesisStatus: function reviewThesisStatus() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var swalWithBootstrapButtons;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                swalWithBootstrapButtons = _this3.$swal.mixin({\n                  customClass: {\n                    confirmButton: \"btn btn-primary btn-lg\",\n                    cancelButton: \"btn btn-outline-primary btn-lg ms-2\"\n                  },\n                  buttonsStyling: false\n                });\n                swalWithBootstrapButtons.fire({\n                  title: \"هل أنت متأكد؟\",\n                  text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n                  icon: \"warning\",\n                  showCancelButton: true,\n                  confirmButtonText: \"نعم قم بطلب تدقيق\",\n                  cancelButtonText: \"تراجع  \",\n                  showClass: {\n                    popup: \"animate__animated animate__zoomIn\"\n                  },\n                  hideClass: {\n                    popup: \"animate__animated animate__zoomOut\"\n                  }\n                }).then(function (willDelete) {\n                  if (willDelete.isConfirmed) {\n                    questionServices.reviewThesis(_this3.user_book.id).then(function (response) {\n                      swalWithBootstrapButtons.fire({\n                        title: \"تم الارسال\",\n                        text: \"تم ارسال طلبك للتدقيق\",\n                        icon: \"success\",\n                        showClass: {\n                          popup: \"animate__animated animate__zoomIn\"\n                        },\n                        hideClass: {\n                          popup: \"animate__animated animate__zoomOut\"\n                        }\n                      });\n                      location.reload();\n                    })[\"catch\"](function (error) {\n                      console.log(error);\n                    });\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        path: \"/book\"\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["CreateThesis","ListQuestion","questionServices","name","created","getTheses","components","data","auditable","book","user_book","status","questions","thesisLength","thesisTitle","error","methods","getByBook","$route","params","book_id","response","some","element","addThesis","thesis","push","user_book_info","value","reviewThesisStatus","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","reviewThesis","id","location","reload","console","log","back","$router","path"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Achievement\\Questions.vue"],"sourcesContent":["<template>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-12\">\r\n            <iq-card>\r\n                <div class=\"iq-card-body profile-page p-0\">\r\n                    <div class=\"profile-header\">\r\n                        <div class=\"cover-container\">\r\n                            <img src=\"../../assets/images/book-banner.png\" alt=\"profile-bg\" class=\"rounded img-fluid\" />\r\n                        </div>\r\n                        <div class=\"user-detail text-center mb-3\">\r\n                            <div class=\"profile-img\">\r\n                                <img src=\"../../assets/images/reader.png\" alt=\"profile-img\"\r\n                                    class=\"avatar-130 img-fluid\" />\r\n                            </div>\r\n                            <div class=\"profile-detail mt-1\">\r\n                                <br />\r\n                                <h3 class=\"\" v-if=\"book\">{{book.book_name}} - قسم الأطروحات</h3>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n            <iq-card class=\"iq-card\">\r\n                <div class=\"iq-card-body p-0\">\r\n                    <div class=\"user-tabing\">\r\n                        <tab-nav :pills=\"true\" id=\"pills-tab\"\r\n                            class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\">\r\n                            <tab-nav-items class=\"w-100 p-0\" :active=\"true\" id=\"pills-feed-tab\"\r\n                                href=\"#questions_container\" ariaControls=\"pills-home\" role=\"tab\" :ariaSelected=\"true\"\r\n                                title=\"المرحلة الأولى - الأطروحات\" />\r\n                        </tab-nav>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n        </div>\r\n        <div class=\"col-sm-12\">\r\n            <div class=\"tab-content\">\r\n                <!-- START STAGE ONE -->\r\n                <tab-content-item :active=\"true\" id=\"questions_container\" aria-labelled-by=\"pills-feed-tab\">\r\n                    <div class=\"iq-card-body p-0\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-12\">\r\n                                <div id=\"post-modal-data\" class=\"iq-card\">\r\n                                    <div v-if=\"(questions.length < 12 && status == 'stage_two' && auditable) || questions.length==0\"\r\n                class=\"d-flex align-items-center mt-3\">\r\n                <form @submit.prevent=\"submitQuestionForm\" class=\"post-text ml-3 w-100 row\">\r\n                    <div class=\"form-group col-6\">\r\n                        <select v-model=\"v$.questionForm.starting_page.$model\" class=\"form-select\"\r\n                            data-trigger name=\"choices-single-default\" id=\"choices-single-default\">\r\n                            <option value=\"\">اختر صفحة البداية</option>\r\n                            <option v-for=\"(i, index) in book.pages\" :key=\"index\" :value=\"i\">\r\n                                {{ i }}\r\n                            </option>\r\n                        </select>\r\n                        <small style=\"color: red\"\r\n                            v-if=\"v$.questionForm.starting_page.$error\">{{pageError ? pageError :'الرجاء قم بادخال صفحة البداية'}}</small>\r\n                    </div>\r\n                    <div class=\"form-group col-6\">\r\n\r\n                        <select class=\"form-select\" v-model=\"v$.questionForm.ending_page.$model\"\r\n                            data-trigger name=\"choices-single-default\" id=\"choices-single-default\">\r\n                            <option value=\"\">اختر صفحة النهاية</option>\r\n                            <option v-for=\"(i, index) in book.pages\" :key=\"index\" :value=\"i\">\r\n                                {{ i }}\r\n                            </option>\r\n                        </select>\r\n                        <small style=\"color: red\" v-if=\"v$.questionForm.ending_page.$error\">{{pageError\r\n                        ? pageError :' الرجاء قم بادخال صفحة النهاية'}}</small>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <textarea rows=\"5\" placeholder=\"... اكتب سؤالًا \" class=\"rounded form-control\"\r\n                            id=\"bookQuestion\" v-model=\"v$.questionForm.question.$model\"></textarea>\r\n                        <small style=\"color:red;\" v-if=\"v$.questionForm.question.$error\">\r\n                            لطفًا قم بكتابة سؤال عدد حروفه بين 100 و 250\r\n                        </small>\r\n                    </div>\r\n                    <div>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <textarea rows=\"5\" placeholder=\"... اكتب اقتباسًا \"\r\n                            v-for=\"(v,index) in questionForm.quotes\" :key=\"index\"\r\n                            class=\"rounded form-control mt-2\" id=\"bookQuote\" v-model=\"v.text\">\r\n                        </textarea>\r\n                        <small style=\"color:red;\" v-if=\"v$.questionForm.question.$error\">\r\n                            قم بادخال اقتباس واحد على الاقل عدد حروفه لا يزيد عن 250\r\n                        </small>\r\n                        <hr>\r\n                        <a class=\"btn btn-primary rounded-pill mb-3 me-1\"\r\n                            @click=\"addField(textarea, questionForm.quotes)\">\r\n                            اضافة اقتباس\r\n                        </a>\r\n                        <a class=\"btn btn-danger rounded-pill mb-3 me-1\"\r\n                            v-show=\"questionForm.quotes && questionForm.quotes.length > 1\"\r\n                            @click=\"removeField(index, questionForm.quotes)\">\r\n                            حذف اقتباس\r\n                        </a>\r\n                    </div>\r\n                    <input type=\"submit\" value=\"أضافة\" href=\"javascript:void(0);\"\r\n                        class=\"btn btn-primary d-block mt-3\" />\r\n                </form>\r\n            </div>\r\n                                </div>\r\n                                <div v-for=\"(question,index) in questions\" :key=\"question.id\">\r\n                                    <ListQuestion :question=\"question\" :index='index' :book=\"book\"\r\n                                        :user_book=\"user_book\" />\r\n                                </div>\r\n\r\n                                <div class=\"col-lg-4\">\r\n                                    <iq-card v-if=\"questions.length >= 5 && auditable && status!='finished'\">\r\n                <template v-slot:body>\r\n                    <button class=\"btn btn-primary d-block w-100\" @click=\"reviewQuestions\">طلب\r\n                        تدقيق</button>\r\n                </template>\r\n            </iq-card>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tab-content-item>\r\n                <!-- END STAGE ONE -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template >\r\n<script>\r\nimport CreateThesis from \"../../components/Thesis/CreateThesis.vue\";\r\nimport ListQuestion from \"../../components/Questions/ListQuestion.vue\";\r\nimport questionServices from '../../api/questionServices'\r\n\r\nexport default {\r\n    name: \"Theses\",\r\n    async created() {\r\n        await this.getTheses();\r\n    },\r\n    components: {\r\n        ListQuestion,\r\n    },\r\n    data() {\r\n        return {\r\n            auditable: false,\r\n            book: null,\r\n            user_book: null,\r\n            status: \"\",\r\n            questions: [],\r\n            thesisLength: 0,\r\n            thesisTitle: \"الأطروحة رقم\",\r\n            error: \"\",\r\n        };\r\n    },\r\n    methods: {\r\n        async getTheses() {\r\n            const response = await questionServices.getByBook(this.$route.params.book_id);\r\n            this.book = response.user_book.book\r\n            this.questions = response.questions\r\n            this.user_book = response.user_book\r\n            this.status = this.user_book.status\r\n            this.auditable = this.questions.some((element) => {\r\n                if (element.status === \"rejected\" || element.status === null) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n\r\n\r\n        },\r\n        addThesis(thesis) {\r\n            this.questions.push(thesis);\r\n            this.thesisLength++;\r\n            this.user_book_info[0].value++;\r\n            this.auditable = true;\r\n        },\r\n        async reviewThesisStatus() {\r\n            const swalWithBootstrapButtons = this.$swal.mixin({\r\n                customClass: {\r\n                    confirmButton: \"btn btn-primary btn-lg\",\r\n                    cancelButton: \"btn btn-outline-primary btn-lg ms-2\",\r\n                },\r\n                buttonsStyling: false,\r\n            });\r\n            swalWithBootstrapButtons\r\n                .fire({\r\n                    title: \"هل أنت متأكد؟\",\r\n                    text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\r\n                    icon: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonText: \"نعم قم بطلب تدقيق\",\r\n                    cancelButtonText: \"تراجع  \",\r\n                    showClass: {\r\n                        popup: \"animate__animated animate__zoomIn\",\r\n                    },\r\n                    hideClass: {\r\n                        popup: \"animate__animated animate__zoomOut\",\r\n                    },\r\n                })\r\n                .then((willDelete) => {\r\n                    if (willDelete.isConfirmed) {\r\n                        questionServices\r\n                            .reviewThesis(this.user_book.id)\r\n                            .then((response) => {\r\n                                swalWithBootstrapButtons.fire({\r\n                                    title: \"تم الارسال\",\r\n                                    text: \"تم ارسال طلبك للتدقيق\",\r\n                                    icon: \"success\",\r\n                                    showClass: {\r\n                                        popup: \"animate__animated animate__zoomIn\",\r\n                                    },\r\n                                    hideClass: {\r\n                                        popup: \"animate__animated animate__zoomOut\",\r\n                                    },\r\n\r\n                                });\r\n                                location.reload()\r\n                            })\r\n                            .catch((error) => {\r\n                                console.log(error);\r\n                            });\r\n                    }\r\n                });\r\n\r\n        },\r\n        back() {\r\n            this.$router.push({ path: `/book` });\r\n        },\r\n    },\r\n};\r\n</script>\r\n  "]},"metadata":{},"sourceType":"module"}