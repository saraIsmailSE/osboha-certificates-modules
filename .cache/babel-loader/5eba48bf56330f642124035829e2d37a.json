{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, minLength, maxLength } from \"@vuelidate/validators\";\nimport generalInformationsServices from '../../api/generalInformationsServices';\nexport default {\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  name: 'GeneralSummary',\n  mounted: function mounted() {\n    this.getInformations();\n  },\n  validations: function validations() {\n    return {\n      generalInfromationsform: {\n        general_question: {\n          required: required,\n          minLength: minLength(100),\n          maxLength: maxLength(250)\n        },\n        summary: {\n          required: required,\n          minLength: minLength(350),\n          maxLength: maxLength(1800)\n        }\n      }\n    };\n  },\n  data: function data() {\n    return {\n      auditable: false,\n      book: null,\n      generalInfromationsform: {\n        general_question: '',\n        summary: '',\n        user_book_id: null\n      },\n      generalInformations: [],\n      show: false\n    };\n  },\n  methods: {\n    submitGenralInformationsForm: function submitGenralInformationsForm() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.v$.$touch();\n\n                if (_this.v$.generalInfromationsform.$invalid) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 4;\n                return generalInformationsServices.addGeneralInformations(_this.generalInfromationsform);\n\n              case 4:\n                _this.generalInformations = _context.sent;\n\n                _this.v$.generalInfromationsform.general_question.$reset();\n\n                _this.v$.generalInfromationsform.summary.$reset();\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getInformations: function getInformations() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return generalInformationsServices.getByBook(_this2.$route.params.id);\n\n              case 2:\n                response = _context2.sent;\n                _this2.generalInformations = response.general_informations;\n                _this2.generalInfromationsform.user_book_id = response.user_book.id;\n                _this2.book = response.user_book.book;\n\n                if (_this2.generalInformations && (_this2.generalInformations.status === \"retard\" || _this2.generalInformations.status === null)) {\n                  _this2.auditable = true;\n                }\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    deleteGeneralInformation: function deleteGeneralInformation(id) {\n      this.show = !this.show;\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني حذف هذا السؤال \",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بالحذف',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          generalInformationsServices.deleteGeneralInformation(id).then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم الحذف',\n              text: 'تم حذف السؤال',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    },\n    updateGeneralInformation: function updateGeneralInformation(id) {\n      this.show = !this.show;\n      this.$router.push({\n        path: \"/general/update/\".concat(id)\n      });\n    },\n    reviewGeneralInformation: function reviewGeneralInformation() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var swalWithBootstrapButtons;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                swalWithBootstrapButtons = _this3.$swal.mixin({\n                  customClass: {\n                    confirmButton: 'btn btn-primary btn-lg',\n                    cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                  },\n                  buttonsStyling: false\n                });\n                swalWithBootstrapButtons.fire({\n                  title: 'هل أنت متأكد؟',\n                  text: \"في حال الاعتماد لن يمكنك اضافة سؤال جديد أو التعديل على التلخيص الذي كتبته \",\n                  icon: 'warning',\n                  showCancelButton: true,\n                  confirmButtonText: 'نعم قم بالاعتماد',\n                  cancelButtonText: 'تراجع  ',\n                  showClass: {\n                    popup: 'animate__animated animate__zoomIn'\n                  },\n                  hideClass: {\n                    popup: 'animate__animated animate__zoomOut'\n                  }\n                }).then(function (willDelete) {\n                  if (willDelete.isConfirmed) {\n                    generalInformationsServices.reviewGeneralInformation(_this3.generalInformations.user_book_id).then(function (response) {\n                      swalWithBootstrapButtons.fire({\n                        title: 'تم الاعتماد',\n                        text: 'تم اعتماد طلبك',\n                        icon: 'success',\n                        showClass: {\n                          popup: 'animate__animated animate__zoomIn'\n                        },\n                        hideClass: {\n                          popup: 'animate__animated animate__zoomOut'\n                        }\n                      });\n                      location.reload();\n                    })[\"catch\"](function (error) {\n                      console.log(error);\n                    });\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        name: \"achievement.steps\",\n        params: {\n          id: this.$route.params.id\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["useVuelidate","required","minLength","maxLength","generalInformationsServices","setup","v$","name","mounted","getInformations","validations","generalInfromationsform","general_question","summary","data","auditable","book","user_book_id","generalInformations","show","methods","submitGenralInformationsForm","$touch","$invalid","addGeneralInformations","$reset","getByBook","$route","params","id","response","general_informations","user_book","status","deleteGeneralInformation","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","location","reload","console","log","error","updateGeneralInformation","$router","push","path","reviewGeneralInformation","back"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Achievement\\GeneralSummary.vue"],"sourcesContent":["<template>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-12\">\r\n            <iq-card>\r\n                <div class=\"iq-card-body profile-page p-0\">\r\n                    <div class=\"profile-header\">\r\n                        <div class=\"cover-container\">\r\n                            <img src=\"../../assets/images/book-banner.png\" alt=\"profile-bg\" class=\"rounded img-fluid\" />\r\n                        </div>\r\n                        <div class=\"user-detail text-center mb-3\">\r\n                            <div class=\"profile-img\">\r\n                                <img src=\"../../assets/images/reader.png\" alt=\"profile-img\"\r\n                                    class=\"avatar-130 img-fluid\" />\r\n                            </div>\r\n                            <div class=\"profile-detail mt-1\">\r\n                                <br />\r\n                                <h3 class=\"\" v-if=\"book\">{{book.book_name}} - قسم التلخيص والفكرة العامة</h3>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n            <iq-card class=\"iq-card\">\r\n                <div class=\"iq-card-body p-0\">\r\n                    <div class=\"user-tabing\">\r\n                        <tab-nav :pills=\"true\" id=\"pills-tab\"\r\n                            class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\">\r\n                            <tab-nav-items class=\"w-100 p-0\" :active=\"true\" id=\"pills-feed-tab\" href=\"#theses_container\"\r\n                                ariaControls=\"pills-home\" role=\"tab\" :ariaSelected=\"true\"\r\n                                title=\"المرحلة الثانية - التلخيص والفكرة العامة\" />\r\n                        </tab-nav>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n        </div>\r\n        <div class=\"col-sm-12\">\r\n            <div class=\"tab-content\">\r\n                <!-- START STAGE ONE -->\r\n                <tab-content-item :active=\"true\" id=\"theses_container\" aria-labelled-by=\"pills-feed-tab\">\r\n                    <div class=\"iq-card-body p-0\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-lg-4\">\r\n                            </div>\r\n                            <div class=\"col-12\">\r\n                                <div v-if=\"generalInformations\">\r\n                                    <div class=\"col-sm-12\">\r\n                                        <div class=\"card card-block card-stretch card-height\">\r\n                                            <div class=\"card-body\">\r\n                                                <div class=\"user-post-data\">\r\n                                                    <div class=\"d-flex justify-content-between\">\r\n                                                        <div class=\"w-100\">\r\n                                                            <div class=\"d-flex justify-content-between\">\r\n                                                                <div class=\"w-100\">\r\n                                                                    <p class=\"mb-0 text-primary\"\r\n                                                                        v-if=\"generalInformations.degree\">التقييم || {{\r\n                                                                        generalInformations.degree }}</p>\r\n                                                                    <div class=\"alert alert-success w-100\"\r\n                                                                        v-if=\"generalInformations.reviews\">\r\n                                                                        {{ generalInformations.reviews }}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <div class=\"card-post-toolbar text-end\"\r\n                                                                    v-if=\"generalInformations.status == null || generalInformations.status == 'retard'\">\r\n                                                                    <div class=\"dropdown-toggle\" id=\"dropdownMenuButton\"\r\n                                                                        data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\r\n                                                                        role=\"button\" @click=\"show = !show\">\r\n                                                                        <span class=\"material-symbols-outlined\">\r\n                                                                            more_horiz\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                    <div :class=\"`dropdown-menu dropdown-menu-right ${show ? 'show' : ''}`\"\r\n                                                                        aria-labelledby=\"dropdownMenuButton\" style=\"\">\r\n                                                                        <a class=\"dropdown-item d-flex align-items-center\"\r\n                                                                            @click=\"updateGeneralInformation(generalInformations.id)\">\r\n                                                                            <span\r\n                                                                                class=\"material-symbols-outlined me-2 md-18\">\r\n                                                                                edit\r\n                                                                            </span>\r\n                                                                            تعديل\r\n                                                                        </a>\r\n                                                                        <a class=\"dropdown-item d-flex align-items-center\"\r\n                                                                            @click=\"deleteGeneralInformation(generalInformations.id)\">\r\n                                                                            <span\r\n                                                                                class=\"material-symbols-outlined me-2 md-18\">\r\n                                                                                delete\r\n                                                                            </span>\r\n                                                                            حذف\r\n                                                                        </a>\r\n                                                                    </div>\r\n\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-md-12 form-group\">\r\n                                                    <h4 class=\"form-label\"> التلخيص العام</h4>\r\n                                                    <p class=\"form-control-plaintext\">{{ generalInformations.summary }}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <hr />\r\n                                                <div class=\"col-md-12 form-group\">\r\n                                                    <div class=\"col-md-12 form-group\">\r\n                                                        <h4 class=\"form-label\"> السؤال العام </h4>\r\n                                                        <p class=\"form-control-plaintext\">{{\r\n                                                        generalInformations.general_question }}</p>\r\n                                                    </div>\r\n\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <iq-card\r\n                                            v-if=\"generalInformations.status == null || generalInformations.status == 'retard'\">\r\n                                            <template v-slot:body>\r\n                                                <button class=\"btn btn-primary d-block w-100\"\r\n                                                    @click=\"reviewGeneralInformation\"> اعتماد\r\n                                                </button>\r\n                                                <button class=\"btn btn-success d-block w-100\" @click=\"back()\">\r\n                                                عودة لصفحة الانجاز \r\n                                            </button>\r\n                                            </template>\r\n                                        </iq-card>\r\n\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div v-else id=\"post-modal-data\" class=\"iq-card\">\r\n                                    <div>\r\n                                        <iq-card id=\"post-modal-data\"\r\n                                            body-class=\"iq-card iq-card-block iq-card-stretch iq-card-height\">\r\n                                            <template v-slot:headerTitle>\r\n                                                <h4 class=\"card-title\">إضافة التلخيص والفكرة العامة</h4>\r\n                                            </template>\r\n                                            <template v-slot:body>\r\n                                                <div class=\"d-flex align-items-center\">\r\n                                                    <form @submit.prevent=\"submitGenralInformationsForm\"\r\n                                                        class=\"post-text ml-3 w-100 row\">\r\n                                                        <div class=\"form-group\">\r\n                                                            <label class=\"form-label\" for=\"bookGeneralIdea\">الفكرة\r\n                                                                العامة</label>\r\n                                                            <textarea\r\n                                                                v-model=\"v$.generalInfromationsform.summary.$model\"\r\n                                                                rows=\"5\" placeholder=\"... اكتب فكرة عامة\"\r\n                                                                class=\"rounded form-control\"\r\n                                                                id=\"bookGeneralIdea\"></textarea>\r\n                                                            <small style=\"color:red;\"\r\n                                                                v-if=\"v$.generalInfromationsform.summary.$error\">\r\n                                                                لطفًا قم بكتابة تلخيص عدد حروفه بين 350 و 1800\r\n                                                            </small>\r\n                                                        </div>\r\n                                                        <div class=\"form-group\">\r\n                                                            <label class=\"form-label\" for=\"bookGeneralQuestion\">سؤال عام\r\n                                                            </label>\r\n                                                            <textarea\r\n                                                                v-model=\"v$.generalInfromationsform.general_question.$model\"\r\n                                                                rows=\"5\" placeholder=\"... اكتب سؤالًا عاماً\"\r\n                                                                class=\"rounded form-control\"\r\n                                                                id=\"bookGeneralQuestion\"></textarea>\r\n                                                            <small style=\"color:red;\"\r\n                                                                v-if=\"v$.generalInfromationsform.general_question.$error\">\r\n                                                                قم بكتابة سؤال عام لا يزيد عدد حروفة عن 250\r\n                                                            </small>\r\n                                                        </div>\r\n\r\n                                                        <input type=\"submit\" value=\"اضافة\" href=\"javascript:void(0);\"\r\n                                                            class=\"btn btn-primary d-block mt-3 mb-3\" />\r\n                                                    </form>\r\n                                                </div>\r\n                                                <hr />\r\n                                            </template>\r\n                                        </iq-card>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tab-content-item>\r\n                <!-- END STAGE ONE -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\n\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, minLength, maxLength } from \"@vuelidate/validators\";\r\nimport generalInformationsServices from '../../api/generalInformationsServices'\r\n\r\nexport default {\r\n    setup() {\r\n        return { v$: useVuelidate() };\r\n    },\r\n    name: 'GeneralSummary',\r\n    mounted() {\r\n        this.getInformations();\r\n    },\r\n    validations() {\r\n        return {\r\n            generalInfromationsform: {\r\n                general_question: {\r\n                    required,\r\n                    minLength: minLength(100),\r\n                    maxLength: maxLength(250)\r\n                },\r\n                summary: {\r\n                    required,\r\n                    minLength: minLength(350),\r\n                    maxLength: maxLength(1800)\r\n\r\n                },\r\n            },\r\n        };\r\n    },\r\n    data() {\r\n        return {\r\n            auditable: false,\r\n            book: null,\r\n            generalInfromationsform: {\r\n                general_question: '',\r\n                summary: '',\r\n                user_book_id: null,\r\n            },\r\n            generalInformations: [],\r\n            show: false,\r\n        }\r\n    },\r\n    methods: {\r\n        async submitGenralInformationsForm() {\r\n            this.v$.$touch();\r\n            if (!this.v$.generalInfromationsform.$invalid) {\r\n                this.generalInformations = await generalInformationsServices.addGeneralInformations(this.generalInfromationsform);\r\n                this.v$.generalInfromationsform.general_question.$reset();\r\n                this.v$.generalInfromationsform.summary.$reset();\r\n\r\n            }\r\n        },\r\n        async getInformations() {\r\n            const response = await generalInformationsServices.getByBook(this.$route.params.id);\r\n            this.generalInformations = response.general_informations\r\n            this.generalInfromationsform.user_book_id = response.user_book.id;\r\n            this.book = response.user_book.book;\r\n            if (this.generalInformations && (this.generalInformations.status === \"retard\" || this.generalInformations.status === null)) {\r\n                this.auditable = true;\r\n            }\r\n        },\r\n        deleteGeneralInformation(id) {\r\n            this.show = !this.show;\r\n            const swalWithBootstrapButtons = this.$swal.mixin({\r\n                customClass: {\r\n                    confirmButton: 'btn btn-primary btn-lg',\r\n                    cancelButton: 'btn btn-outline-primary btn-lg ms-2'\r\n                },\r\n                buttonsStyling: false\r\n            })\r\n\r\n            swalWithBootstrapButtons.fire({\r\n                title: 'هل أنت متأكد؟',\r\n                text: \"موافقتك تعني حذف هذا السؤال \",\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonText: 'نعم قم بالحذف',\r\n                cancelButtonText: 'تراجع  ',\r\n                showClass: {\r\n                    popup: 'animate__animated animate__zoomIn'\r\n                },\r\n                hideClass: {\r\n                    popup: 'animate__animated animate__zoomOut'\r\n                }\r\n            })\r\n                .then((willDelete) => {\r\n                    if (willDelete.isConfirmed) {\r\n                        generalInformationsServices.deleteGeneralInformation(id)\r\n                            .then(response => {\r\n                                swalWithBootstrapButtons.fire({\r\n                                    title: 'تم الحذف',\r\n                                    text: 'تم حذف السؤال',\r\n                                    icon: 'success',\r\n                                    showClass: {\r\n                                        popup: 'animate__animated animate__zoomIn'\r\n                                    },\r\n                                    hideClass: {\r\n                                        popup: 'animate__animated animate__zoomOut'\r\n                                    }\r\n                                })\r\n                                location.reload()\r\n                            })\r\n                            .catch(error => {\r\n                                console.log(error)\r\n                            })\r\n                    }\r\n                })\r\n        },\r\n        updateGeneralInformation(id) {\r\n            this.show = !this.show;\r\n            this.$router.push({ path: `/general/update/${id}` })\r\n        },\r\n        async reviewGeneralInformation() {\r\n            const swalWithBootstrapButtons = this.$swal.mixin({\r\n                customClass: {\r\n                    confirmButton: 'btn btn-primary btn-lg',\r\n                    cancelButton: 'btn btn-outline-primary btn-lg ms-2'\r\n                },\r\n                buttonsStyling: false\r\n            })\r\n            swalWithBootstrapButtons.fire({\r\n                title: 'هل أنت متأكد؟',\r\n                text: \"في حال الاعتماد لن يمكنك اضافة سؤال جديد أو التعديل على التلخيص الذي كتبته \",\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonText: 'نعم قم بالاعتماد',\r\n                cancelButtonText: 'تراجع  ',\r\n                showClass: {\r\n                    popup: 'animate__animated animate__zoomIn'\r\n                },\r\n                hideClass: {\r\n                    popup: 'animate__animated animate__zoomOut'\r\n                }\r\n            })\r\n                .then((willDelete) => {\r\n                    if (willDelete.isConfirmed) {\r\n                        generalInformationsServices.reviewGeneralInformation(this.generalInformations.user_book_id)\r\n                            .then(response => {\r\n                                swalWithBootstrapButtons.fire({\r\n                                    title: 'تم الاعتماد',\r\n                                    text: 'تم اعتماد طلبك',\r\n                                    icon: 'success',\r\n                                    showClass: {\r\n                                        popup: 'animate__animated animate__zoomIn'\r\n                                    },\r\n                                    hideClass: {\r\n                                        popup: 'animate__animated animate__zoomOut'\r\n                                    }\r\n                                })\r\n                                location.reload()\r\n                            })\r\n                            .catch(error => {\r\n                                console.log(error)\r\n                            })\r\n                    }\r\n                })\r\n        },\r\n        back() {\r\n            this.$router.push({ name: `achievement.steps`, params: { id: this.$route.params.id } })\r\n        },\r\n\r\n    },\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}