{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport generalInformationsServices from '../../../api/generalInformationsServices';\nimport UserInfo from '../../../services/userInfo.service';\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\nexport default {\n  name: 'GeneralInformations',\n  components: {},\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.generalInformations();\n\n            case 2:\n              _this.role = UserInfo.getRole()[0];\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data: function data() {\n    return {\n      current: 1,\n      informations: [],\n      role: '',\n      reject: false,\n      rejectNote: '',\n      reviweNote: '',\n      mark: 0,\n      bookName: '',\n      userName: '',\n      markCondition: true\n    };\n  },\n  validations: function validations() {\n    return {\n      rejectNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.reject == true;\n        })\n      },\n      reviweNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.role == \"auditor\";\n        })\n      }\n    };\n  },\n  methods: {\n    generalInformations: function generalInformations() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var general_nformations;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return generalInformationsServices.getByUserBook(_this2.$route.params.user_book_id);\n\n              case 2:\n                general_nformations = _context2.sent;\n                _this2.informations = general_nformations;\n                _this2.bookName = _this2.informations.user_book.book.book_name;\n                _this2.userName = _this2.informations.user_book.user.name;\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    checkMark: function checkMark() {\n      this.markCondition = parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100;\n    },\n    addDegree: function addDegree(id) {\n      var _this3 = this;\n\n      this.v$.$touch();\n      this.checkMark();\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني أن هذا التخيس  تم مراجعته\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'تمت المراجعة  ',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          generalInformationsServices.addDegree(id, _this3.reviweNote, _this3.mark).then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم الاضافة',\n              text: 'تم مراجعة التلخيص',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    },\n    changeTab: function changeTab(tab) {\n      this.current = tab;\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    },\n    checkActive: function checkActive(item, active) {\n      var className = '';\n\n      if (this.current > item) {\n        className = 'active';\n      }\n\n      if (this.current > active) {\n        className = className + ' done';\n      }\n\n      return className;\n    },\n    setReject: function setReject() {\n      this.reject = true;\n    },\n    rejectInfo: function rejectInfo(id) {\n      var _this4 = this;\n\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني رفض هذا التلخيص \",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بالرفض',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          generalInformationsServices.rejectGeneralInformations(id, _this4.rejectNote).then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم الرفض',\n              text: 'تم رفض التلخيص',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    },\n    accept: function accept(id) {\n      var swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"موافقتك تعني قبول هذا السؤال\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بالقبول',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      }).then(function (willDelete) {\n        if (willDelete.isConfirmed) {\n          generalInformationsServices.acceptGeneralInformations(id).then(function (response) {\n            swalWithBootstrapButtons.fire({\n              title: 'تم القبول',\n              text: 'تم قبول السؤال',\n              icon: 'success',\n              showClass: {\n                popup: 'animate__animated animate__zoomIn'\n              },\n              hideClass: {\n                popup: 'animate__animated animate__zoomOut'\n              }\n            });\n            location.reload();\n          })[\"catch\"](function (error) {\n            console.log(error);\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["generalInformationsServices","UserInfo","useVuelidate","required","requiredIf","name","components","created","generalInformations","role","getRole","setup","v$","data","current","informations","reject","rejectNote","reviweNote","mark","bookName","userName","markCondition","validations","nestedModel","methods","getByUserBook","$route","params","user_book_id","general_nformations","user_book","book","book_name","user","checkMark","parseInt","addDegree","id","$touch","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","location","reload","console","log","error","changeTab","tab","window","scrollTo","top","behavior","checkActive","item","active","className","setReject","rejectInfo","rejectGeneralInformations","accept","acceptGeneralInformations"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\General\\general_informations.vue"],"sourcesContent":["<template>\n   <div class=\"row\">\n      <div class=\"col-sm-12\">\n         <div class=\"card position-relative inner-page-bg bg-primary\" style=\"height: 150px;\">\n            <div class=\"inner-page-title\">\n               <h3 class=\"text-white\">عرض الأسئلة العامة للمراجعة</h3>\n            </div>\n         </div>\n      </div>\n      <div class=\"col-sm-12\" v-if=\"informations.status\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">الأسئلة العامة</h4>\n               <span class=\"px-2\"> اسم السفير : {{userName}}</span>\n               <span class=\"px-2\"> || </span>\n               <span class=\"px-2\"> اسم الكتاب : {{bookName}}</span>\n            </template>\n            <template v-slot:body>\n\n               <div class=\"form-card text-start\">\n                  <form>\n                     <div class=\"row setup-content\" id=\"user-detail\">\n                        <div class=\"col-sm-12\">\n                           <div class=\"col-md-12 p-0\">\n                              <h3 class=\"mb-4\">الانجاز</h3>\n                              <div class=\"row\">\n\n                                 <div class=\"col-md-12 form-group\">\n                                    <div class=\"col-md-12 form-group\">\n                                       <h4 class=\"form-label\"> التلخيص العام</h4>\n                                       <p class=\"form-control-plaintext\">{{ informations.summary }}</p>\n                                    </div>\n\n                                 </div>\n                                 <div class=\"col-md-12 form-group\">\n                                    <div class=\"col-md-12 form-group\">\n                                       <h4 class=\"form-label\"> السؤال العام العام</h4>\n                                       <p class=\"form-control-plaintext\">{{ informations.general_question }}</p>\n                                    </div>\n\n                                 </div>\n                                 <hr>\n                                 <div class=\"col-md-12 mb-3 form-group\"\n                                    v-if=\"(informations.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                    <label for=\"address\" class=\"form-label\">ملاحظات المراجع *</label>\n                                    <textarea name=\"address\" class=\"form-control\" id=\"address\" rows=\"5\"\n                                       required=\"required\" v-model=\"reviweNote\"></textarea>\n                                       <small style=\"color: red\" v-if=\"v$.reviweNote.$error\">\n                                          {{'ملاحظاتك مطلوبة'}}\n                                       </small>\n\n                                 </div>\n\n                                 <div\n                                    v-if=\"(informations.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                    <div class=\"row form-group\">\n                                       <label for=\"address\" class=\"form-label\"> درجة التقييم *</label>\n                                       <div class=\"col-md-9 form-group\">\n                                          <input type=\"text\" name=\"mark\" class=\"form-control\" id=\"mark\"\n                                             required=\"required\" v-model=\"mark\" @input=\"checkMark()\" />\n                                          <small style=\"color: red\" v-if=\"!markCondition\">\n                                             {{'يجب أن تكون الدرجة بين 70 - 100'}}\n                                          </small>\n\n                                       </div>\n\n                                       <div class=\"col-md-3 form-group\">\n                                          <a href=\"javascript:void(0);\" @click=\"addDegree(informations.id)\"\n                                             class=\"btn btn-primary d-block\">إضافة</a>\n                                       </div>\n                                    </div>\n                                 </div>\n                                 <div v-if=\"(informations.status == 'review' && (role == 'reviewer' || role == 'admin'))\">\n                                    <div class=\"col-md-12 form-group\">\n                                       <a href=\"javascript:void(0);\" class=\"btn btn-primary d-block\"\n                                          @click=\"accept(informations.id)\">قبول</a>\n                                       <a href=\"javascript:void(0);\" class=\"btn btn-danger d-block mt-3\"\n                                          @click=\"setReject()\" v-if=\"!reject\">رفض</a>\n                                    </div>\n                                    <div class=\"col-md-12 mb-3 form-group\" v-if=\"reject\">\n                                       <label for=\"rejectNote\" class=\"form-label\">سبب الرفض *</label>\n                                       <textarea name=\"rejectNote\" class=\"form-control\" id=\"rejectNote\" rows=\"5\"\n                                          required=\"required\" v-model=rejectNote></textarea>\n                                       <a href=\"javascript:void(0);\" class=\"btn btn-danger d-block mt-3\"\n                                          @click=\"rejectInfo(informations.id)\">رفض</a>\n\n                                    </div>\n\n                                 </div>\n                              </div>\n                           </div>\n                        </div>\n                     </div>\n                  </form>\n               </div>\n            </template>\n         </iq-card>\n      </div>\n      <div class=\"col-lg-12\" v-if=\"informations.status == 'audited'\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">تمت المراجعة</h4>\n            </template>\n            <template v-slot:body>\n               <TimeLine :items=\"[\n                  {\n                     color: 'primary',\n                     title: 'تمت المراجعة',\n                     description: informations.auditor.name,\n                     child: {\n                           type: 'img',\n                           items: [\n                           ]\n                     }\n                  },\n\n               ]\" />\n            </template>\n         </iq-card>\n      </div>\n      <div class=\"col-lg-12\" v-if=\"informations.status == 'rejected'\">\n         <iq-card>\n            <template v-slot:headerTitle>\n               <h4 class=\"card-title\">تم التدقيق </h4>\n            </template>\n            <template v-slot:body>\n               <TimeLine :items=\"[\n                   {\n                       color: 'primary',\n                       title: ' مرفوض',\n                       description: informations.reviewer.name,\n                       child: {\n                           type: 'img',\n                           items: [\n                           ]\n                       }\n                   },\n                                   \n               ]\" />\n            </template>\n         </iq-card>\n      </div>\n   </div>\n</template>\n<script>\nimport generalInformationsServices from '../../../api/generalInformationsServices'\nimport UserInfo from '../../../services/userInfo.service'\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\n\nexport default {\n   name: 'GeneralInformations',\n   components: {\n   },\n   async created() {\n      await this.generalInformations()\n      this.role = UserInfo.getRole()[0]\n\n   },\n   setup() {\n      return { v$: useVuelidate() };\n   },\n   data() {\n      return {\n         current: 1,\n         informations: [],\n         role: '',\n         reject: false,\n         rejectNote: '',\n         reviweNote: '',\n         mark: 0,\n         bookName: '',\n         userName: '',\n         markCondition:true,\n      }\n   },\n   validations() {\n      return {\n         rejectNote: {\n            required: requiredIf(function (nestedModel) {\n               return this.reject == true;\n            }),\n         },\n         reviweNote: {\n            required: requiredIf(function (nestedModel) {\n               return this.role == \"auditor\";\n            }),\n         },\n      };\n   },\n   methods: {\n      async generalInformations() {\n         const general_nformations = await generalInformationsServices.getByUserBook(this.$route.params.user_book_id);\n         this.informations = general_nformations;\n         this.bookName = this.informations.user_book.book.book_name\n         this.userName = this.informations.user_book.user.name\n      },\n      checkMark() {\n         this.markCondition = (parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100)\n      },\n      addDegree(id) {\n         this.v$.$touch();\n         this.checkMark();\n         const swalWithBootstrapButtons = this.$swal.mixin({\n            customClass: {\n               confirmButton: 'btn btn-primary btn-lg',\n               cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n            },\n            buttonsStyling: false\n         })\n         swalWithBootstrapButtons.fire({\n            title: 'هل أنت متأكد؟',\n            text: \"موافقتك تعني أن هذا التخيس  تم مراجعته\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonText: 'تمت المراجعة  ',\n            cancelButtonText: 'تراجع  ',\n            showClass: {\n               popup: 'animate__animated animate__zoomIn'\n            },\n            hideClass: {\n               popup: 'animate__animated animate__zoomOut'\n            }\n         })\n            .then((willDelete) => {\n               if (willDelete.isConfirmed) {\n                  generalInformationsServices.addDegree(id, this.reviweNote, this.mark)\n                     .then(response => {\n                        swalWithBootstrapButtons.fire({\n                           title: 'تم الاضافة',\n                           text: 'تم مراجعة التلخيص',\n                           icon: 'success',\n                           showClass: {\n                              popup: 'animate__animated animate__zoomIn'\n                           },\n                           hideClass: {\n                              popup: 'animate__animated animate__zoomOut'\n                           }\n                        })\n                        location.reload()\n                     })\n                     .catch(error => {\n                        console.log(error)\n                     })\n               }\n            })\n      },\n      changeTab(tab) {\n         this.current = tab\n         window.scrollTo({ top: 0, behavior: 'smooth' })\n      },\n      checkActive(item, active) {\n         let className = ''\n         if (this.current > item) {\n            className = 'active'\n         }\n         if (this.current > active) {\n            className = className + ' done'\n         }\n         return className\n      },\n\n      setReject() {\n         this.reject = true;\n      },\n      rejectInfo(id) {\n         const swalWithBootstrapButtons = this.$swal.mixin({\n            customClass: {\n               confirmButton: 'btn btn-primary btn-lg',\n               cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n            },\n            buttonsStyling: false\n         })\n\n         swalWithBootstrapButtons.fire({\n            title: 'هل أنت متأكد؟',\n            text: \"موافقتك تعني رفض هذا التلخيص \",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonText: 'نعم قم بالرفض',\n            cancelButtonText: 'تراجع  ',\n            showClass: {\n               popup: 'animate__animated animate__zoomIn'\n            },\n            hideClass: {\n               popup: 'animate__animated animate__zoomOut'\n            }\n         })\n            .then((willDelete) => {\n               if (willDelete.isConfirmed) {\n                  generalInformationsServices.rejectGeneralInformations(id, this.rejectNote)\n                     .then(response => {\n                        swalWithBootstrapButtons.fire({\n                           title: 'تم الرفض',\n                           text: 'تم رفض التلخيص',\n                           icon: 'success',\n                           showClass: {\n                              popup: 'animate__animated animate__zoomIn'\n                           },\n                           hideClass: {\n                              popup: 'animate__animated animate__zoomOut'\n                           }\n                        })\n                        location.reload()\n                     })\n                     .catch(error => {\n                        console.log(error)\n                     })\n               }\n            })\n      },\n      accept(id) {\n         const swalWithBootstrapButtons = this.$swal.mixin({\n            customClass: {\n               confirmButton: 'btn btn-primary btn-lg',\n               cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n            },\n            buttonsStyling: false\n         })\n         swalWithBootstrapButtons.fire({\n            title: 'هل أنت متأكد؟',\n            text: \"موافقتك تعني قبول هذا السؤال\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonText: 'نعم قم بالقبول',\n            cancelButtonText: 'تراجع  ',\n            showClass: {\n               popup: 'animate__animated animate__zoomIn'\n            },\n            hideClass: {\n               popup: 'animate__animated animate__zoomOut'\n            }\n         })\n            .then((willDelete) => {\n               if (willDelete.isConfirmed) {\n                  generalInformationsServices.acceptGeneralInformations(id)\n                     .then(response => {\n                        swalWithBootstrapButtons.fire({\n                           title: 'تم القبول',\n                           text: 'تم قبول السؤال',\n                           icon: 'success',\n                           showClass: {\n                              popup: 'animate__animated animate__zoomIn'\n                           },\n                           hideClass: {\n                              popup: 'animate__animated animate__zoomOut'\n                           }\n                        })\n                        location.reload()\n                     })\n                     .catch(error => {\n                        console.log(error)\n                     })\n               }\n            })\n      },\n\n   }\n}\n</script>\n<style scoped>\n#top-tab-list {\n   margin-bottom: 0;\n   ;\n}\n</style>"]},"metadata":{},"sourceType":"module"}