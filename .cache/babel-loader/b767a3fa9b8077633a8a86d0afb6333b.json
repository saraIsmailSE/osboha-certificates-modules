{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport iqCard from '../../../components/custom/cards/iq-card.vue';\nimport UserInfo from \"../../../services/userInfo.service\";\nimport { getByStatus } from '../../../api/thesis/getByStatus';\nexport default {\n  components: {\n    iqCard: iqCard\n  },\n  name: 'ListTheses',\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (UserInfo.getRole()[0] === 'reviewer') {\n                _this.status = \"review\";\n              } else {\n                _this.status = \"audit\";\n              }\n\n              _context.next = 3;\n              return _this.getTheses(_this.status);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  data: function data() {\n    return {\n      theses: [],\n      status: ''\n    };\n  },\n  methods: {\n    getTheses: function getTheses(status) {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var theses;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return getByStatus(status);\n\n              case 2:\n                theses = _context2.sent;\n                _this2.theses = theses;\n                console.log(_this2.theses);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    listTheses: function listTheses(user_book_id) {\n      this.$router.push({\n        path: \"/theses-review/theses/\".concat(user_book_id),\n        params: {\n          bookId: user_book_id\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;AAkDA,OAAOA,MAAP,MAAmB,8CAAnB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,SAASC,WAAT,QAA4B,iCAA5B;AAEA,eAAe;EACXC,UAAU,EAAE;IAAEH,MAAK,EAALA;EAAF,CADD;EAEXI,IAAI,EAAE,YAFK;EAGLC,OAHK,qBAGK;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cACZ,IAAGJ,QAAQ,CAACK,OAAT,GAAmB,CAAnB,MAA0B,UAA7B,EAAwC;gBACpC,KAAI,CAACC,MAAL,GAAY,QAAZ;cACJ,CAFA,MAGI;gBACA,KAAI,CAACA,MAAL,GAAY,OAAZ;cACJ;;cANY;cAAA,OAON,KAAI,CAACC,SAAL,CAAe,KAAI,CAACD,MAApB,CAPM;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAQf,CAXU;EAYXE,IAZW,kBAYJ;IACH,OAAO;MACHC,MAAM,EAAE,EADL;MAEHH,MAAM,EAAC;IAFJ,CAAP;EAIH,CAjBU;EAkBXI,OAAO,EAAE;IACCH,SADD,qBACWD,MADX,EACmB;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACCL,WAAW,CAACK,MAAD,CADZ;;cAAA;gBACdG,MADc;gBAEpB,MAAI,CAACA,MAAL,GAAcA,MAAd;gBACAE,OAAO,CAACC,GAAR,CAAY,MAAI,CAACH,MAAjB;;cAHoB;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIvB,CALI;IAMLI,UANK,sBAMMC,YANN,EAMmB;MACpB,KAAKC,OAAL,CAAaC,IAAb,CAAkB;QAAEC,IAAI,kCAA2BH,YAA3B,CAAN;QAAgDI,MAAM,EAAE;UAAEC,MAAM,EAAEL;QAAV;MAAxD,CAAlB;IACH;EARI;AAlBE,CAAf","names":["iqCard","UserInfo","getByStatus","components","name","created","getRole","status","getTheses","data","theses","methods","console","log","listTheses","user_book_id","$router","push","path","params","bookId"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\Theses\\list.vue"],"sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-sm-12\">\n            <div class=\"card position-relative inner-page-bg bg-primary\" style=\"height: 150px;\">\n                <div class=\"inner-page-title\">\n                    <h3 class=\"text-white\">مراجعة الأطروحات</h3>\n                    <p class=\"text-white\">تبقى 2000</p>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-sm-12\">\n            <iq-card>\n                <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">أطروحات بحاجة للمراجعة</h4>\n                </template>\n                <template v-slot:body>\n                    <div class=\"table-responsive\">\n                        <table id=\"datatable\" class=\"table table-striped table-bordered\">\n                            <thead>\n                                <tr>\n                                    <th>اسم السفير</th>\n                                    <th>اسم الكتاب</th>\n                                    <th>عدد الأطروحات</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr v-for=\"thesis in theses\" :key=\"thesis.id\">\n                                    <td>\n                                        <a href=\"javascript:void(0);\" @click=\"listTheses(thesis.user_book.id)\">\n                                        {{ thesis.user_book.user.name }}\n                                    </a>\n                                        \n                                    </td>\n                                    <td>\n                                        {{ thesis.user_book.book.book_name }}\n                                    </td>\n                                    <td>\n                                        {{ thesis.user_book.thesises.length }}\n                                    </td>\n                                </tr>\n\n                            </tbody>\n                        </table>\n                    </div>\n                </template>\n            </iq-card>\n        </div>\n    </div>\n</template>\n<script>\nimport iqCard from '../../../components/custom/cards/iq-card.vue'\nimport UserInfo from \"../../../services/userInfo.service\";\nimport { getByStatus } from '../../../api/thesis/getByStatus'\n\nexport default {\n    components: { iqCard },\n    name: 'ListTheses',\n    async created() {\n        if(UserInfo.getRole()[0] === 'reviewer'){\n            this.status=\"review\"\n        }\n        else{\n            this.status=\"audit\"\n        }\n        await this.getTheses(this.status)\n    },\n    data() {\n        return {\n            theses: [],\n            status:'',\n        }\n    },\n    methods: {\n        async getTheses(status) {\n            const theses = await getByStatus(status);\n            this.theses = theses;\n            console.log(this.theses)\n        }, \n        listTheses(user_book_id){\n            this.$router.push({ path: `/theses-review/theses/${user_book_id}`,params: { bookId: user_book_id }})  \n        },\n    },\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}