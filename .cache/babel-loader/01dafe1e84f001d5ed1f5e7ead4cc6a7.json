{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Stage2 from './ProfileElements/Stage2';\nimport CreateThesis from '../../../components/Thesis/CreateThesis.vue';\nimport ThesisDisplay from '../../../components/Thesis/ThesisDisplay';\nimport bookServices from '../../../api/bookServices';\nimport thesisServices from '../../../api/thesisServices';\nimport certificateServices from '../../../api/certificateServices';\nexport default {\n  name: 'Profile',\n  created: function created() {\n    this.getFinalStatistics();\n    this.getBook();\n  },\n  components: {\n    CreateThesis: CreateThesis,\n    thesisDisplay: thesisDisplay,\n    Stage2: Stage2\n  },\n  data: function data() {\n    return {\n      auditable: false,\n      book: null,\n      user_book: null,\n      user_book_info: [{\n        title: 'الأطروحات',\n        value: 0\n      }, {\n        title: 'الأسئلة',\n        value: 0\n      }, {\n        title: 'الاقتباسات',\n        value: 0\n      }],\n      status: \"\",\n      thesises: [],\n      statistics: null,\n      thesisLength: 0,\n      thesisTitle: \"الأطروحة رقم\",\n      error: ''\n    };\n  },\n  methods: {\n    addThesis: function addThesis(thesis) {\n      this.thesises.push(thesis);\n      this.thesisLength++;\n    },\n    getBook: function getBook() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return bookServices.getUserBook(_this.$route.params.id);\n\n              case 2:\n                response = _context.sent;\n\n                if (response.book != null) {\n                  _this.book = response.book;\n\n                  if (response.user_book != null) {\n                    _this.user_book = response.user_book;\n                    _this.status = _this.user_book.status;\n\n                    if (_this.user_book.thesises != null) {\n                      _this.thesises = _this.user_book.thesises;\n                      _this.auditable = _this.thesises.some(function (element) {\n                        if (element.status === 'rejected' || element.status === null) {\n                          return true;\n                        }\n\n                        return false;\n                      });\n                      _this.user_book_info[0].value = _this.user_book.thesises.length;\n                      _this.thesisLength = _this.user_book.thesises.length;\n                    }\n\n                    _this.user_book_info[1].value = _this.user_book.questions.length;\n\n                    if (_this.user_book.questions.quotation) {\n                      _this.user_book_info[2].value = _this.user_book.questions.quotation.length;\n                    }\n                  }\n                } else {\n                  _this.status = \"404\";\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    auditThesisStatus: function auditThesisStatus() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var swalWithBootstrapButtons;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                swalWithBootstrapButtons = _this2.$swal.mixin({\n                  customClass: {\n                    confirmButton: 'btn btn-primary btn-lg',\n                    cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                  },\n                  buttonsStyling: false\n                });\n                swalWithBootstrapButtons.fire({\n                  title: 'هل أنت متأكد؟',\n                  text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n                  icon: 'warning',\n                  showCancelButton: true,\n                  confirmButtonText: 'نعم قم بطلب تدقيق',\n                  cancelButtonText: 'تراجع  ',\n                  showClass: {\n                    popup: 'animate__animated animate__zoomIn'\n                  },\n                  hideClass: {\n                    popup: 'animate__animated animate__zoomOut'\n                  }\n                }).then(function (willDelete) {\n                  if (willDelete.isConfirmed) {\n                    thesisServices.auditThesis(_this2.$route.params.id).then(function (response) {\n                      swalWithBootstrapButtons.fire({\n                        title: 'تم الارسال',\n                        text: 'تم ارسال طلبك للتدقيق',\n                        icon: 'success',\n                        showClass: {\n                          popup: 'animate__animated animate__zoomIn'\n                        },\n                        hideClass: {\n                          popup: 'animate__animated animate__zoomOut'\n                        }\n                      });\n                      _this2.auditable = false;\n                    })[\"catch\"](function (error) {\n                      console.log(error);\n                    });\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    getFinalStatistics: function getFinalStatistics() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var statistics;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return bookServices.getStatistics(_this3.$route.params.id);\n\n              case 2:\n                statistics = _context3.sent;\n                _this3.statistics = statistics;\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    requestCertificate: function requestCertificate() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return certificateServices.requestCertificateApi(_this4.book.id);\n\n              case 2:\n                res = _context4.sent;\n\n                if (!res) {\n                  _this4.error = 'الرجاء اكمال انجازك الحالي اولا';\n                } else {\n                  window.location.reload();\n                }\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["Stage2","CreateThesis","ThesisDisplay","bookServices","thesisServices","certificateServices","name","created","getFinalStatistics","getBook","components","thesisDisplay","data","auditable","book","user_book","user_book_info","title","value","status","thesises","statistics","thesisLength","thesisTitle","error","methods","addThesis","thesis","push","getUserBook","$route","params","id","response","some","element","length","questions","quotation","auditThesisStatus","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","auditThesis","console","log","getStatistics","requestCertificate","requestCertificateApi","res","window","location","reload"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\SocailMain\\Profile\\Profile.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-sm-12\">\n      <iq-card>\n        <div class=\"iq-card-body profile-page p-0\">\n          <div class=\"profile-header\">\n            <div class=\"cover-container\">\n              <img src=\"../../../assets/images/book-banner.png\" alt=\"profile-bg\" class=\"rounded img-fluid\" />\n            </div>\n            <div class=\"user-detail text-center mb-3\">\n              <div class=\"profile-img\">\n                <img src=\"../../../assets/images/reader.png\" alt=\"profile-img\" class=\"avatar-130 img-fluid\" />\n              </div>\n              <div class=\"profile-detail mt-1\">\n                <br>\n                <h3 class=\"\" v-if=\"book\">{{book.book_name}}</h3>\n              </div>\n            </div>\n            <div class=\"profile-info p-4 d-flex align-items-center justify-content-between position-relative\">\n              <div class=\"social-links\">\n                <!-- RATING -->\n              </div>\n              <!-- USER BOOK INFO -->\n              <div class=\"social-info\" v-if=\"user_book\">\n                <ul class=\"social-data-block d-flex align-items-center justify-content-between list-inline p-0 m-0\">\n                  <li v-for=\"(info, index) in user_book_info\" :key=\"index\" class=\"text-center ps-3\">\n                    <h6>{{ info.title }}</h6>\n                    <p class=\"mb-0\">{{ info.value }}</p>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </iq-card>\n      <iq-card class=\"iq-card\" v-if=\"status\">\n        <div class=\"iq-card-body p-0\">\n          <div class=\"user-tabing\">\n            <tab-nav :pills=\"true\" id=\"pills-tab\"\n              class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\">\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"true\" id=\"pills-feed-tab\" href=\"#profile-feed\"\n                ariaControls=\"pills-home\" role=\"tab\" :ariaSelected=\"true\" title=\"المرحلة الأولى - الأطروحات\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-activity-tab\" href=\"#profile-activity\"\n                ariaControls=\"pills-profile\" role=\"tab\" :ariaSelected=\"false\"\n                title=\"المرحلة الثانية - الأسئلة العامة\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-friend-tab\" href=\"#profile-friends\"\n                ariaControls=\"pills-contact\" role=\"tab\" :ariaSelected=\"false\" title=\"احصائيات\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-profile-tab\" href=\"#profile-profile\"\n                ariaControls=\"pills-contact\" role=\"tab\" :ariaSelected=\"false\" title=\"اصدار الشهادة\" />\n            </tab-nav>\n          </div>\n        </div>\n      </iq-card>\n    </div>\n    <div class=\"col-sm-12\" v-if=\"status\">\n      <div class=\"tab-content\">\n        <!-- START STAGE ONE -->\n        <tab-content-item :active=\"true\" id=\"profile-feed\" aria-labelled-by=\"pills-feed-tab\"\n          v-if=\" status && (status == 'stage_one' || status == 'stage_two' || status == 'finished')\">\n          <div class=\"iq-card-body p-0\">\n            <div class=\"row\">\n              <div class=\"col-lg-4\">\n                <iq-card v-if=\"status== 'finished'\">\n                  <template v-slot:body>\n                    <a href=\"#\"><span\n                        class=\"badge badge-pill bg-primary font-weight-normal ms-auto me-1 material-symbols-outlined md-14\">grade</span>\n                      المعدل العام</a>\n                  </template>\n                </iq-card>\n                <iq-card>\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">المرحلة الحالية</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\" v-if=\"status == 'stage_one'\">المرحلة الأولى</p>\n                    <p class=\"m-0\" v-else-if=\"status == 'satge_two'\">المرحلة الثانية</p>\n                    <p class=\"m-0\" v-else>أتممت توثيق الانجاز </p>\n\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"book\">\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">مستوى الكتاب</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\">{{book.type.name}} </p>\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"auditable\">\n                  <template v-slot:body>\n                      <button class=\"btn btn-primary d-block w-100\" @click=\"auditThesisStatus\">طلب تدقيق</button>\n                  </template>\n                </iq-card>\n              </div>\n              <div class=\"col-lg-8\">\n                <div id=\"post-modal-data\" class=\"iq-card\">\n                  <CreateThesis @add-thesis=\"addThesis\" :book='book' :noOfthesis='thesisLength'\n                    v-if=\"  thesisLength < 12  && status === 'stage_one' && auditable\" />\n                </div>\n                <div v-for=\"(thesis,index) in thesises\" :key=\"index\">\n                  <ThesisDisplay :thesis=\"thesis\" :number=\"index\" :title=\"thesisTitle\" :book=\"book\" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </tab-content-item>\n        <!-- END STAGE ONE -->\n\n        <!-- START STAGE TWO -->\n        <tab-content-item :active=\"false\" id=\"profile-activity\" aria-labelled-by=\"pills-activity-tab\"\n          v-if=\"status && (status == 'stage_two' || status == 'finished')\">\n          <iq-card>\n            <template v-slot:body>\n              <Stage2 :book='book' :status='status' />\n            </template>\n          </iq-card>\n        </tab-content-item>\n        <tab-content-item :active=\"false\" id=\"profile-activity\" aria-labelled-by=\"pills-activity-tab\" v-else>\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img src=\"@/assets/images/stage2.png\" class=\"img-fluid rounded w-50\" alt=\"blog-img\">\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3\">\n                  التدرج في الصعود، سبيل الوصول إلى القمة. قم بالعودة لإتمام المرحلة الأولى قبل الشروع بتقديم المرحلة\n                  الثانية\n                </h4>\n              </div>\n            </iq-card>\n\n          </div>\n\n        </tab-content-item>\n        <!-- END STAGE TWO -->\n\n        <!-- START STATISTICS -->\n        <tab-content-item :active=\"false\" id=\"profile-friends\" aria-labelled-by=\"pills-friend-tab\"\n          v-if=\"statistics && status && (status == 'finished')\">\n          <iq-card>\n            <template v-slot:body>\n              <h2>احصائيات</h2>\n              <div class=\"col-12\">\n                <div class=\"card\">\n                  <div class=\"card-body\">\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>المعدل العام</h6>\n                        <small>{{statistics.final?statistics.final :0 }}%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\"></b-progress>\n                      <b-progress-bar :value=\"statistics.final ? statistics.final : 0\" variant=\"danger\">\n                      </b-progress-bar>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>الأطروحات</h6>\n                        <small>{{statistics.thesises?statistics.thesises :0 }}%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"statistics.thesises ? statistics.thesises : 0\" variant=\"info\">\n                        </b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>التلخيص العام</h6>\n                        <small>{{statistics.general_informations?statistics.general_informations :0 }}%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"statistics.general_informations ? statistics.general_informations : 0\"\n                          variant=\"primary\"></b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>القراءة التفحصية</h6>\n                        <small>{{statistics.questions?statistics.questions :0 }}%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"statistics.questions ? statistics.questions : 0\" variant=\"success\">\n                        </b-progress-bar>\n                      </b-progress>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </iq-card>\n          <div>\n          </div>\n        </tab-content-item>\n        <tab-content-item :active=\"false\" id=\"profile-friends\" aria-labelled-by=\"pills-friend-tab\" v-else>\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img src=\"@/assets/images/statistics.png\" class=\"img-fluid rounded w-50\" alt=\"blog-img\">\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3 mx-2\">\n                  وكما تشكل المكعبات قلعة شامخة، تشكل إجابتك في المرحلة الأولى والثانية علمًا راسخًا يتم تقييمه ويسهل\n                  عليك العودة له دائمًا للتدارس،\n                  أكمل تعبئة الأسئلة المطلوبة ضمن الكتاب لتظهر لك صفحة الاحصائيات الخاصة بطلبك\n                </h4>\n              </div>\n            </iq-card>\n\n          </div>\n\n        </tab-content-item>\n        <!-- END STATISTICS -->\n\n        <!-- START EXPOTR CERTIFICATE -->\n        <tab-content-item :active=\"false\" id=\"profile-profile\" aria-labelled-by=\"pills-profile-tab\"\n          v-if=\"status && (status == 'finished')\">\n          <iq-card>\n            <template v-slot:body>\n              <div class=\"tab-content\">\n                <tab-content-item :active=\"true\" id=\"photo-you\" aria-labelled-by=\"pills-photo-you-tab\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"card card-block card-stretch card-height blog-list\">\n                        <div class=\"card-body\">\n                          <div class=\"row align-items-center\">\n                            <div class=\"col-md-6\">\n                              <div class=\"image-block\">\n                                <img src=\"@/assets/images/export-congrats.png\" class=\"img-fluid rounded w-100\"\n                                  alt=\"blog-img\" />\n                              </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                              <div class=\"blog-description p-2\">\n                                <div class=\"blog-meta d-flex align-items-center justify-content-between mb-2\">\n                                  <div class=\"title\">\n                                    <h2>تهانينا</h2>\n                                  </div>\n                                </div>\n                                <p>\n                                  في أمة جاءها الأمر السماوي بضرورة القراءة، لا تسجل القراءة مكانًا لها في سلم الأولويات\n                                  عند شخوص الأمة. وللأسف فإن أولئك الذين يقرأون في هذه الأمة لا يمارسون القراءة كأسلوب\n                                  تعليمي كما يجب. لذلك نوجه لك التهنئة لأن وصولك لهذه المرحلة تعني أنك استخدم وسائل\n                                  القراءة المتقدمة بالشكل الصحيح خلال قراءتك لهذا الكتاب وهذه خطوة مميزة لا يقوم بها سوى\n                                  (10٪) فقط من القراء، مبارك لك ما تعلمت، مبارك ما قدمت ودرست وبذلت، تستحق هذه الشهادة\n                                  ،نفع الله بك وعلمك\n                                </p>\n                              </div>\n                              <a href=\"javascript:void(0);\" class=\"btn btn-primary d-block mt-3\" style=\"color: white\">\n                                اصدار الشهادة\n                              </a>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </tab-content-item>\n                <tab-content-item :active=\"false\" id=\"your-photo\" aria-labelled-by=\"pills-your-photo-tab\">\n                </tab-content-item>\n              </div>\n            </template>\n          </iq-card>\n          <div>\n\n          </div>\n        </tab-content-item>\n        <tab-content-item :active=\"false\" id=\"profile-profile\" aria-labelled-by=\"pills-profile-tab\" v-else>\n          <div class=\"col-sm-12\">\n            <iq-card class=\"iq-card\">\n              <div class=\"iq-card-body p-0\">\n                <div class=\"image-block text-center\">\n                  <img src=\"@/assets/images/finished.png\" class=\"img-fluid rounded w-50\" alt=\"blog-img\">\n                </div>\n\n                <h4 class=\"text-center mt-3 mb-3\">\n                  انتظر تقييم المختصيين لقراءتك وليكن هذا حافزًا لك لتقرأ بشكل أفضل\n                </h4>\n              </div>\n            </iq-card>\n          </div>\n        </tab-content-item>\n        <!-- END EXPOTR CERTIFICATE -->\n      </div>\n    </div>\n    <div class=\"col-sm-12 d-flex justify-content-center\" v-else>\n      <div class=\"col-sm-12\">\n        <iq-card class=\"iq-card\">\n          <div class=\"iq-card-body p-0\">\n            <div class=\"image-block text-center\">\n              <img src=\"@/assets/images/start_new.png\" class=\"img-fluid rounded w-25 mt-3\" alt=\"blog-img\">\n            </div>\n\n            <h2 class=\"text-center mt-3 mb-3\">ملاحظة</h2>\n            <h4 class=\"text-center mt-3 mb-3\">\n              سعداء بأنك تستعد لصعود أولى درجات سلم المجد، من خلال طلبك لفتح طلب تقييم ل قراءتك لهذا الكتاب. لكن انتبه،\n              في\n              حال فتحك لطلب تقييم قراءتك ضمن هذا الكتاب فلن تكون قادرًا على طلب تقييم كتب إضافية إلا بعد انتهاء فريق\n              التقييم من مراجعة طلبك الحالي </h4>\n\n\n            <button @click=\"requestCertificate\" type=\"submit\" class=\"btn btn-primary d-block w-75  mx-auto mb-3 \">طلب\n              شهادة</button>\n\n          </div>\n          <p style=\"color:red;margin-right:5px\">{{error}}</p>\n        </iq-card>\n\n      </div>\n\n    </div>\n  </div>\n\n</template>\n<script>\nimport Stage2 from './ProfileElements/Stage2'\nimport CreateThesis from '../../../components/Thesis/CreateThesis.vue'\nimport ThesisDisplay from '../../../components/Thesis/ThesisDisplay'\nimport bookServices from '../../../api/bookServices'\nimport thesisServices from '../../../api/thesisServices'\nimport certificateServices from '../../../api/certificateServices'\n\nexport default {\n  name: 'Profile',\n  created() {\n\n    this.getFinalStatistics();\n    this.getBook();\n\n  },\n  components: {\n    CreateThesis,\n thesisDisplay,\n    Stage2\n  },\n  data() {\n    return {\n      auditable: false,\n      book: null,\n      user_book: null,\n      user_book_info: [\n        {\n          title: 'الأطروحات',\n          value: 0\n        },\n        {\n          title: 'الأسئلة',\n          value: 0\n        },\n        {\n          title: 'الاقتباسات',\n          value: 0\n        }\n      ],\n      status: \"\",\n   thesises: [],\n      statistics: null,\n   thesisLength: 0,\n   thesisTitle: \"الأطروحة رقم\",\n      error: ''\n    }\n  },\n  methods: {\n    addThesis(thesis) {\n      this.thesises.push(thesis)\n      this.thesisLength++;\n    },\n\n    async getBook() {\n\n      const response = await bookServices.getUserBook(this.$route.params.id);\n\n      if (response.book != null) {\n        this.book = response.book;\n        if (response.user_book != null) {\n          this.user_book = response.user_book;\n          this.status = this.user_book.status\n\n          if (this.user_book.thesises != null) {\n            this.thesises = this.user_book.thesises\n            this.auditable = this.thesises.some(element => {\n              if (element.status === 'rejected' || element.status === null) {\n                return true;\n              }\n              return false;\n            });\n\n            this.user_book_info[0].value = this.user_book.thesises.length\n            this.thesisLength = this.user_book.thesises.length\n\n          }\n          this.user_book_info[1].value = this.user_book.questions.length\n          if (this.user_book.questions.quotation) {\n            this.user_book_info[2].value = this.user_book.questions.quotation.length\n\n          }\n\n        }\n      }\n      else {\n        this.status = \"404\"\n      }\n    },\n\n    async auditThesisStatus() {\n      const swalWithBootstrapButtons = this.$swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-primary btn-lg',\n          cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n        },\n        buttonsStyling: false\n      })\n      swalWithBootstrapButtons.fire({\n        title: 'هل أنت متأكد؟',\n        text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'نعم قم بطلب تدقيق',\n        cancelButtonText: 'تراجع  ',\n        showClass: {\n          popup: 'animate__animated animate__zoomIn'\n        },\n        hideClass: {\n          popup: 'animate__animated animate__zoomOut'\n        }\n      })\n        .then((willDelete) => {\n          if (willDelete.isConfirmed) {\n         thesisServices.auditThesis(this.$route.params.id)\n              .then(response => {\n                swalWithBootstrapButtons.fire({\n                  title: 'تم الارسال',\n                  text: 'تم ارسال طلبك للتدقيق',\n                  icon: 'success',\n                  showClass: {\n                    popup: 'animate__animated animate__zoomIn'\n                  },\n                  hideClass: {\n                    popup: 'animate__animated animate__zoomOut'\n                  }\n                })\n                this.auditable = false;\n              })\n              .catch(error => {\n                console.log(error)\n              })\n\n          }\n        })\n    },\n    async getFinalStatistics() {\n      const statistics = await bookServices.getStatistics(this.$route.params.id)\n      this.statistics = statistics;\n    },\n\n    async requestCertificate() {\n      const res = await certificateServices.requestCertificateApi(this.book.id);\n      if (!res) {\n        this.error = 'الرجاء اكمال انجازك الحالي اولا'\n      } else {\n        window.location.reload();\n      }\n    }\n\n  },\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}