{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Stage2 from './ProfileElements/Stage2';\nimport CreateThesis from '../../../components/Theses/CreateThesis';\nimport ListStuff from '../../../components/Book/ListStuff';\nimport bookServices from '../../../api/bookServices';\nimport { getStageStatus } from '../../../api/getStageStatus';\nimport thesisServices from '../../../api/thesisServices';\nexport default {\n  name: 'Profile',\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.getBook();\n\n            case 2:\n              _context.next = 4;\n              return _this.getStageStat();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  components: {\n    CreateThesis: CreateThesis,\n    ListStuff: ListStuff,\n    Stage2: Stage2\n  },\n  data: function data() {\n    return {\n      book: null,\n      user_book: null,\n      user_book_info: [{\n        title: 'الأطروحات',\n        value: 0\n      }, {\n        title: 'الأسئلة',\n        value: 0\n      }, {\n        title: 'الاقتباسات',\n        value: 0\n      }],\n      stageStatus: 0,\n      user_book_id: null,\n      status: null,\n      theses: null\n    };\n  },\n  methods: {\n    addThesis: function addThesis(thesis) {\n      this.CreateThesis.unshift(thesis);\n    },\n    getBook: function getBook() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return bookServices.getUserBook(_this2.$route.params.id);\n\n              case 2:\n                response = _context2.sent;\n                console.log(\"book\");\n                console.log(_this2.book);\n\n                if (response.book != null) {\n                  _this2.book = response.book;\n\n                  if (response.user_book != null) {\n                    _this2.user_book = response.user_book;\n                    _this2.status = _this2.user_book.status;\n\n                    if (_this2.user_book.theses != null) {\n                      _this2.theses = _this2.user_book.theses;\n                      _this2.user_book_info[0].value = _this2.user_book.theses.length;\n                    }\n\n                    _this2.user_book_info[1].value = _this2.user_book.questions.length;\n\n                    if (_this2.user_book.questions.length > 0) {\n                      _this2.user_book_info[2].value = _this2.user_book.questions.quotation.length;\n                    }\n                  }\n                } else {\n                  _this2.status = \"404\";\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    getStageStat: function getStageStat() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var stageStatus;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return getStageStatus(_this3.user_book_id);\n\n              case 2:\n                stageStatus = _context3.sent;\n                _this3.stageStatus = stageStatus;\n                _this3.stageStatus;\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    auditThesisStatus: function auditThesisStatus() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return thesisServices.auditThesis(_this4.user_book_id);\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["Stage2","CreateThesis","ListStuff","bookServices","getStageStatus","thesisServices","name","created","getBook","getStageStat","components","data","book","user_book","user_book_info","title","value","stageStatus","user_book_id","status","theses","methods","addThesis","thesis","unshift","getUserBook","$route","params","id","response","console","log","length","questions","quotation","auditThesisStatus","auditThesis"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\SocailMain\\Profile\\Profile.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-sm-12\">\n      <iq-card>\n        <div class=\"iq-card-body profile-page p-0\">\n          <div class=\"profile-header\">\n            <div class=\"cover-container\">\n              <img src=\"../../../assets/images/book-banner.png\" alt=\"profile-bg\" class=\"rounded img-fluid\">\n            </div>\n            <div class=\"user-detail text-center mb-3\">\n              <div class=\"profile-img\">\n                <img src=\"../../../assets/images/reader.png\" alt=\"profile-img\" class=\"avatar-130 img-fluid\" />\n              </div>\n              <div class=\"profile-detail mt-1\">\n                <br>\n                <h3 class=\"\" v-if=\"book\">{{book.book_name}}</h3>\n              </div>\n            </div>\n            <div class=\"profile-info p-4 d-flex align-items-center justify-content-between position-relative\">\n              <div class=\"social-links\">\n\n                <!-- RATING -->\n                <ul class=\"social-data-block d-flex align-items-center justify-content-between list-inline p-0 m-0\">\n                  <li v-for=\"(star, index) in rate\" :key=\"index\" class=\"text-center pe-3\">\n                    <img :src=\"star\" alt=\"rate\" class=\"img-fluid rounded\">\n                  </li>\n                </ul>\n              </div>\n              <!-- USER BOOK INFO -->\n              <div class=\"social-info\" v-if=\"user_book\">\n                <ul class=\"social-data-block d-flex align-items-center justify-content-between list-inline p-0 m-0\">\n                  <li v-for=\"(info, index) in user_book_info\" :key=\"index\" class=\"text-center ps-3\">\n                    <h6>{{ info.title }}</h6>\n                    <p class=\"mb-0\">{{ info.value }}</p>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </iq-card>\n      <iq-card class=\"iq-card\" v-if=\"status\">\n        <div class=\"iq-card-body p-0\">\n          <div class=\"user-tabing\">\n            <tab-nav :pills=\"true\" id=\"pills-tab\"\n              class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\">\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"true\" id=\"pills-feed-tab\" href=\"#profile-feed\"\n                ariaControls=\"pills-home\" role=\"tab\" :ariaSelected=\"true\" title=\"المرحلة الأولى - الأطروحات\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-activity-tab\" href=\"#profile-activity\"\n                ariaControls=\"pills-profile\" role=\"tab\" :ariaSelected=\"false\"\n                title=\"المرحلة الثانية - الأسئلة العامة\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-friend-tab\" href=\"#profile-friends\"\n                ariaControls=\"pills-contact\" role=\"tab\" :ariaSelected=\"false\" title=\"احصائيات\" />\n              <tab-nav-items class=\"col-sm-3 p-0\" :active=\"false\" id=\"pills-profile-tab\" href=\"#profile-profile\"\n                ariaControls=\"pills-contact\" role=\"tab\" :ariaSelected=\"false\" title=\"اصدار الشهادة\" />\n            </tab-nav>\n          </div>\n        </div>\n      </iq-card>\n    </div>\n    <div class=\"col-sm-12\">\n      <div class=\"tab-content\">\n        <!-- START STAGE ONE -->\n        <tab-content-item :active=\"true\" id=\"profile-feed\" aria-labelled-by=\"pills-feed-tab\">\n          <div class=\"iq-card-body p-0\">\n            <div class=\"row\">\n              <div class=\"col-lg-4\">\n                <iq-card v-if=\"status== 'finished'\">\n                  <template v-slot:body>\n                    <a href=\"#\"><span\n                        class=\"badge badge-pill bg-primary font-weight-normal ms-auto me-1 material-symbols-outlined md-14\">grade</span>\n                      المعدل العام</a>\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"status== 'finished'\">\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">المرحلة الحالية</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\">المرحلة الأولى</p>\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"book\">\n                  <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">مستوى الكتاب</h4>\n                  </template>\n                  <template v-slot:headerAction>\n                    <p class=\"m-0\">{{book.type.name}} </p>\n                  </template>\n                </iq-card>\n                <iq-card v-if=\"theses && stageStatus === 0 && theses.length>=8\">\n                  <template v-slot:body>\n                    <form @submit=\"auditThesisStatus\"> \n                      <button class=\"btn btn-primary d-block w-100\" @click=\"auditThesisStatus\">طلب تدقيق</button>\n                    </form>\n                  </template>\n                </iq-card>\n              </div>\n              <div class=\"col-lg-8\">\n                <div id=\"post-modal-data\" class=\"iq-card\">\n                  <CreateThesis :pages='book.pages' :user_book_id='user_book_id' @addThesis=\"addThesis\" v-if=\"(!( theses ) && theses.length < 12)  && stageStatus === 0\" />\n                  <div v-for=\"thesis in theses\" :key=\"thesis.id\">\n                    <ListStuff :stuff=\"thesis\"></ListStuff>\n                  </div>\n                </div>\n              </div>\n              <button class=\"btn btn-primary d-block w-100\" v-if=\"status=='finished'\">طلب الشهادة</button>\n              <button class=\"btn btn-primary d-block w-100\" v-if=\"status == ''\">طلب انجاز</button>\n            </div>\n          </div>\n        </tab-content-item>\n        <!-- END STAGE ONE -->\n\n        <!-- START STAGE TWO -->\n        <tab-content-item :active=\"false\" id=\"profile-activity\" aria-labelled-by=\"pills-activity-tab\">\n          <iq-card>\n            <template v-slot:body>\n              <Stage2 :user_book_id='user_book_id' />\n            </template>\n          </iq-card>\n        </tab-content-item>\n        <!-- END STAGE TWO -->\n\n        <!-- START STATISTICS -->\n        <tab-content-item :active=\"false\" id=\"profile-friends\" aria-labelled-by=\"pills-friend-tab\">\n          <iq-card>\n            <template v-slot:body>\n              <h2>احصائيات</h2>\n              <div class=\"col-12\">\n                <div class=\"card\">\n                  <div class=\"card-body\">\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>المعدل العام</h6>\n                        <small>62%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"62\" variant=\"danger\"></b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>الأطروحات</h6>\n                        <small>46%</small>\n                      </div>\n                      <b-progress class=\"shadow-none  w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"46\" variant=\"info\"></b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>التلخيص العام</h6>\n                        <small>79%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"79\" variant=\"primary\"></b-progress-bar>\n                      </b-progress>\n                    </div>\n                    <div class=\"mb-3\">\n                      <div class=\"d-flex justify-content-between mt-2 text-dark\">\n                        <h6>القراءة التفحصية</h6>\n                        <small>34%</small>\n                      </div>\n                      <b-progress class=\"shadow-none w-100 mt-2\" style=\"height: 6px\">\n                        <b-progress-bar :value=\"34\" variant=\"success\"></b-progress-bar>\n                      </b-progress>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </iq-card>\n        </tab-content-item>\n        <!-- END STATISTICS -->\n\n        <!-- START EXPOTR CERTIFICATE -->\n        <tab-content-item :active=\"false\" id=\"profile-profile\" aria-labelled-by=\"pills-profile-tab\">\n          <iq-card>\n            <template v-slot:body>\n              <div class=\"tab-content\">\n                <tab-content-item :active=\"true\" id=\"photo-you\" aria-labelled-by=\"pills-photo-you-tab\">\n                  <div class=\"row\">\n                    <div class=\"col-lg-12\">\n                      <div class=\"card card-block card-stretch card-height blog-list\">\n                        <div class=\"card-body\">\n                          <div class=\"row align-items-center\">\n                            <div class=\"col-md-6\">\n                              <div class=\"image-block\">\n                                <img src=\"@/assets/images/export-congrats.png\" class=\"img-fluid rounded w-100\"\n                                  alt=\"blog-img\">\n                              </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                              <div class=\"blog-description p-2\">\n                                <div class=\"blog-meta d-flex align-items-center justify-content-between mb-2\">\n                                  <div class=\"title\">\n                                    <h2>تهانينا</h2>\n                                  </div>\n                                </div>\n                                <h5 class=\"mb-2\">لوريم ايبسوم</h5>\n                                <p>\n                                  لوريم ايبسوم دولار سيت أميت ,كونسيكتيتور أدايبا يسكينج أليايت,سيت دو أيوسمود تيمبور\n\n                                  أنكايديديونتيوت لابوري ات دولار ماجنا أليكيوا . يوت انيم أد مينيم فينايم,كيواس نوستريد\n\n                                  أكسير سيتاشن يللأمكو لابورأس نيسي يت أليكيوب أكس أيا كوممودو كونسيكيوات .\n                                </p>\n                              </div>\n                              <a href=\"javascript:void(0);\" class=\"btn btn-primary d-block mt-3\" style=\"color:white\">\n                                اصدار الشهادة\n                              </a>\n\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </tab-content-item>\n                <tab-content-item :active=\"false\" id=\"your-photo\" aria-labelled-by=\"pills-your-photo-tab\">\n                </tab-content-item>\n              </div>\n            </template>\n          </iq-card>\n        </tab-content-item>\n        <!-- END EXPOTR CERTIFICATE -->\n\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Stage2 from './ProfileElements/Stage2'\nimport CreateThesis from '../../../components/Theses/CreateThesis'\nimport ListStuff from '../../../components/Book/ListStuff'\nimport bookServices from '../../../api/bookServices'\nimport { getStageStatus } from '../../../api/getStageStatus'\nimport thesisServices from '../../../api/thesisServices'\n\n\nexport default {\n  name: 'Profile',\n  async created() {\n    await this.getBook();\n    await this.getStageStat();\n\n  },\n  components: {\n    CreateThesis,\n    ListStuff,\n    Stage2\n  },\n  data() {\n    return {\n\n      book: null,\n      user_book: null,\n      user_book_info: [\n        {\n          title: 'الأطروحات',\n          value: 0\n        },\n        {\n          title: 'الأسئلة',\n          value: 0\n        },\n        {\n          title: 'الاقتباسات',\n          value: 0\n        }\n      ],\n      stageStatus: 0,\n      user_book_id: null,\n      status: null,\n      theses: null\n    }\n  },\n  methods: {\n    addThesis(thesis) {\n      this.CreateThesis.unshift(thesis)\n    },\n\n    async getBook() {\n      const response = await bookServices.getUserBook(this.$route.params.id);\n      console.log(\"book\");\n      console.log(this.book);\n      if (response.book != null) {\n        this.book = response.book;\n        if (response.user_book != null) {\n          this.user_book = response.user_book;\n          this.status = this.user_book.status\n          if (this.user_book.theses != null) {\n            this.theses=this.user_book.theses\n            this.user_book_info[0].value = this.user_book.theses.length\n          }\n          this.user_book_info[1].value = this.user_book.questions.length\n          if (this.user_book.questions.length > 0) {\n            this.user_book_info[2].value = this.user_book.questions.quotation.length\n\n          }\n\n        }\n      }\n      else {\n        this.status = \"404\"\n      }\n    },\n    async getStageStat() {\n      const stageStatus = await getStageStatus(this.user_book_id);\n      this.stageStatus = stageStatus;\n      (this.stageStatus)\n    },\n    async auditThesisStatus(){\n      await thesisServices.auditThesis(this.user_book_id)\n    },\n\n\n  },\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}