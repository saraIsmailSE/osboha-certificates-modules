{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"col text-center\"\n};\n\nvar _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"fluidDiv\"\n}, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_3 = [_hoisted_2];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, _hoisted_3);\n}","map":{"version":3,"mappings":";;EACO,SAAM;;;8BACTA,oBAAyB,KAAzB,EAAyB;EAApBC,EAAE,EAAC;AAAiB,CAAzB,EAAkB,IAAlB,EAAkB;AAAA;AAAlB;;kBAAAC;;uBADFC,oBAEM,KAFN,cAEMC,UAFN","names":["_createElementVNode","id","_hoisted_2","_createElementBlock","_hoisted_3"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\components\\chart.vue"],"sourcesContent":["<template>\r\n  <div class=\"col  text-center\">\r\n    <div id=\"fluidDiv\"></div>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"Chart\",\r\n  mounted() {\r\n    this.targetContainer = document.getElementById(\"fluidDiv\");\r\n    this.fillPercentage = 90;\r\n    this.options.fontSize = \"30px\";\r\n    this.options.drawPercentageSign = true;\r\n    this.options.drawBubbles = false;\r\n    this.options.size = 300;\r\n    this.options.borderWidth = 19;\r\n    this.options.backgroundColor = \"#e2e2e2\";\r\n    this.options.foregroundColor = \"#fafafa\";\r\n\r\n    this.foregroundFluidLayer.fillStyle = \"#16E1FF\";\r\n    this.foregroundFluidLayer.angularSpeed = 30;\r\n    this.foregroundFluidLayer.maxAmplitude = 5;\r\n    this.foregroundFluidLayer.frequency = 30;\r\n    this.foregroundFluidLayer.horizontalSpeed = -20;\r\n    this.backgroundFluidLayer.fillStyle = \"#4F8FC6\";\r\n    this.backgroundFluidLayer.angularSpeed = 100;\r\n    this.backgroundFluidLayer.maxAmplitude = 3;\r\n    this.backgroundFluidLayer.frequency = 22;\r\n    this.backgroundFluidLayer.horizontalSpeed = 20;\r\nthis.init();\r\nthis.setPercentage(90)\r\n\r\n    // this.setupCanvas();\r\n    // this.draw();\r\n    this.drawFluid(this.dt);\r\n    // this.drawFluidLayer(this.foregroundFluidLayer, this.dt)\r\n    // this.drawFluidMask(this.foregroundFluidLayer)\r\n\r\n  },\r\n  created() {\r\n  },\r\n  props: {\r\n    percintage: {\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      options: {\r\n        drawShadow: true,\r\n        drawText: true,\r\n        drawPercentageSign: true,\r\n        drawBubbles: true,\r\n        fontSize: \"70px\",\r\n        fontFamily: \"Arial\",\r\n        fontFillStyle: \"white\",\r\n        size: 300,\r\n        borderWidth: 25,\r\n        backgroundColor: \"#e2e2e2\",\r\n        foregroundColor: \"#fafafa\"\r\n      },\r\n      context: null,\r\n      targetContainer: null,\r\n      time: null,\r\n      dt: null,\r\n      currentFillPercentage: 0,\r\n      fillPercentage: 0,\r\n\r\n      //#region fluid context values\r\n      foregroundFluidLayer: {\r\n        fillStyle: \"purple\",\r\n        angle: 0,\r\n        horizontalPosition: 0,\r\n        angularSpeed: 0,\r\n        maxAmplitude: 9,\r\n        frequency: 30,\r\n        horizontalSpeed: -150,\r\n        initialHeight: 0\r\n      },\r\n      backgroundFluidLayer: {\r\n        fillStyle: \"pink\",\r\n        angle: 0,\r\n        horizontalPosition: 0,\r\n        angularSpeed: 140,\r\n        maxAmplitude: 12,\r\n        frequency: 40,\r\n        horizontalSpeed: 150,\r\n        initialHeight: 0\r\n      },\r\n\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    setupCanvas() {\r\n      var canvas = document.createElement('canvas');\r\n      canvas.width = this.options.size;\r\n      canvas.height = this.options.size;\r\n      canvas.imageSmoothingEnabled = true;\r\n      this.context = canvas.getContext(\"2d\");\r\n      this.targetContainer.appendChild(canvas);\r\n\r\n      // shadow is not required  to be on the draw loop\r\n      //#region shadow\r\n      if (this.options.drawShadow) {\r\n        this.context.save();\r\n        this.context.beginPath();\r\n        this.context.filter = \"drop-shadow(0px 4px 6px rgba(0,0,0,0.1))\";\r\n        this.context.arc(this.options.size / 2, this.options.size / 2, this.getMeterRadius() / 2, 0, 2 * Math.PI);\r\n        this.context.closePath();\r\n        this.context.fill();\r\n        this.context.restore();\r\n      }\r\n      //#endregion\r\n    },\r\n    draw() {\r\n      var now = new Date().getTime();\r\n      this.dt = (now - (this.time || now)) / 1000;\r\n      this.time = now;\r\n      // requestAnimationFrame(draw);\r\n      this.context.clearRect(0, 0, this.options.size, this.options.size);\r\n      this.drawMeterBackground();\r\n      this.drawFluid(this.dt);\r\n      if (this.options.drawText) {\r\n        this.drawText();\r\n      }\r\n      this.drawMeterForeground();\r\n    },\r\n\r\n    drawMeterBackground() {\r\n      this.context.save();\r\n      this.context.fillStyle = this.options.backgroundColor;\r\n      this.context.beginPath();\r\n      this.context.arc(this.options.size / 2, this.options.size / 2, this.getMeterRadius() / 2 - this.options.borderWidth, 0, 2 * Math.PI);\r\n      this.context.closePath();\r\n      this.context.fill();\r\n      this.context.restore();\r\n    },\r\n\r\n    drawMeterForeground() {\r\n      this.context.save();\r\n      this.context.lineWidth = this.options.borderWidth;\r\n      this.context.strokeStyle = this.options.foregroundColor;\r\n      this.context.beginPath();\r\n      this.context.arc(this.options.size / 2, this.options.size / 2, this.getMeterRadius() / 2 - this.options.borderWidth / 2, 0, 2 * Math.PI);\r\n      this.context.closePath();\r\n      this.context.stroke();\r\n      this.context.restore();\r\n    },\r\n    drawFluid(dt) {\r\n      this.context.save();\r\n      this.context.arc(this.options.size / 2, this.options.size / 2, this.getMeterRadius() / 2 - this.options.borderWidth, 0, Math.PI * 2);\r\n      this.context.clip();\r\n      this.drawFluidLayer(this.backgroundFluidLayer, this.dt);\r\n      this.drawFluidLayer(this.foregroundFluidLayer, this.dt);\r\n      this.context.restore();\r\n    },\r\n    drawFluidLayer(layer, dt) {\r\n      // calculate wave angle\r\n      if (layer.angularSpeed > 0) {\r\n        layer.angle += layer.angularSpeed * dt;\r\n        layer.angle = layer.angle < 0 ? layer.angle + 360 : layer.angle;\r\n      }\r\n\r\n      // calculate horizontal position\r\n      layer.horizontalPosition += layer.horizontalSpeed * dt;\r\n      if (layer.horizontalSpeed > 0) {\r\n        layer.horizontalPosition > Math.pow(2, 53) ? 0 : layer.horizontalPosition;\r\n      }\r\n      else if (layer.horizontalPosition < 0) {\r\n        layer.horizontalPosition < -1 * Math.pow(2, 53) ? 0 : layer.horizontalPosition;\r\n      }\r\n\r\n      var x = 0;\r\n      var y = 0;\r\n      var amplitude = layer.maxAmplitude * Math.sin(layer.angle * Math.PI / 180);\r\n\r\n      var meterBottom = (this.options.size - (this.options.size - this.getMeterRadius()) / 2) - this.options.borderWidth;\r\n      var fluidAmount = this.currentFillPercentage * (this.getMeterRadius() - this.options.borderWidth * 2) / 100;\r\n\r\n      if (this.currentFillPercentage < this.fillPercentage) {\r\n        this.currentFillPercentage += 15 * dt;\r\n      } else if (this.currentFillPercentage > this.fillPercentage) {\r\n        this.currentFillPercentage -= 15 * dt;\r\n      }\r\n\r\n      layer.initialHeight = meterBottom - fluidAmount;\r\n\r\n      this.context.save();\r\n      this.context.beginPath();\r\n\r\n      this.context.lineTo(0, layer.initialHeight);\r\n\r\n      while (x < this.options.size) {\r\n        y = layer.initialHeight + amplitude * Math.sin((x + layer.horizontalPosition) / layer.frequency);\r\n        this.context.lineTo(x, y);\r\n        x++;\r\n      }\r\n\r\n      this.context.lineTo(x, this.options.size);\r\n      this.context.lineTo(0, this.options.size);\r\n      this.context.closePath();\r\n\r\n      this.context.fillStyle = layer.fillStyle;\r\n      this.context.fill();\r\n      this.context.restore();\r\n\r\n    },\r\n    drawFluidMask(layer) {\r\n      var x = 0;\r\n      var y = 0;\r\n      var amplitude = layer.maxAmplitude * Math.sin(layer.angle * Math.PI / 180);\r\n\r\n      this.context.beginPath();\r\n\r\n      this.context.lineTo(0, layer.initialHeight);\r\n\r\n      while (x < this.options.size) {\r\n        y = layer.initialHeight + amplitude * Math.sin((x + layer.horizontalPosition) / layer.frequency);\r\n        this.context.lineTo(x, y);\r\n        x++;\r\n      }\r\n      this.context.lineTo(x, this.options.size);\r\n      this.context.lineTo(0, this.options.size);\r\n      this.context.closePath();\r\n      this.context.clip();\r\n    },\r\n    // drawBubblesLayer(this.dt) {\r\n    //   this.context.save();\r\n    //   for (var i = 0; i < bubblesLayer.bubbles.length; i++) {\r\n    //     var bubble = bubblesLayer.bubbles[i];\r\n\r\n    //     this.context.beginPath();\r\n    //     this.context.strokeStyle = 'white';\r\n    //     this.context.arc(bubble.x, bubble.y, bubble.r, 2 * Math.PI, false);\r\n    //     this.context.stroke();\r\n    //     this.context.closePath();\r\n\r\n    //     var currentSpeed = bubblesLayer.current * this.dt;\r\n\r\n    //     bubble.velX = Math.abs(bubble.velX) < Math.abs(bubblesLayer.current) ? bubble.velX + currentSpeed : bubblesLayer.current;\r\n    //     bubble.y = bubble.y - bubble.velY * this.dt;\r\n    //     bubble.x = bubble.x + (bubblesLayer.swing ? 0.4 * Math.cos(bubblesLayer.swing += 0.03) * bubblesLayer.swing : 0) + bubble.velX * 0.5;\r\n\r\n    //     // determine if current bubble is outside the safe area\r\n    //     var meterBottom = (this.options.size - (this.options.size - getMeterRadius()) / 2) - this.options.borderWidth;\r\n    //     var fluidAmount = currentFillPercentage * (getMeterRadius() - this.options.borderWidth * 2) / 100;\r\n\r\n    //     if (bubble.y <= meterBottom - fluidAmount) {\r\n    //       bubblesLayer.reset(bubble);\r\n    //     }\r\n\r\n    //   }\r\n    //   this.context.restore();\r\n    // },\r\n    drawText() {\r\n\r\n      var text = this.options.drawPercentageSign ?\r\n        this.currentFillPercentage.toFixed(0) + \"%\" : this.currentFillPercentage.toFixed(0);\r\n\r\n      this.context.save();\r\n      this.context.font = this.getFontSize();\r\n      this.context.fillStyle = this.options.fontFillStyle;\r\n      this.context.textAlign = \"center\";\r\n      this.context.textBaseline = 'middle';\r\n      this.context.filter = \"drop-shadow(0px 0px 5px rgba(0,0,0,0.4))\"\r\n      this.context.fillText(text, this.options.size / 2, this.options.size / 2);\r\n      this.context.restore();\r\n    },\r\n    //#region helper methods\r\n    clamp(number, min, max) {\r\n      return Math.min(Math.max(number, min), max);\r\n    },\r\n    getMeterRadius() {\r\n      return this.options.size * 0.9;\r\n    },\r\n\r\n    random(min, max) {\r\n      var delta = max - min;\r\n      return max === min ? min : Math.random() * delta + min;\r\n    },\r\n\r\n    getFontSize() {\r\n      return this.options.fontSize + \" \" + this.options.fontFamily;\r\n    },\r\n    init() {\r\n    if (!this.targetContainer)\r\n      throw \"empty or invalid container\";\r\n\r\n    // this.targetContainer = this.targetContainer;\r\n    this.fillPercentage = this.clamp(this.fillPercentage, 0, 100);\r\n\r\n    if (this.options) {\r\n      this.options.drawShadow = this.options.drawShadow === false ? false : true;\r\n      // this.options.size = this.options.size;\r\n      this.options.drawBubbles = this.options.drawBubbles === false ? false : true;\r\n      this.options.borderWidth = this.options.borderWidth || this.options.borderWidth;\r\n      this.options.foregroundFluidColor = this.options.foregroundFluidColor || this.options.foregroundFluidColor;\r\n      this.options.backgroundFluidColor = this.options.backgroundFluidColor || this.options.backgroundFluidColor;\r\n      this.options.backgroundColor = this.options.backgroundColor || this.options.backgroundColor;\r\n      this.options.foregroundColor = this.options.foregroundColor || this.options.foregroundColor;\r\n\r\n      this.options.drawText = this.options.drawText === false ? false : true;\r\n      this.options.drawPercentageSign = this.options.drawPercentageSign === false ? false : true;\r\n      this.options.fontSize = this.options.fontSize || this.options.fontSize;\r\n      this.options.fontFamily = this.options.fontFamily || this.options.fontFamily;\r\n      this.options.fontFillStyle = this.options.fontFillStyle || this.options.fontFillStyle;\r\n      // fluid settings\r\n\r\n      if (this.options.foregroundFluidLayer) {\r\n        this.foregroundFluidLayer.fillStyle = this.options.foregroundFluidLayer.fillStyle || this.foregroundFluidLayer.fillStyle;\r\n        this.foregroundFluidLayer.angularSpeed = this.options.foregroundFluidLayer.angularSpeed || this.foregroundFluidLayer.angularSpeed;\r\n        this.foregroundFluidLayer.maxAmplitude = this.options.foregroundFluidLayer.maxAmplitude || this.foregroundFluidLayer.maxAmplitude;\r\n        this.foregroundFluidLayer.frequency = this.options.foregroundFluidLayer.frequency || this.foregroundFluidLayer.frequency;\r\n        this.foregroundFluidLayer.horizontalSpeed = this.options.foregroundFluidLayer.horizontalSpeed || this.foregroundFluidLayer.horizontalSpeed;\r\n      }\r\n\r\n      if (this.options.backgroundFluidLayer) {\r\n        this.backgroundFluidLayer.fillStyle = this.options.backgroundFluidLayer.fillStyle || this.backgroundFluidLayer.fillStyle;\r\n        this.backgroundFluidLayer.angularSpeed = this.options.backgroundFluidLayer.angularSpeed || this.backgroundFluidLayer.angularSpeed;\r\n        this.backgroundFluidLayer.maxAmplitude = this.options.backgroundFluidLayer.maxAmplitude || this.backgroundFluidLayer.maxAmplitude;\r\n        this.backgroundFluidLayer.frequency = this.options.backgroundFluidLayer.frequency || this.backgroundFluidLayer.frequency;\r\n        this.backgroundFluidLayer.horizontalSpeed = this.options.backgroundFluidLayer.horizontalSpeed || this.backgroundFluidLayer.horizontalSpeed;\r\n      }\r\n    }\r\n    // bubblesLayer.init();\r\n    this.setupCanvas();\r\n    this.draw();\r\n  },\r\n    setPercentage(percentage) {\r\n      this.fillPercentage = this.clamp(percentage, 0, 100);\r\n    }\r\n\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}