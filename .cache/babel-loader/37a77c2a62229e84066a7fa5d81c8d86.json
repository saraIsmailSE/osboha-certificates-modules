{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport iqCard from '../../../components/custom/cards/iq-card.vue';\nimport UserInfo from \"../../../services/userInfo.service\";\nimport questionServices from '../../../api/questionServices';\nexport default {\n  components: {\n    iqCard: iqCard\n  },\n  name: 'ListQuestions',\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(UserInfo.getRole()[0] === 'reviewer' || UserInfo.getRole()[0] === 'admin')) {\n                _context.next = 5;\n                break;\n              }\n\n              _this.status = \"review\";\n              _context.next = 4;\n              return _this.Questions(_this.status);\n\n            case 4:\n              _this.questionsToReview = _context.sent;\n\n            case 5:\n              if (!(UserInfo.getRole()[0] === 'auditor' || UserInfo.getRole()[0] === 'admin')) {\n                _context.next = 10;\n                break;\n              }\n\n              _this.status = \"audit\";\n              _context.next = 9;\n              return _this.Questions(_this.status);\n\n            case 9:\n              _this.questionsToAudit = _context.sent;\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  data: function data() {\n    return {\n      questionsToReview: [],\n      questionsToAudit: [],\n      status: ''\n    };\n  },\n  methods: {\n    Questions: function Questions(status) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return questionServices.getByStatus(status);\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    listQuestions: function listQuestions(user_book_id) {\n      this.$router.push({\n        name: 'questions.questions',\n        params: {\n          user_book_id: user_book_id\n        }\n      });\n    }\n  },\n  computed: {\n    totalQuestions: function totalQuestions() {\n      return this.questionsToAudit.length + this.questionsToReview.length;\n    }\n  }\n};","map":{"version":3,"mappings":";;AAoGA,OAAOA,MAAP,MAAmB,8CAAnB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AAEA,eAAe;EACXC,UAAU,EAAE;IAAEH,MAAK,EAALA;EAAF,CADD;EAEXI,IAAI,EAAE,eAFK;EAGLC,OAHK,qBAGK;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACRJ,QAAQ,CAACK,OAAT,GAAmB,CAAnB,MAA0B,UAA1B,IAAwCL,QAAQ,CAACK,OAAT,GAAmB,CAAnB,MAA0B,OAD1D;gBAAA;gBAAA;cAAA;;cAER,KAAI,CAACC,MAAL,GAAc,QAAd;cAFQ;cAAA,OAGuB,KAAI,CAACC,SAAL,CAAe,KAAI,CAACD,MAApB,CAHvB;;YAAA;cAGR,KAAI,CAACE,iBAHG;;YAAA;cAAA,MAKRR,QAAQ,CAACK,OAAT,GAAmB,CAAnB,MAA0B,SAA1B,IAAuCL,QAAQ,CAACK,OAAT,GAAmB,CAAnB,MAA0B,OALzD;gBAAA;gBAAA;cAAA;;cAOR,KAAI,CAACC,MAAL,GAAc,OAAd;cAPQ;cAAA,OAQsB,KAAI,CAACC,SAAL,CAAe,KAAI,CAACD,MAApB,CARtB;;YAAA;cAQR,KAAI,CAACG,gBARG;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAWf,CAdU;EAgBXC,IAhBW,kBAgBJ;IACH,OAAO;MACHF,iBAAiB,EAAE,EADhB;MAEHC,gBAAgB,EAAE,EAFf;MAGHH,MAAM,EAAE;IAHL,CAAP;EAKH,CAtBU;EAuBXK,OAAO,EAAE;IACCJ,SADD,qBACWD,MADX,EACmB;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACPL,gBAAgB,CAACW,WAAjB,CAA6BN,MAA7B,CADO;;cAAA;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEvB,CAHI;IAILO,aAJK,yBAISC,YAJT,EAIuB;MACxB,KAAKC,OAAL,CAAaC,IAAb,CAAkB;QAACb,IAAI,EAAC,qBAAN;QAA6Bc,MAAM,EAAE;UAAEH,YAAY,EAAEA;QAAhB;MAArC,CAAlB;IACH;EANI,CAvBE;EA+BXI,QAAQ,EAAE;IACNC,cADM,4BACW;MACb,OAAO,KAAKV,gBAAL,CAAsBW,MAAtB,GAA+B,KAAKZ,iBAAL,CAAuBY,MAA7D;IACJ;EAHM;AA/BC,CAAf","names":["iqCard","UserInfo","questionServices","components","name","created","getRole","status","Questions","questionsToReview","questionsToAudit","data","methods","getByStatus","listQuestions","user_book_id","$router","push","params","computed","totalQuestions","length"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\Questions\\list.vue"],"sourcesContent":["<template>\n    <div class=\"row\">\n        <div class=\"col-sm-12\">\n            <div class=\"card position-relative inner-page-bg bg-primary\" style=\"height: 150px;\">\n                <div class=\"inner-page-title\">\n                    <h3 class=\"text-white\">مراجعة الأسئلة</h3>\n                    <p class=\"text-white\">تبقى {{totalQuestions}} سؤال </p>\n                </div>\n            </div>\n        </div>\n        <div class=\"col-sm-12\" v-if=\"questionsToReview.length>0\">\n            <iq-card>\n                <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">أسئلة بحاجة للمراجعة</h4>\n                </template>\n                <template v-slot:body>\n                    <div class=\"table-responsive\">\n                        <table id=\"datatable\" class=\"table table-striped table-bordered\">\n                            <thead>\n                                <tr>\n                                    <th>اسم السفير</th>\n                                    <th>اسم الكتاب</th>\n                                    <th>عدد الأسئلة</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr v-for=\"question in questionsToReview\" :key=\"question.id\">\n                                    <td>\n                                        <a href=\"javascript:void(0);\" @click=\"listQuestions(question.user_book.id)\">\n                                            {{ question.user_book.user.name }}\n                                        </a>\n\n                                    </td>\n                                    <td>\n                                        {{ question.user_book.book.book_name }}\n                                    </td>\n                                    <td>\n                                        {{ question}}\n                                    </td>\n                                </tr>\n\n                            </tbody>\n                        </table>\n                    </div>\n                </template>\n            </iq-card>\n        </div>\n        <div class=\"col-sm-12\" v-else-if=\"questionsToAudit.length>0\">\n            <iq-card>\n                <template v-slot:headerTitle>\n                    <h4 class=\"card-title\">أسئلة بحاجة للتدقيق</h4>\n                </template>\n                <template v-slot:body>\n                    <div class=\"table-responsive\">\n                        <table id=\"datatable\" class=\"table table-striped table-bordered\">\n                            <thead>\n                                <tr>\n                                    <th>اسم السفير</th>\n                                    <th>اسم الكتاب</th>\n                                    <th>عدد الأسئلة</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr v-for=\"question in questionsToAudit\" :key=\"question.id\">\n                                    <td>\n                                        <a href=\"javascript:void(0);\" @click=\"listQuestions(question.user_book.id)\">\n                                            ***************\n                                        </a>\n\n                                    </td>\n                                    <td>\n                                        {{ question.user_book.book.book_name }}\n                                    </td>\n                                    <td>\n                                        {{ question.user_book.questions.length }} \n                                    </td>\n                                </tr>\n\n                            </tbody>\n                        </table>\n                    </div>\n                </template>\n            </iq-card>\n        </div>\n        <div class=\"col-sm-12\" v-else>\n            <iq-card class=\"iq-card\">\n                <div class=\"iq-card-body p-0\">\n                    <div class=\"image-block text-center\">\n                        <img src=\"@/assets/images/export-congrats.png\" class=\"img-fluid rounded w-50\" alt=\"blog-img\">\n                    </div>\n\n                    <h4 class=\"text-center mt-3 mb-3\">لا يوجد أسئلة</h4>\n                </div>\n            </iq-card>\n\n        </div>\n\n    </div>\n</template>\n<script>\nimport iqCard from '../../../components/custom/cards/iq-card.vue'\nimport UserInfo from \"../../../services/userInfo.service\";\nimport questionServices from '../../../api/questionServices'\n\nexport default {\n    components: { iqCard },\n    name: 'ListQuestions',\n    async created() {\n        if (UserInfo.getRole()[0] === 'reviewer' || UserInfo.getRole()[0] === 'admin') {\n            this.status = \"review\";\n            this.questionsToReview = await this.Questions(this.status)\n        }\n        if (UserInfo.getRole()[0] === 'auditor' || UserInfo.getRole()[0] === 'admin') {\n\n            this.status = \"audit\";\n            this.questionsToAudit = await this.Questions(this.status)\n        }\n\n    },\n\n    data() {\n        return {\n            questionsToReview: [],\n            questionsToAudit: [],\n            status: '',\n        }\n    },\n    methods: {\n        async Questions(status) {\n            return await questionServices.getByStatus(status);\n        },\n        listQuestions(user_book_id) {\n            this.$router.push({name:'questions.questions', params: { user_book_id: user_book_id } })\n        },\n    },\n    computed: {\n        totalQuestions() {\n            return this.questionsToAudit.length + this.questionsToReview.length;\n        }\n    },\n\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}