{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, integer, requiredIf } from \"@vuelidate/validators\";\nimport { createThesis } from '../../api/thesis/createThesis';\nexport default {\n  name: \"CreateThesis\",\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  props: [\"pages\", \"user_book_id\"],\n  data: function data() {\n    return {\n      thesis: {\n        text: \"\",\n        pageStart: \"\",\n        pageEnd: \"\",\n        file: []\n      }\n    };\n  },\n  validations: function validations() {\n    return {\n      thesis: {\n        text: {\n          required: required\n        },\n        pageStart: {\n          required: required\n        },\n        pageEnd: {\n          required: required\n        },\n        file: {\n          required: requiredIf(function (nestedModel) {\n            return this.thesis.file.length == 0; // New changes\n          })\n        }\n      }\n    };\n  },\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var thesis;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.v$.$touch();\n\n                if (_this.v$.thesis.$invalid) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 4;\n                return createThesis(_this.thesis, _this.user_book_id);\n\n              case 4:\n                thesis = _context.sent;\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    uploadFile: function uploadFile() {\n      this.thesis.file = this.$refs.file.files;\n    }\n  }\n};","map":{"version":3,"mappings":";;AA8EA,OAAOA,YAAP,MAAyB,iBAAzB;AACA,SAASC,QAAT,EAAmBC,OAAnB,EAA4BC,UAA5B,QAA8C,uBAA9C;AACA,SAAQC,YAAR,QAA2B,+BAA3B;AACA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,KAFa,mBAEL;IACN,OAAO;MAAEC,EAAE,EAAEP,YAAY;IAAlB,CAAP;EACD,CAJY;EAKbQ,KAAK,EAAE,CAAC,OAAD,EAAU,cAAV,CALM;EAMbC,IANa,kBAMN;IACL,OAAO;MACLC,MAAM,EAAE;QACNC,IAAI,EAAE,EADA;QAENC,SAAS,EAAE,EAFL;QAGNC,OAAO,EAAE,EAHH;QAINC,IAAI,EAAE;MAJA;IADH,CAAP;EAQD,CAfY;EAgBbC,WAhBa,yBAgBC;IACZ,OAAO;MACLL,MAAM,EAAE;QACNC,IAAI,EAAE;UACJV,QAAQ,EAARA;QADI,CADA;QAINW,SAAS,EAAE;UACTX,QAAQ,EAARA;QADS,CAJL;QAONY,OAAO,EAAE;UACPZ,QAAQ,EAARA;QADO,CAPH;QAUNa,IAAI,EAAE;UACJb,QAAQ,EAAEE,UAAU,CAAC,UAAUa,WAAV,EAAuB;YAC1C,OAAO,KAAKN,MAAL,CAAYI,IAAZ,CAAiBG,MAAjB,IAA2B,CAAlC,CAD0C,CACL;UACtC,CAFmB;QADhB;MAVA;IADH,CAAP;EAkBD,CAnCY;EAoCbC,OAAO,EAAE;IACDC,MADC,oBACQ;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACb,KAAI,CAACZ,EAAL,CAAQa,MAAR;;gBADa,IAER,KAAI,CAACb,EAAL,CAAQG,MAAR,CAAeW,QAFP;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAGYjB,YAAY,CAAC,KAAI,CAACM,MAAN,EAAa,KAAI,CAACY,YAAlB,CAHxB;;cAAA;gBAGHZ,MAHG;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAKd,CANM;IAOPa,UAPO,wBAOM;MACX,KAAKb,MAAL,CAAYI,IAAZ,GAAmB,KAAKU,KAAL,CAAWV,IAAX,CAAgBW,KAAnC;IACD;EATM;AApCI,CAAf","names":["useVuelidate","required","integer","requiredIf","createThesis","name","setup","v$","props","data","thesis","text","pageStart","pageEnd","file","validations","nestedModel","length","methods","submit","$touch","$invalid","user_book_id","uploadFile","$refs","files"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\components\\Theses\\CreateThesis.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <iq-card\r\n      id=\"post-modal-data\"\r\n      body-class=\"iq-card iq-card-block iq-card-stretch iq-card-height\"\r\n    >\r\n      <template v-slot:headerTitle>\r\n        <h4 class=\"card-title\">إضافة الأطروحة 7</h4>\r\n      </template>\r\n      <template v-slot:body>\r\n        <div class=\"d-flex align-items-center\">\r\n          <form @submit.prevent=\"submit\" class=\"post-text ml-3 w-100 row\">\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.pageStart.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة البداية</option>\r\n                <option v-for=\"(i, index) in pages\" :key=\"index\" :value=\"i\">\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-group col-6\">\r\n              <select\r\n                class=\"form-select\"\r\n                data-trigger\r\n                name=\"choices-single-default\"\r\n                id=\"choices-single-default\"\r\n                v-model=\"v$.thesis.pageEnd.$model\"\r\n              >\r\n                <option value=\"\">اختر صفحة النهاية</option>\r\n                <option v-for=\"(i, index) in pages\" :key=\"index\" :value=\"i\">\r\n                  {{ i }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\" for=\"thesisBody\">الأطروحة</label>\r\n              <textarea\r\n                rows=\"5\"\r\n                placeholder=\"... اكتب أطروحتك\"\r\n                class=\"rounded form-control\"\r\n                id=\"thesisBody\"\r\n                v-model=\"thesis.text\"\r\n              ></textarea>\r\n              <p class=\"error\" v-if=\"!v$.thesis.text.required\">الرجاء قم بادخال البريد الالكتروني</p>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\" for=\"customFile\"\r\n                >صورة من مجموعة السفراء</label\r\n              >\r\n              <input\r\n                class=\"form-control\"\r\n                type=\"file\"\r\n                id=\"customFile\"\r\n                ref=\"file\"\r\n                @change=\"uploadFile\"\r\n              />\r\n            </div>\r\n            <input\r\n              type=\"submit\"\r\n              value=\"اضافه\"\r\n              href=\"javascript:void(0);\"\r\n              class=\"btn btn-primary d-block mt-3\"\r\n            />\r\n          </form>\r\n        </div>\r\n        <hr />\r\n      </template>\r\n    </iq-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport useVuelidate from \"@vuelidate/core\";\r\nimport { required, integer, requiredIf } from \"@vuelidate/validators\";\r\nimport {createThesis} from '../../api/thesis/createThesis'\r\nexport default {\r\n  name: \"CreateThesis\",\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  props: [\"pages\", \"user_book_id\"],\r\n  data() {\r\n    return {\r\n      thesis: {\r\n        text: \"\",\r\n        pageStart: \"\",\r\n        pageEnd: \"\",\r\n        file: [],\r\n      },\r\n    };\r\n  },\r\n  validations() {\r\n    return {\r\n      thesis: {\r\n        text: {\r\n          required,\r\n        },\r\n        pageStart: {\r\n          required,\r\n        },\r\n        pageEnd: {\r\n          required,\r\n        },\r\n        file: {\r\n          required: requiredIf(function (nestedModel) {\r\n            return this.thesis.file.length == 0; // New changes\r\n          }),\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async submit() {\r\n      this.v$.$touch();\r\n      if (!this.v$.thesis.$invalid) {\r\n          const thesis = await createThesis(this.thesis,this.user_book_id)\r\n      }\r\n    },\r\n    uploadFile() {\r\n      this.thesis.file = this.$refs.file.files;\r\n    }, \r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}