{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/someO/Desktop/vue/osboha-template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport CreateThesis from \"../../components/Thesis/CreateThesis.vue\";\nimport ThesisDisplay from \"../../components/Thesis/ThesisDisplay\";\nimport thesisServices from \"../../api/thesisServices\";\nexport default {\n  name: \"Theses\",\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.getTheses();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  components: {\n    CreateThesis: CreateThesis,\n    ThesisDisplay: ThesisDisplay\n  },\n  data: function data() {\n    return {\n      already_have_one: 0,\n      auditable: false,\n      book: null,\n      user_book: null,\n      status: \"\",\n      theses: [],\n      thesisLength: 0,\n      thesisTitle: \"الأطروحة رقم\",\n      error: \"\"\n    };\n  },\n  methods: {\n    getTheses: function getTheses() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return thesisServices.getByBook(_this2.$route.params.book_id);\n\n              case 2:\n                response = _context2.sent;\n                _this2.book = response.user_book.book;\n                _this2.theses = response.theses;\n                _this2.user_book = response.user_book;\n                _this2.status = user_book.status;\n                console.log(_this2.user_book.status);\n                _this2.auditable = _this2.theses.some(function (element) {\n                  if (element.status === \"rejected\" || element.status === null) {\n                    return true;\n                  }\n\n                  return false;\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    addThesis: function addThesis(thesis) {\n      this.theses.push(thesis);\n      this.thesisLength++;\n      this.user_book_info[0].value++;\n      this.auditable = true;\n    },\n    reviewThesisStatus: function reviewThesisStatus() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var swalWithBootstrapButtons;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                swalWithBootstrapButtons = _this3.$swal.mixin({\n                  customClass: {\n                    confirmButton: \"btn btn-primary btn-lg\",\n                    cancelButton: \"btn btn-outline-primary btn-lg ms-2\"\n                  },\n                  buttonsStyling: false\n                });\n                swalWithBootstrapButtons.fire({\n                  title: \"هل أنت متأكد؟\",\n                  text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\n                  icon: \"warning\",\n                  showCancelButton: true,\n                  confirmButtonText: \"نعم قم بطلب تدقيق\",\n                  cancelButtonText: \"تراجع  \",\n                  showClass: {\n                    popup: \"animate__animated animate__zoomIn\"\n                  },\n                  hideClass: {\n                    popup: \"animate__animated animate__zoomOut\"\n                  }\n                }).then(function (willDelete) {\n                  if (willDelete.isConfirmed) {\n                    thesisServices.reviewThesis(_this3.user_book.id).then(function (response) {\n                      swalWithBootstrapButtons.fire({\n                        title: \"تم الارسال\",\n                        text: \"تم ارسال طلبك للتدقيق\",\n                        icon: \"success\",\n                        showClass: {\n                          popup: \"animate__animated animate__zoomIn\"\n                        },\n                        hideClass: {\n                          popup: \"animate__animated animate__zoomOut\"\n                        }\n                      });\n                      location.reload();\n                    })[\"catch\"](function (error) {\n                      console.log(error);\n                    });\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        path: \"/book\"\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["CreateThesis","ThesisDisplay","thesisServices","name","created","getTheses","components","data","already_have_one","auditable","book","user_book","status","theses","thesisLength","thesisTitle","error","methods","getByBook","$route","params","book_id","response","console","log","some","element","addThesis","thesis","push","user_book_info","value","reviewThesisStatus","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","reviewThesis","id","location","reload","back","$router","path"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Achievement\\Theses.vue"],"sourcesContent":["<template>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-12\">\r\n            <iq-card>\r\n                <div class=\"iq-card-body profile-page p-0\">\r\n                    <div class=\"profile-header\">\r\n                        <div class=\"cover-container\">\r\n                            <img src=\"../../assets/images/book-banner.png\" alt=\"profile-bg\" class=\"rounded img-fluid\" />\r\n                        </div>\r\n                        <div class=\"user-detail text-center mb-3\">\r\n                            <div class=\"profile-img\">\r\n                                <img src=\"../../assets/images/reader.png\" alt=\"profile-img\"\r\n                                    class=\"avatar-130 img-fluid\" />\r\n                            </div>\r\n                            <div class=\"profile-detail mt-1\">\r\n                                <br />\r\n                                <h3 class=\"\" v-if=\"book\">{{book.book_name}} - قسم الأطروحات</h3>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n            <iq-card class=\"iq-card\">\r\n                <div class=\"iq-card-body p-0\">\r\n                    <div class=\"user-tabing\">\r\n                        <tab-nav :pills=\"true\" id=\"pills-tab\"\r\n                            class=\"nav nav-pills d-flex align-items-center justify-content-center profile-feed-items p-0 m-0\">\r\n                            <tab-nav-items class=\"w-100 p-0\" :active=\"true\" id=\"pills-feed-tab\" href=\"#theses_container\"\r\n                                ariaControls=\"pills-home\" role=\"tab\" :ariaSelected=\"true\"\r\n                                title=\"المرحلة الأولى - الأطروحات\" />\r\n                        </tab-nav>\r\n                    </div>\r\n                </div>\r\n            </iq-card>\r\n        </div>\r\n        <div class=\"col-sm-12\">\r\n            <div class=\"tab-content\">\r\n                <!-- START STAGE ONE -->\r\n                <tab-content-item :active=\"true\" id=\"theses_container\" aria-labelled-by=\"pills-feed-tab\">\r\n                    <div class=\"iq-card-body p-0\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-lg-4\">\r\n\r\n                                <iq-card v-if=\"theses.length >= 8 && auditable && status == 'stage_one'\">\r\n                                    <template v-slot:body>\r\n                                        <button class=\"btn btn-primary d-block w-100\" @click=\"reviewThesisStatus\">\r\n                                            طلب تدقيق\r\n                                        </button>\r\n                                    </template>\r\n                                </iq-card>\r\n                            </div>\r\n                            <div class=\"col-12\">\r\n                                <div id=\"post-modal-data\" class=\"iq-card\">\r\n                                    <CreateThesis @add-thesis=\"addThesis\" :book=\"book\" :noOfthesis=\"theses.length\"\r\n                                        :user_book=\"user_book\" v-if=\"\r\n                                          (theses.length < 12 &&\r\n                                            status === 'stage_one' &&\r\n                                            auditable) ||\r\n                                          theses.length == 0\r\n                                        \" />\r\n                                </div>\r\n                                <div v-for=\"(thesis, index) in theses\" :key=\"index\">\r\n                                    <ThesisDisplay :thesis=\"thesis\" :number=\"index\" :title=\"thesisTitle\" :book=\"book\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tab-content-item>\r\n                <!-- END STAGE ONE -->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template >\r\n<script>\r\nimport CreateThesis from \"../../components/Thesis/CreateThesis.vue\";\r\nimport ThesisDisplay from \"../../components/Thesis/ThesisDisplay\";\r\nimport thesisServices from \"../../api/thesisServices\";\r\n\r\nexport default {\r\n    name: \"Theses\",\r\n    async created() {\r\n        await this.getTheses();\r\n    },\r\n    components: {\r\n        CreateThesis,\r\n        ThesisDisplay,\r\n    },\r\n    data() {\r\n        return {\r\n            already_have_one: 0,\r\n            auditable: false,\r\n            book: null,\r\n            user_book: null,\r\n            status: \"\",\r\n            theses: [],\r\n            thesisLength: 0,\r\n            thesisTitle: \"الأطروحة رقم\",\r\n            error: \"\",\r\n        };\r\n    },\r\n    methods: {\r\n        async getTheses() {\r\n            const response = await thesisServices.getByBook(this.$route.params.book_id);\r\n            this.book = response.user_book.book\r\n            this.theses = response.theses\r\n            this.user_book = response.user_book\r\n            this.status=user_book.status\r\n            console.log(this.user_book.status)\r\n            this.auditable = this.theses.some((element) => {\r\n                if (element.status === \"rejected\" || element.status === null) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n\r\n\r\n        },\r\n        addThesis(thesis) {\r\n            this.theses.push(thesis);\r\n            this.thesisLength++;\r\n            this.user_book_info[0].value++;\r\n            this.auditable = true;\r\n        },\r\n        async reviewThesisStatus() {\r\n            const swalWithBootstrapButtons = this.$swal.mixin({\r\n                customClass: {\r\n                    confirmButton: \"btn btn-primary btn-lg\",\r\n                    cancelButton: \"btn btn-outline-primary btn-lg ms-2\",\r\n                },\r\n                buttonsStyling: false,\r\n            });\r\n            swalWithBootstrapButtons\r\n                .fire({\r\n                    title: \"هل أنت متأكد؟\",\r\n                    text: \"في حال طلبك للتدقيق لن يمكنك اضافة  أطروحة جديدة أو التعديل على الأطروحات التي كتبتها \",\r\n                    icon: \"warning\",\r\n                    showCancelButton: true,\r\n                    confirmButtonText: \"نعم قم بطلب تدقيق\",\r\n                    cancelButtonText: \"تراجع  \",\r\n                    showClass: {\r\n                        popup: \"animate__animated animate__zoomIn\",\r\n                    },\r\n                    hideClass: {\r\n                        popup: \"animate__animated animate__zoomOut\",\r\n                    },\r\n                })\r\n                .then((willDelete) => {\r\n                    if (willDelete.isConfirmed) {\r\n                        thesisServices\r\n                            .reviewThesis(this.user_book.id)\r\n                            .then((response) => {\r\n                                swalWithBootstrapButtons.fire({\r\n                                    title: \"تم الارسال\",\r\n                                    text: \"تم ارسال طلبك للتدقيق\",\r\n                                    icon: \"success\",\r\n                                    showClass: {\r\n                                        popup: \"animate__animated animate__zoomIn\",\r\n                                    },\r\n                                    hideClass: {\r\n                                        popup: \"animate__animated animate__zoomOut\",\r\n                                    },\r\n\r\n                                });\r\n                                location.reload()\r\n                            })\r\n                            .catch((error) => {\r\n                                console.log(error);\r\n                            });\r\n                    }\r\n                });\r\n\r\n        },\r\n        back() {\r\n            this.$router.push({ path: `/book` });\r\n        },\r\n    },\r\n};\r\n</script>\r\n  "]},"metadata":{},"sourceType":"module"}