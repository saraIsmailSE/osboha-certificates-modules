{"ast":null,"code":"import \"core-js/modules/es.parse-int.js\";\nimport UserInfo from '../../../services/userInfo.service';\nimport thesisServices from '../../../api/thesisServices';\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\nexport default {\n  name: 'Thesis',\n  created: function created() {\n    this.role = UserInfo.getRole()[0];\n  },\n  setup: function setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  props: ['thesis'],\n  data: function data() {\n    return {\n      role: '',\n      retard: false,\n      retardNote: '',\n      reviweNote: '',\n      mark: 70,\n      markCondition: true\n    };\n  },\n  validations: function validations() {\n    return {\n      retardNote: {\n        required: requiredIf(function (nestedModel) {\n          return this.retard == true;\n        })\n      },\n      reviweNote: {\n        required: required\n      }\n    };\n  },\n  methods: {\n    changeTab: function changeTab(value) {\n      this.$emit('onNext', value);\n    },\n    resolve_img_url: function resolve_img_url(image) {\n      var url = \"http://127.0.0.1:8000/api/thesises/image?path=\".concat(image);\n      return url;\n    },\n    checkMark: function checkMark() {\n      this.markCondition = parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100;\n    },\n    addDegree: function addDegree(id) {\n      var _this = this;\n\n      this.v$.$touch();\n      this.checkMark();\n\n      if (!this.v$.reviweNote.$invalid && this.markCondition) {\n        var swalWithBootstrapButtons = this.$swal.mixin({\n          customClass: {\n            confirmButton: 'btn btn-primary btn-lg',\n            cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n          },\n          buttonsStyling: false\n        });\n        swalWithBootstrapButtons.fire({\n          title: 'هل أنت متأكد؟',\n          text: \"موافقتك تعني أن هذه الأطروحة تمت مراجعتها\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonText: 'تمت المراجعة  ',\n          cancelButtonText: 'تراجع  ',\n          showClass: {\n            popup: 'animate__animated animate__zoomIn'\n          },\n          hideClass: {\n            popup: 'animate__animated animate__zoomOut'\n          }\n        }).then(function (willDelete) {\n          if (willDelete.isConfirmed) {\n            thesisServices.addDegree(id, _this.reviweNote, _this.mark).then(function (response) {\n              swalWithBootstrapButtons.fire({\n                title: 'تمت المراجعة',\n                text: 'تم مراجعة الأطروحة',\n                icon: 'success',\n                showClass: {\n                  popup: 'animate__animated animate__zoomIn'\n                },\n                hideClass: {\n                  popup: 'animate__animated animate__zoomOut'\n                }\n              });\n              location.reload();\n            })[\"catch\"](function (error) {\n              console.log(error);\n            });\n          }\n        });\n      }\n    },\n    setRetard: function setRetard() {\n      this.retard = true;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["UserInfo","thesisServices","useVuelidate","required","requiredIf","name","created","role","getRole","setup","v$","props","data","retard","retardNote","reviweNote","mark","markCondition","validations","nestedModel","methods","changeTab","value","$emit","resolve_img_url","image","url","checkMark","parseInt","addDegree","id","$touch","$invalid","swalWithBootstrapButtons","$swal","mixin","customClass","confirmButton","cancelButton","buttonsStyling","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","showClass","popup","hideClass","then","willDelete","isConfirmed","location","reload","console","log","error","setRetard"],"sourceRoot":"","sources":["C:\\Users\\someO\\Desktop\\vue\\osboha-template\\src\\views\\Review\\Thesis\\thesis.vue"],"sourcesContent":["<template>\n    <div class=\"form-card text-start\">\n        <form>\n            <div class=\"row setup-content\" id=\"user-detail\">\n                <div class=\"col-sm-12\" v-if=\"thesis.status\">\n                    <div class=\"col-md-12 p-0\">\n                        <h3 class=\"mb-4\">معلومات الاطروحة</h3>\n                        <div class=\"row\">\n                            <div class=\"col-6 form-group\">\n                                <label for=\"uname\" class=\"form-label\">صفحة البداية</label>\n                                <label class=\"form-control-plaintext\">{{ thesis.starting_page }}</label>\n                            </div>\n                            <div class=\"col-6 form-group\">\n                                <label for=\"emailid\" class=\"form-label\">صفحة النهاية</label>\n                                <label class=\"form-control-plaintext\">{{ thesis.ending_page }}</label>\n                            </div>\n                            <hr>\n\n                            <div class=\"col-md-12 form-group\">\n                                <div class=\"col-md-12 form-group\">\n                                    <label for=\"emailid\" class=\"form-label\"> الاطروحة</label>\n                                    <p class=\"form-control-plaintext\">{{ thesis.thesis_text }}</p>\n                                </div>\n                                <div class=\"user-post\">\n                                    <div class=\" d-grid grid-rows-2 grid-flow-col gap-3\">\n                                        <div class=\"row-span-2 row-span-md-1 text-center\" v-for=\"photo in thesis.photos\"\n                                            :key=\"photo.path.id\">\n                                            <img :src=\"resolve_img_url(photo.path)\" alt=\"post-image\"\n                                                class=\"img-fluid rounded w-50\" />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"col-md-12 form-group\">\n                                </div>\n                            </div>\n                            <div class=\"col-md-12 mb-3 form-group\"\n                                v-if=\"(thesis.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                <label for=\"address\" class=\"form-label\">* ملاحظات المراجع </label>\n                                <textarea name=\"address\" class=\"form-control\" id=\"address\" rows=\"5\" required=\"required\"\n                                    v-model=\"reviweNote\"></textarea>\n                                <small style=\"color: red\" v-if=\"v$.reviweNote.$error\">\n                                    {{'ملاحظاتك مطلوبة'}}\n                                </small>\n\n                            </div>\n\n                            <div v-if=\"(thesis.status == 'audit' && (role == 'auditor' || role == 'admin'))\">\n                                <div class=\"row form-group\">\n                                    <label for=\"address\" class=\"form-label\"> * التقييم المناسب </label>\n                                    <select class=\"form-select\" data-trigger name=\"choices-single-default\"\n                                        id=\"choices-single-default\">\n                                        <option value=\"\">اختر التقييم المناسب</option>\n                                        <option value=\"\">امتياز</option>\n                                        <option value=\"\">ممتاز</option>\n                                        <option value=\"\">جيد جدًا</option>\n                                        <option value=\"\">مقبول</option>\n                                    </select>\n                                    <small style=\"color: red\" v-if=\"!markCondition\">\n                                        {{'اختر التقييم المناسب'}}\n                                    </small>\n\n                                    <div class=\"col-md-3 form-group mt-3\">\n                                        <a href=\"javascript:void(0);\" @click=\"addDegree(thesis.id)\"\n                                            class=\"btn btn-primary d-block\">إضافة</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <iq-card v-if=\"(thesis.status == 'review' && (role == 'reviewer' || role == 'admin'))\">\n                                <template v-slot:headerTitle>\n                                    <h4 class=\"card-title\">عنوان</h4>\n                                </template>\n                                <template v-slot:body>\n                                    <div>\n                                        <div\n                                            class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                            <input type=\"checkbox\" class=\"form-check-input\" id=\"customCheck-22\">\n                                            <label class=\"form-check-label\" for=\"customCheck-22\">الشرط الأول</label>\n                                        </div>\n\n                                        <div\n                                            class=\"form-check form-check-inline form-checkbox form-checkbox-color me-2\">\n                                            <input type=\"checkbox\" class=\"form-check-input\" id=\"customCheck-22\">\n                                            <label class=\"form-check-label\" for=\"customCheck-22\">الشرط الثاني</label>\n                                        </div>\n\n                                        <div class=\"mt-2\">\n                                            <small class=\"d-inline\"> * يتم الحفظ تلقائيًا</small>\n                                        </div>\n                                        <!-- RETARD -->\n                                        <a href=\"javascript:void(0);\" class=\"btn btn-warning d-block mt-3 w-100\"\n                                            v-if=\"!retard\" @click=\"setRetard()\">اعادة</a>\n                                        <div class=\"col-md-12 mb-3 form-group mt-2\" v-if=\"retard\">\n                                            <label for=\"retardNote\" class=\"form-label\">سبب الاعادة *</label>\n                                            <textarea name=\"retardNote\" class=\"form-control\" id=\"retardNote\" rows=\"5\"\n                                                required=\"required\" v-model=rejectNote></textarea>\n                                            <small style=\"color: red\" v-if=\"v$.retardNote.$error\">\n                                                {{'سبب الرفض مطلوب'}}\n                                            </small>\n                                            <a href=\"javascript:void(0);\" class=\"btn btn-warning d-block mt-3\"\n                                                @click=\"retardThesis(thesis.id)\">اعادة</a>\n                                        </div>\n                                        <!-- END RETARD -->\n\n\n                                    </div>\n                                </template>\n                            </iq-card>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"thesis.status == 'audited'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تمت المراجعة</h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: 'تمت المراجعة',\n                                    description: thesis.auditor.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                                                \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n                <div class=\"col-lg-12\" v-if=\"thesis.status == 'rejected'\">\n                    <iq-card>\n                        <template v-slot:headerTitle>\n                            <h4 class=\"card-title\">تم التدقيق </h4>\n                        </template>\n                        <template v-slot:body>\n                            <TimeLine :items=\"[\n                                {\n                                    color: 'primary',\n                                    title: ' مرفوض',\n                                    description: thesis.reviewer.name,\n                                    child: {\n                                        type: 'img',\n                                        items: [\n                                        ]\n                                    }\n                                },\n                                                \n                            ]\" />\n                        </template>\n                    </iq-card>\n                </div>\n            </div>\n        </form>\n    </div>\n</template>\n<script>\nimport UserInfo from '../../../services/userInfo.service'\nimport thesisServices from '../../../api/thesisServices'\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, requiredIf } from \"@vuelidate/validators\";\n\n\nexport default {\n    name: 'Thesis',\n    created() {\n        this.role = UserInfo.getRole()[0]\n    },\n    setup() {\n        return { v$: useVuelidate() };\n    },\n    props: [\n        'thesis'\n    ],\n    data() {\n        return {\n            role: '',\n            retard: false,\n            retardNote: '',\n            reviweNote: '',\n            mark: 70,\n            markCondition: true,\n        }\n    },\n    validations() {\n        return {\n            retardNote: {\n                required: requiredIf(function (nestedModel) {\n                    return this.retard == true;\n                }),\n            },\n            reviweNote: {\n                required\n            },\n        };\n    },\n    methods: {\n        changeTab(value) {\n            this.$emit('onNext', value)\n        },\n        resolve_img_url: function (image) {\n            const url = `http://127.0.0.1:8000/api/thesises/image?path=${image}`\n            return url;\n        },\n        checkMark() {\n            this.markCondition = (parseInt(this.mark) >= 70 && parseInt(this.mark) <= 100)\n        },\n        addDegree(id) {\n            this.v$.$touch();\n            this.checkMark();\n            if (!this.v$.reviweNote.$invalid && this.markCondition) {\n                const swalWithBootstrapButtons = this.$swal.mixin({\n                    customClass: {\n                        confirmButton: 'btn btn-primary btn-lg',\n                        cancelButton: 'btn btn-outline-primary btn-lg ms-2'\n                    },\n                    buttonsStyling: false\n                })\n                swalWithBootstrapButtons.fire({\n                    title: 'هل أنت متأكد؟',\n                    text: \"موافقتك تعني أن هذه الأطروحة تمت مراجعتها\",\n                    icon: 'warning',\n                    showCancelButton: true,\n                    confirmButtonText: 'تمت المراجعة  ',\n                    cancelButtonText: 'تراجع  ',\n                    showClass: {\n                        popup: 'animate__animated animate__zoomIn'\n                    },\n                    hideClass: {\n                        popup: 'animate__animated animate__zoomOut'\n                    }\n                })\n                    .then((willDelete) => {\n                        if (willDelete.isConfirmed) {\n                            thesisServices.addDegree(id, this.reviweNote, this.mark)\n                                .then(response => {\n                                    swalWithBootstrapButtons.fire({\n                                        title: 'تمت المراجعة',\n                                        text: 'تم مراجعة الأطروحة',\n                                        icon: 'success',\n                                        showClass: {\n                                            popup: 'animate__animated animate__zoomIn'\n                                        },\n                                        hideClass: {\n                                            popup: 'animate__animated animate__zoomOut'\n                                        }\n                                    })\n                                    location.reload()\n                                })\n                                .catch(error => {\n                                    console.log(error)\n                                })\n                        }\n                    })\n            }\n        },\n        setRetard() {\n            this.retard = true;\n        },\n\n    }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}